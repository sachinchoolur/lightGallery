{"version":3,"file":"lightgallery.umd.js","sources":["../../../src/lgQuery.ts","../../../src/lg-utils.ts","../../../src/lg-settings.ts","../../../src/lg-events.ts","../../../src/lightgallery.ts"],"sourcesContent":["interface Offset {\n    left: number;\n    top: number;\n}\n\n(function () {\n    if (typeof window.CustomEvent === 'function') return false;\n\n    function CustomEvent(event: string, params: any) {\n        params = params || { bubbles: false, cancelable: false, detail: null };\n        const evt = document.createEvent('CustomEvent');\n        evt.initCustomEvent(\n            event,\n            params.bubbles,\n            params.cancelable,\n            params.detail,\n        );\n        return evt;\n    }\n\n    window.CustomEvent = CustomEvent as any;\n})();\n(function () {\n    if (!Element.prototype.matches) {\n        Element.prototype.matches =\n            (Element.prototype as any).msMatchesSelector ||\n            Element.prototype.webkitMatchesSelector;\n    }\n})();\nexport class lgQuery {\n    static eventListeners: { [key: string]: any[] } = {};\n    static generateUUID(): string {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(\n            /[xy]/g,\n            function (c) {\n                const r = (Math.random() * 16) | 0,\n                    v = c == 'x' ? r : (r & 0x3) | 0x8;\n                return v.toString(16);\n            },\n        );\n    }\n\n    private selector: any;\n    private firstElement: any;\n    private cssVenderPrefixes: string[] = [\n        'TransitionDuration',\n        'TransitionTimingFunction',\n        'Transform',\n        'Transition',\n    ];\n    constructor(selector: string | Element) {\n        this.selector = this._getSelector(selector);\n        this.firstElement = this._getFirstEl();\n        return this;\n    }\n\n    private _getSelector(\n        selector: string | Element,\n        context: Element | Document = document,\n    ): Element | null | NodeListOf<Element> {\n        if (typeof selector !== 'string') {\n            return selector;\n        }\n        context = context || document;\n        const fl = selector.substring(0, 1);\n        if (fl === '#') {\n            return context.querySelector(selector);\n        } else {\n            return context.querySelectorAll(selector);\n        }\n    }\n\n    private _each(\n        func: (\n            elements: Element | NodeListOf<Element> | null,\n            index: number,\n        ) => void,\n    ): this {\n        if (!this.selector) {\n            return this;\n        }\n        if (this.selector.length !== undefined) {\n            [].forEach.call(this.selector, func);\n        } else {\n            func(this.selector, 0);\n        }\n        return this;\n    }\n\n    private _setCssVendorPrefix(\n        el: any,\n        cssProperty: string,\n        value?: string | number,\n    ): void {\n        const property = cssProperty.replace(/-([a-z])/gi, function (\n            s,\n            group1,\n        ) {\n            return group1.toUpperCase();\n        });\n        if (this.cssVenderPrefixes.indexOf(property) !== -1) {\n            el.style[\n                property.charAt(0).toLowerCase() + property.slice(1)\n            ] = value;\n            el.style['webkit' + property] = value;\n            el.style['moz' + property] = value;\n            el.style['ms' + property] = value;\n            el.style['o' + property] = value;\n        } else {\n            el.style[property] = value;\n        }\n    }\n\n    private _getFirstEl() {\n        if (this.selector && this.selector.length !== undefined) {\n            return this.selector[0];\n        } else {\n            return this.selector;\n        }\n    }\n\n    private isEventMatched(event: string, eventName: string): boolean {\n        const eventNamespace = eventName.split('.');\n        return event\n            .split('.')\n            .filter((e) => e)\n            .every((e) => {\n                return eventNamespace.indexOf(e) !== -1;\n            });\n    }\n\n    attr(attr: string): string;\n    attr(attr: string, value: string | number | boolean): this;\n    attr(attr: string, value?: string | number | boolean): string | this {\n        if (value === undefined) {\n            if (!this.firstElement) {\n                return '';\n            }\n            return this.firstElement.getAttribute(attr);\n        }\n        this._each((el: any) => {\n            el.setAttribute(attr, value);\n        });\n        return this;\n    }\n\n    find(selector: any): lgQuery {\n        return $LG(this._getSelector(selector, this.selector));\n    }\n\n    first(): lgQuery {\n        if (this.selector.length !== undefined) {\n            return $LG(this.selector[0]);\n        } else {\n            return $LG(this.selector);\n        }\n    }\n\n    eq(index: number): lgQuery {\n        return $LG(this.selector[index]);\n    }\n\n    parent(): lgQuery {\n        return $LG(this.selector.parentElement);\n    }\n\n    get(): HTMLElement {\n        return this._getFirstEl();\n    }\n\n    removeAttr(attributes: string): this {\n        const attrs = attributes.split(' ');\n        this._each((el: any) => {\n            attrs.forEach((attr: string) => el.removeAttribute(attr));\n        });\n        return this;\n    }\n\n    wrap(className: string): this {\n        if (!this.firstElement) {\n            return this;\n        }\n        const wrapper = document.createElement('div');\n        wrapper.className = className;\n        this.firstElement.parentNode.insertBefore(wrapper, this.firstElement);\n        this.firstElement.parentNode.removeChild(this.firstElement);\n        wrapper.appendChild(this.firstElement);\n        return this;\n    }\n\n    addClass(classNames = ''): this {\n        this._each((el: any) => {\n            // IE doesn't support multiple arguments\n            classNames.split(' ').forEach((className) => {\n                el.classList.add(className);\n            });\n        });\n        return this;\n    }\n\n    removeClass(classNames: string): this {\n        this._each((el: any) => {\n            // IE doesn't support multiple arguments\n            classNames.split(' ').forEach((className) => {\n                el.classList.remove(className);\n            });\n        });\n        return this;\n    }\n\n    hasClass(className: string): boolean {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.classList.contains(className);\n    }\n    hasAttribute(attribute: string): boolean {\n        if (!this.firstElement) {\n            return false;\n        }\n        return this.firstElement.hasAttribute(attribute);\n    }\n    toggleClass(className: string): this {\n        if (!this.firstElement) {\n            return this;\n        }\n        if (this.hasClass(className)) {\n            this.removeClass(className);\n        } else {\n            this.addClass(className);\n        }\n        return this;\n    }\n\n    css(property: string, value?: string | number): this {\n        this._each((el: any) => {\n            this._setCssVendorPrefix(el, property, value);\n        });\n        return this;\n    }\n    // Need to pass separate namespaces for separate elements\n    on(events: string, listener: (e: any) => void): this {\n        if (!this.selector) {\n            return this;\n        }\n        events.split(' ').forEach((event: string) => {\n            if (!Array.isArray(lgQuery.eventListeners[event])) {\n                lgQuery.eventListeners[event] = [];\n            }\n            lgQuery.eventListeners[event].push(listener);\n            this.selector.addEventListener(event.split('.')[0], listener);\n        });\n\n        return this;\n    }\n    // @todo - test this\n    once(event: string, listener: (e: any) => void): this {\n        this.on(event, () => {\n            this.off(event);\n            listener(event);\n        });\n        return this;\n    }\n    off(event: string): this {\n        if (!this.selector) {\n            return this;\n        }\n        Object.keys(lgQuery.eventListeners).forEach((eventName) => {\n            if (this.isEventMatched(event, eventName)) {\n                lgQuery.eventListeners[eventName].forEach((listener) => {\n                    this.selector.removeEventListener(\n                        eventName.split('.')[0],\n                        listener,\n                    );\n                });\n                lgQuery.eventListeners[eventName] = [];\n            }\n        });\n\n        return this;\n    }\n    trigger<Detail>(event: string, detail?: Detail): this {\n        if (!this.firstElement) {\n            return this;\n        }\n\n        const customEvent = new CustomEvent(event.split('.')[0], {\n            detail: detail || null,\n        });\n        this.firstElement.dispatchEvent(customEvent);\n        return this;\n    }\n\n    // Does not support IE\n    load(url: string): this {\n        fetch(url).then((res) => {\n            this.selector.innerHTML = res;\n        });\n        return this;\n    }\n\n    html(): string;\n    html(html: string): this;\n    html(html?: string): string | this {\n        if (html === undefined) {\n            if (!this.firstElement) {\n                return '';\n            }\n            return this.firstElement.innerHTML;\n        }\n        this._each((el: any) => {\n            el.innerHTML = html;\n        });\n        return this;\n    }\n    append(html: string | HTMLElement): this {\n        this._each((el: any) => {\n            if (typeof html === 'string') {\n                el.insertAdjacentHTML('beforeend', html);\n            } else {\n                el.appendChild(html);\n            }\n        });\n        return this;\n    }\n    prepend(html: string): this {\n        this._each((el: any) => {\n            el.insertAdjacentHTML('afterbegin', html);\n        });\n        return this;\n    }\n    remove(): this {\n        this._each((el: any) => {\n            el.parentNode.removeChild(el);\n        });\n        return this;\n    }\n    empty(): this {\n        this._each((el: any) => {\n            el.innerHTML = '';\n        });\n        return this;\n    }\n    // Supports only window\n    scrollTop(): number;\n    scrollTop(scrollTop: number): this;\n    scrollTop(scrollTop?: number): number | this {\n        if (scrollTop !== undefined) {\n            document.body.scrollTop = scrollTop;\n            document.documentElement.scrollTop = scrollTop;\n            return this;\n        } else {\n            return (\n                window.pageYOffset ||\n                document.documentElement.scrollTop ||\n                document.body.scrollTop ||\n                0\n            );\n        }\n    }\n    // Supports only window\n    scrollLeft(): number;\n    scrollLeft(scrollLeft?: number): this;\n    scrollLeft(scrollLeft?: number): number | this {\n        if (scrollLeft !== undefined) {\n            document.body.scrollLeft = scrollLeft;\n            document.documentElement.scrollLeft = scrollLeft;\n            return this;\n        } else {\n            return (\n                window.pageXOffset ||\n                document.documentElement.scrollLeft ||\n                document.body.scrollLeft ||\n                0\n            );\n        }\n    }\n    offset(): Offset {\n        if (!this.firstElement) {\n            return {\n                left: 0,\n                top: 0,\n            };\n        }\n        const rect = this.firstElement.getBoundingClientRect();\n        const bodyMarginLeft = $LG('body').style().marginLeft;\n\n        // Minus body margin - https://stackoverflow.com/questions/30711548/is-getboundingclientrect-left-returning-a-wrong-value\n        return {\n            left: rect.left - parseFloat(bodyMarginLeft) + this.scrollLeft(),\n            top: rect.top + this.scrollTop(),\n        };\n    }\n    style(): CSSStyleDeclaration {\n        if (!this.firstElement) {\n            return {} as CSSStyleDeclaration;\n        }\n        return (\n            this.firstElement.currentStyle ||\n            window.getComputedStyle(this.firstElement)\n        );\n    }\n    // Width without padding and border even if box-sizing is used.\n    width(): number {\n        const style = this.style();\n        return (\n            this.firstElement.clientWidth -\n            parseFloat(style.paddingLeft) -\n            parseFloat(style.paddingRight)\n        );\n    }\n    // Height without padding and border even if box-sizing is used.\n    height(): number {\n        const style = this.style();\n        return (\n            this.firstElement.clientHeight -\n            parseFloat(style.paddingTop) -\n            parseFloat(style.paddingBottom)\n        );\n    }\n}\n\nexport function $LG(selector: any): lgQuery {\n    return new lgQuery(selector);\n}\n","import { $LG, lgQuery } from './lgQuery';\nimport { VideoSource } from './plugins/video/lg-video';\nimport { VideoInfo } from './types';\nexport interface ImageSize {\n    width: number;\n    height: number;\n}\n\nexport interface ImageSources {\n    media?: string;\n    srcset: string;\n    sizes?: string;\n    type?: string;\n}\n\nexport interface GalleryItem {\n    /**\n     * url of the media\n     */\n    src: string;\n\n    /**\n     * Source attributes for the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/source#attributes\">picture</a> element\n     */\n    sources: ImageSources[];\n\n    /**\n     * Thumbnail url\n     */\n    thumb: string;\n\n    /**\n     * alt attribute for the image\n     */\n    alt: string;\n\n    /**\n     * Title attribute for the video\n     */\n    title: string;\n\n    /**\n     * Title for iframe\n     */\n    iframeTitle: string;\n\n    /**\n     * Caption for the slide\n     * @description You can either pass the HTML markup or the ID or class name of the element which contains the captions\n     */\n    subHtml: string;\n\n    /**\n     * url of the file which contain the sub html.\n     * @description Note - Does not support Internet Explorer browser\n     */\n    subHtmlUrl: string;\n\n    /**\n     * Video source\n     */\n    video: VideoSource;\n\n    /**\n     * Poster url\n     */\n    poster: string;\n\n    /**\n     * Custom slide name to use in the url when hash plugin is enabled\n     */\n    slideName: string;\n\n    /**\n     * List of images and viewport's max width separated by comma.\n     * @description Ex: img/1-375.jpg 375, img/1-480.jpg 480, img/1-757.jpg 757.\n     */\n    responsive: string;\n\n    /**\n     * srcset attribute values for the main image\n     */\n    srcset: string;\n\n    /**\n     * srcset sizes attribute for the main image\n     */\n    sizes: string;\n\n    /**\n     * Set true is you want to open your url in an iframe\n     */\n    iframe: boolean;\n\n    /**\n     * Download url for your image/video.\n     * @description Pass false if you want to hide the download button.\n     */\n    downloadUrl: string | boolean;\n\n    /**\n     * Actual size of the image in px.\n     * @description This is used in zoom plugin to see the actual size of the image when double taped on the image.\n     */\n    width: string;\n\n    /**\n     * Facebook share URL.\n     * @description Specify only if you want to provide separate share URL for the specific slide. By default, current browser URL is taken.\n     */\n    facebookShareUrl: string;\n\n    /**\n     * Tweet text\n     */\n    tweetText: string;\n\n    /**\n     * Twitter share URL.\n     * @description Specify only if you want to provide separate share URL for the specific slide. By default, current browser URL will be taken.\n     */\n    twitterShareUrl: string;\n\n    /**\n     * Pinterest share URL.\n     * @description Specify only if you want to provide separate share URL for the specific slide. By default, current browser URL will be taken.\n     * Note: Pinterest requires absolute URL\n     */\n    pinterestShareUrl: string;\n\n    /**\n     * Description for Pinterest post.\n     */\n    pinterestText: string;\n\n    /**\n     * Facebook comments body html\n     * @description Please refer <a href=\"https://developers.facebook.com/docs/plugins/comments/#comments-plugin\">facebook official documentation</a> for generating the HTML markup\n     * @example\n     * <div\n     *      class=\"fb-comments\"\n     *      data-href=\"http://sachinchoolur.github.io/lightgallery.js/demos/comment-box.html#lg=1&slide=0\"\n     *      data-width=\"400\"\n     *      data-numposts=\"5\">\n     * </div>\n     */\n    fbHtml: string;\n\n    /**\n     * Disqus page identifier\n     * @description Please refer official <a href=\"https://help.disqus.com/en/articles/1717084-javascript-configuration-variables\">disqus documentation</a> for more info\n     */\n    disqusIdentifier: string;\n\n    /**\n     * Disqus page url\n     * @description Please refer official <a href=\"https://help.disqus.com/en/articles/1717084-javascript-configuration-variables\">disqus documentation</a> for more info\n     */\n    disqusUrl: string;\n\n    __slideVideoInfo?: VideoInfo;\n    [key: string]: any;\n}\n\nconst defaultDynamicOptions = [\n    'src',\n    'sources',\n    'subHtml',\n    'subHtmlUrl',\n    'html',\n    'video',\n    'poster',\n    'slideName',\n    'responsive',\n    'srcset',\n    'sizes',\n    'iframe',\n    'downloadUrl',\n    'width',\n    'facebookShareUrl',\n    'tweetText',\n    'iframeTitle',\n    'twitterShareUrl',\n    'pinterestShareUrl',\n    'pinterestText',\n    'fbHtml',\n    'disqusIdentifier',\n    'disqusUrl',\n];\n\n// Convert html data-attribute to camalcase\nexport function convertToData(attr: string): string {\n    // FInd a way for lgsize\n    if (attr === 'href') {\n        return 'src';\n    }\n    attr = attr.replace('data-', '');\n    attr = attr.charAt(0).toLowerCase() + attr.slice(1);\n    attr = attr.replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n\n    return attr;\n}\n\nconst utils = {\n    /**\n     * get possible width and height from the lgSize attribute. Used for ZoomFromOrigin option\n     */\n    getSize(\n        el: HTMLElement,\n        container: lgQuery,\n        spacing = 0,\n        defaultLgSize?: string,\n    ): ImageSize | undefined {\n        const LGel = $LG(el);\n        let lgSize = LGel.attr('data-lg-size') || defaultLgSize;\n\n        if (!lgSize) {\n            return;\n        }\n\n        const isResponsiveSizes = lgSize.split(',');\n        // if at-least two viewport sizes are available\n        if (isResponsiveSizes[1]) {\n            const wWidth = window.innerWidth;\n            for (let i = 0; i < isResponsiveSizes.length; i++) {\n                const size = isResponsiveSizes[i];\n                const responsiveWidth = parseInt(size.split('-')[2], 10);\n                if (responsiveWidth > wWidth) {\n                    lgSize = size;\n                    break;\n                }\n\n                // take last item as last option\n                if (i === isResponsiveSizes.length - 1) {\n                    lgSize = size;\n                }\n            }\n        }\n\n        const size = lgSize.split('-');\n\n        const width = parseInt(size[0], 10);\n        const height = parseInt(size[1], 10);\n\n        const cWidth = container.width();\n        const cHeight = container.height() - spacing;\n\n        const maxWidth = Math.min(cWidth, width);\n        const maxHeight = Math.min(cHeight, height);\n\n        const ratio = Math.min(maxWidth / width, maxHeight / height);\n\n        return { width: width * ratio, height: height * ratio };\n    },\n\n    /**\n     * @desc Get transform value based on the imageSize. Used for ZoomFromOrigin option\n     * @param {jQuery Element}\n     * @returns {String} Transform CSS string\n     */\n    getTransform(\n        el: HTMLElement,\n        container: lgQuery,\n        top: number,\n        bottom: number,\n        imageSize?: ImageSize,\n    ): string | undefined {\n        if (!imageSize) {\n            return;\n        }\n        const LGel = $LG(el).find('img').first();\n\n        const containerRect = container.get().getBoundingClientRect();\n\n        const wWidth = containerRect.width;\n\n        // using innerWidth to include mobile safari bottom bar\n        const wHeight = container.height() - (top + bottom);\n\n        const elWidth = LGel.width();\n        const elHeight = LGel.height();\n\n        const elStyle = LGel.style();\n        let x =\n            (wWidth - elWidth) / 2 -\n            LGel.offset().left +\n            (parseFloat(elStyle.paddingLeft) || 0) +\n            (parseFloat(elStyle.borderLeft) || 0) +\n            $LG(window).scrollLeft() +\n            containerRect.left;\n        let y =\n            (wHeight - elHeight) / 2 -\n            LGel.offset().top +\n            (parseFloat(elStyle.paddingTop) || 0) +\n            (parseFloat(elStyle.borderTop) || 0) +\n            $LG(window).scrollTop() +\n            top;\n\n        const scX = elWidth / imageSize.width;\n        const scY = elHeight / imageSize.height;\n\n        const transform =\n            'translate3d(' +\n            (x *= -1) +\n            'px, ' +\n            (y *= -1) +\n            'px, 0) scale3d(' +\n            scX +\n            ', ' +\n            scY +\n            ', 1)';\n        return transform;\n    },\n\n    getIframeMarkup(\n        src: string,\n        iframeWidth: string,\n        iframeHeight: string,\n        iframeTitle?: string,\n    ): string {\n        const title = iframeTitle ? 'title=\"' + iframeTitle + '\"' : '';\n        return `<div class=\"lg-video-cont lg-has-iframe\" style=\"width:${iframeWidth}; height: ${iframeHeight}\">\n                    <iframe class=\"lg-object\" frameborder=\"0\" ${title} src=\"${src}\"  allowfullscreen=\"true\"></iframe>\n                </div>`;\n    },\n\n    getImgMarkup(\n        index: number,\n        src: string,\n        altAttr: string,\n        srcset: string,\n        sizes: string,\n        sources?: ImageSources[],\n    ): string {\n        const srcsetAttr = srcset ? `srcset=${srcset}` : '';\n        const sizesAttr = sizes ? `sizes=${sizes}` : '';\n        const imgMarkup = `<img ${altAttr} ${srcsetAttr}  ${sizesAttr} class=\"lg-object lg-image\" data-index=\"${index}\" src=\"${src}\" />`;\n        let sourceTag = '';\n        if (sources) {\n            const sourceObj =\n                typeof sources === 'string' ? JSON.parse(sources) : sources;\n\n            sourceTag = sourceObj.map((source: any) => {\n                let attrs = '';\n                Object.keys(source).forEach((key) => {\n                    // Do not remove the first space as it is required to separate the attributes\n                    attrs += ` ${key}=\"${source[key]}\"`;\n                });\n                return `<source ${attrs}></source>`;\n            });\n        }\n        return `${sourceTag}${imgMarkup}`;\n    },\n\n    // Get src from responsive src\n    getResponsiveSrc(srcItms: string[]): string {\n        const rsWidth = [];\n        const rsSrc = [];\n        let src = '';\n        for (let i = 0; i < srcItms.length; i++) {\n            const _src = srcItms[i].split(' ');\n\n            // Manage empty space\n            if (_src[0] === '') {\n                _src.splice(0, 1);\n            }\n\n            rsSrc.push(_src[0]);\n            rsWidth.push(_src[1]);\n        }\n\n        const wWidth = window.innerWidth;\n        for (let j = 0; j < rsWidth.length; j++) {\n            if (parseInt(rsWidth[j], 10) > wWidth) {\n                src = rsSrc[j];\n                break;\n            }\n        }\n        return src;\n    },\n\n    isImageLoaded(img: HTMLImageElement): boolean {\n        if (!img) return false;\n        // During the onload event, IE correctly identifies any images that\n        // weren’t downloaded as not complete. Others should too. Gecko-based\n        // browsers act like NS4 in that they report this incorrectly.\n        if (!img.complete) {\n            return false;\n        }\n\n        // However, they do have two very useful properties: naturalWidth and\n        // naturalHeight. These give the true size of the image. If it failed\n        // to load, either of these should be zero.\n        if (img.naturalWidth === 0) {\n            return false;\n        }\n\n        // No other way of checking: assume it’s ok.\n        return true;\n    },\n\n    getVideoPosterMarkup(\n        _poster: string,\n        dummyImg: string,\n        videoContStyle: string,\n        _isVideo?: VideoInfo,\n    ): string {\n        let videoClass = '';\n        if (_isVideo && _isVideo.youtube) {\n            videoClass = 'lg-has-youtube';\n        } else if (_isVideo && _isVideo.vimeo) {\n            videoClass = 'lg-has-vimeo';\n        } else {\n            videoClass = 'lg-has-html5';\n        }\n\n        return `<div class=\"lg-video-cont ${videoClass}\" style=\"${videoContStyle}\">\n                <div class=\"lg-video-play-button\">\n                <svg\n                    viewBox=\"0 0 20 20\"\n                    preserveAspectRatio=\"xMidYMid\"\n                    focusable=\"false\"\n                    aria-labelledby=\"Play video\"\n                    role=\"img\"\n                    class=\"lg-video-play-icon\"\n                >\n                    <title>Play video</title>\n                    <polygon class=\"lg-video-play-icon-inner\" points=\"1,0 20,10 1,20\"></polygon>\n                </svg>\n                <svg class=\"lg-video-play-icon-bg\" viewBox=\"0 0 50 50\" focusable=\"false\">\n                    <circle cx=\"50%\" cy=\"50%\" r=\"20\"></circle></svg>\n                <svg class=\"lg-video-play-icon-circle\" viewBox=\"0 0 50 50\" focusable=\"false\">\n                    <circle cx=\"50%\" cy=\"50%\" r=\"20\"></circle>\n                </svg>\n            </div>\n            ${dummyImg || ''}\n            <img class=\"lg-object lg-video-poster\" src=\"${_poster}\" />\n        </div>`;\n    },\n\n    /**\n     * @desc Create dynamic elements array from gallery items when dynamic option is false\n     * It helps to avoid frequent DOM interaction\n     * and avoid multiple checks for dynamic elments\n     *\n     * @returns {Array} dynamicEl\n     */\n    getDynamicOptions(\n        items: any,\n        extraProps: string[],\n        getCaptionFromTitleOrAlt: boolean,\n        exThumbImage: string,\n    ): GalleryItem[] {\n        const dynamicElements: GalleryItem[] = [];\n        const availableDynamicOptions = [\n            ...defaultDynamicOptions,\n            ...extraProps,\n        ];\n        [].forEach.call(items, (item: HTMLElement) => {\n            const dynamicEl: GalleryItem = {} as GalleryItem;\n            for (let i = 0; i < item.attributes.length; i++) {\n                const attr = item.attributes[i];\n                if (attr.specified) {\n                    const dynamicAttr = convertToData(attr.name);\n                    let label = '';\n                    if (availableDynamicOptions.indexOf(dynamicAttr) > -1) {\n                        label = dynamicAttr;\n                    }\n                    if (label) {\n                        (dynamicEl as any)[label] = attr.value;\n                    }\n                }\n            }\n            const currentItem = $LG(item);\n            const alt = currentItem.find('img').first().attr('alt');\n            const title = currentItem.attr('title');\n\n            const thumb = exThumbImage\n                ? currentItem.attr(exThumbImage)\n                : currentItem.find('img').first().attr('src');\n            dynamicEl.thumb = thumb;\n\n            if (getCaptionFromTitleOrAlt && !dynamicEl.subHtml) {\n                dynamicEl.subHtml = title || alt || '';\n            }\n            dynamicEl.alt = alt || title || '';\n            dynamicElements.push(dynamicEl);\n        });\n        return dynamicElements;\n    },\n    isMobile(): boolean {\n        let isMobile = false;\n        (function (a) {\n            if (\n                /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n                    a,\n                ) ||\n                /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n                    a.substr(0, 4),\n                )\n            )\n                isMobile = true;\n        })(navigator.userAgent || navigator.vendor || (window as any).opera);\n        return isMobile;\n    },\n};\n\nexport default utils;\n","import { GalleryItem } from './lg-utils';\n\nexport type MobileSettings = Exclude<LightGallerySettings, 'mobileSettings'>;\nexport interface LightGallerySettings {\n    /**\n     * Type of transition between images.\n     */\n    mode:\n        | 'lg-slide'\n        | 'lg-fade'\n        | 'lg-zoom-in'\n        | 'lg-zoom-in-big'\n        | 'lg-zoom-out'\n        | 'lg-zoom-out-big'\n        | 'lg-zoom-out-in'\n        | 'lg-zoom-in-out'\n        | 'lg-soft-zoom'\n        | 'lg-scale-up'\n        | 'lg-slide-circular'\n        | 'lg-slide-circular-vertical'\n        | 'lg-slide-vertical'\n        | 'lg-slide-vertical-growth'\n        | 'lg-slide-skew-only'\n        | 'lg-slide-skew-only-rev'\n        | 'lg-slide-skew-only-y'\n        | 'lg-slide-skew-only-y-rev'\n        | 'lg-slide-skew'\n        | 'lg-slide-skew-rev'\n        | 'lg-slide-skew-cross'\n        | 'lg-slide-skew-cross-rev'\n        | 'lg-slide-skew-ver'\n        | 'lg-slide-skew-ver-rev'\n        | 'lg-slide-skew-ver-cross'\n        | 'lg-slide-skew-ver-cross-rev'\n        | 'lg-lollipop'\n        | 'lg-lollipop-rev'\n        | 'lg-rotate'\n        | 'lg-rotate-rev'\n        | 'lg-tube';\n\n    /**\n     * Slide animation CSS easing property\n     */\n    easing: string;\n\n    /**\n     *Transition duration (in ms).\n     */\n    speed: number;\n\n    /**\n     * Height of the gallery.\n     * @example '100%' , '300px'\n     */\n    height: string;\n\n    /**\n     * Width of the gallery.\n     * @example '100%' , '300px'\n     */\n    width: string;\n\n    /**\n     * Add custom class for gallery container\n     * @description this can be used to set different style for different galleries\n     */\n    addClass: string;\n\n    /**\n     * Start animation class for the gallery.\n     * @description This can be used to change the zoom effect when the image is loaded\n     * This is also applied when navigating to new slides\n     * Note -  if startClass will be empty zoomFromOrigin is true.\n     */\n    startClass: string;\n\n    /**\n     * Enable zoom from origin effect.\n     * @description You need to know the original image size upfront and provide it via data-lg-size attribute as data-lg-size=\"1920-1280\"\n     * If you are using responsive images,\n     * If you don't know, the size of a few images in the list, you can skip the data-lg-size attribute for the particular slides,\n     * lightGallery will show the default animation if data-lg-size is not available\n     * you can pass a comma separated list of sizes combined with a max-width (up to what size the particular image should be used)\n     * example -\n     * data-lg-size=\"240-160-375, 400-267-480, 1600-1067\"\n     * data-responsive=\"img-240.jpg 375, img-400.jpg 480\"\n     * data-src=\"img-1600.jpg\"\n     * In the above example, upto 375 width img.240.jpg and lg-size 240-160 will be used.\n     * Similarly, upto 480 pixel width size 400-267 and img-400.jpg will be used\n     * And above 480, lg-size 1600-1067 and img-1600.jpg will be used\n     * Supports only images.\n     * Will be false if dynamic option is enabled or galleryID found in the URL.\n     * startClass will be empty if zoomFromOrigin is true to avoid css conflicts.\n     */\n    zoomFromOrigin: boolean;\n\n    /**\n     * Zoom from image animation duration\n     */\n    startAnimationDuration: number;\n\n    /**\n     * Backdrop transition duration.\n     * @description Note - Do not change the value of backdrop via css.\n     */\n    backdropDuration: number;\n\n    /**\n     * Configure where the gallery should be appended.\n     * @description Useful to create inline galleries and more\n     */\n    container: HTMLElement;\n\n    /**\n     * Delay for hiding gallery controls in ms.\n     * @description Pass 0 if you don't want to hide the controls\n     */\n    hideBarsDelay: number;\n\n    /**\n     * Delay in hiding controls for the first time when gallery is opened\n     */\n    showBarsAfter: number;\n\n    /**\n     * Delay slide transitions.\n     * @description This is useful if you want to do any action in the current slide before moving to next slide.\n     * For example, fading out the captions before going to next slide.\n     * .lg-slide-progress class name is added to the current slide immediately after calling the slide method.\n     * But transition begins only after the delay\n     */\n    slideDelay: number;\n\n    /**\n     * Support legacy browsers\n     * @description Currently this is used only for adding support to srcset attribute via picturefill library\n     * If true lightGallery will show warning message to include picturefill library\n     */\n    supportLegacyBrowser: boolean;\n\n    /**\n     * If true sub-html will also be hidden along with controls and toolbar if hideBarDelay is more than 0\n     */\n    hideSubHtml: boolean;\n\n    /**\n     * If true, toolbar, captions and thumbnails will not overlap with media element\n     * @description This will not effect thumbnails if animateThumb is false\n     * Also, toggle thumbnails button is not displayed if allowMediaOverlap is false\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\n     * Therefore, The height of the caption is calculated dynamically, only once based on the first slide caption.\n     * if you have dynamic captions for each media,\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\n     */\n    allowMediaOverlap: boolean;\n\n    /**\n     * Video max size.\n     * @description This can be over-written by passing specific size via data-lg-size attribute\n     * Recommended video resolution and & aspect ratios https://support.google.com/youtube/answer/6375112\n     */\n    videoMaxSize: string;\n\n    /**\n     * Height of the caption for calculating allowMediaOverlap positions\n     * Note - this is only used to find the position of media item if allowMediaOverlap is true.\n     * Not for setting height of the captions\n     * Set 0 if you want to calculate the height of captions dynamically\n     */\n    defaultCaptionHeight: number;\n\n    /**\n     * aria-labelledby attribute fot gallery\n     */\n    ariaLabelledby: string;\n\n    /**\n     * aria-describedby attribute for gallery\n     */\n    ariaDescribedby: string;\n\n    /**\n     * If false user won't be abel to close the gallery at all\n     * @description This is useful for creating inline galleries.\n     */\n    closable: boolean;\n\n    /**\n     * allows vertical drag/swipe to close gallery\n     * @description false if closable is false\n     */\n    swipeToClose: boolean;\n    /**\n     * allows clicks on black area to close gallery.\n     */\n    closeOnTap: boolean;\n\n    /**\n     * If false, close button won't be displayed.\n     * @description Useful for creating inline galleries.\n     */\n    showCloseIcon: boolean;\n\n    /**\n     * Show maximize icon.\n     * @description Useful for creating inline galleries.\n     */\n    showMaximizeIcon: boolean;\n\n    /**\n     * If false, will disable the ability to loop back to the beginning of the gallery from the last slide.\n     */\n    loop: boolean;\n\n    /**\n     * Whether the LightGallery could be closed by pressing the \"Esc\" key.\n     */\n    escKey: boolean;\n\n    /**\n     * Enable keyboard navigation\n     */\n    keyPress: boolean;\n\n    /**\n     * If false, prev/next buttons will not be displayed.\n     */\n    controls: boolean;\n\n    /**\n     * Enable slideEnd animation\n     */\n    slideEndAnimation: boolean;\n\n    /**\n     * If true, prev/next button will be hidden on first/last image.\n     */\n    hideControlOnEnd: boolean;\n\n    /**\n     * ability to navigate to next/prev slides on mousewheel\n     */\n    mousewheel: boolean;\n\n    /**\n     * Option to get captions from alt or title tags.\n     */\n    getCaptionFromTitleOrAlt: boolean;\n\n    /**\n     * control where the sub-html should be appended.\n     */\n    appendSubHtmlTo: '.lg-sub-html' | '.lg-item';\n\n    /**\n     * Set to true if the selector in \"data-sub-html\" should use the current item as its origin.\n     */\n    subHtmlSelectorRelative: boolean;\n\n    /**\n     * number of preload slides\n     * @description will exicute only after the current slide is fully loaded.\n     * for example you click on 4th image and if preload = 1 then 3rd slide and 5th\n     * slide will be loaded in the background after the 4th slide is fully loaded..\n     * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.\n     */\n    preload: number;\n\n    /**\n     * Control how many slide items should be kept in dom at a time\n     * @description To improve performance by reducing number of gallery items in the dom,\n     * lightGallery keeps only the lowest possible number of slides in the dom at a time.\n     * This has a minimum value of 3\n     */\n    numberOfSlideItemsInDom: number;\n\n    /**\n     * Show Content once it is fully loaded\n     */\n    showAfterLoad: boolean;\n\n    /**\n     * Custom selector property instead of direct children.\n     * @description Based on your markup structure, you can specify custom selectors to fetch media data for the gallery\n     * Pass \"this\" to select same element\n     * Example - '.my-selector' | '#my-selector' | this\n     */\n    selector: string;\n\n    /**\n     * By default selector element relative to the current gallery.\n     * Instead of that you can tell lightGallery to select element relative to another element.\n     * Example - '.my-selector-container' | '#my-selector-container'\n     * In the code this become selector =  document.querySelector(this.s.selectWithin ).querySelectorAll(this.s.selector);\n     */\n    selectWithin: string;\n\n    /**\n     * Custom html for next control\n     */\n    nextHtml: string;\n\n    /**\n     * Custom html for prev control\n     */\n    prevHtml: string;\n\n    /**\n     * specify which slide should load initially\n     */\n    index: number;\n\n    /**\n     * Set width for iframe.\n     */\n    iframeWidth: string;\n\n    /**\n     * Set width for iframe.\n     */\n    iframeHeight: string;\n\n    /**\n     * Enable download button.\n     * @description By default download url will be taken from data-src/href attribute but it supports only for modern browsers.\n     * If you want you can provide another url for download via data-download-url.\n     * pass false in data-download-url if you want to hide download button for the particular slide.\n     */\n    download: boolean;\n\n    /**\n     * Whether to show total number of images and index number of currently displayed image.\n     */\n    counter: boolean;\n\n    /**\n     * Where the counter should be appended\n     */\n    appendCounterTo: string;\n\n    /**\n     * By setting the swipeThreshold (in px) you can set how far the user must swipe for the next/prev image.\n     */\n    swipeThreshold: number;\n\n    /**\n     * Enables swipe support for touch devices\n     */\n    enableSwipe: boolean;\n\n    /**\n     * Enables desktop mouse drag support\n     */\n    enableDrag: boolean;\n\n    /**\n     * LightGallery can be instantiated and launched programmatically by setting this option to true and populating dynamicEl option (see below) with the definitions of images.\n     */\n    dynamic: false;\n\n    /**\n     * An array of objects (src, iframe, subHtml, thumb, poster, responsive, srcset sizes) representing gallery elements.\n     */\n    dynamicEl: GalleryItem[];\n\n    /**\n     * Fetch custom properties from the selector\n     * @description this is useful for plugin development\n     * By default lightGallery fetches and store all the props selectors to\n     * reduce frequent dom interaction for fetching props every time.\n     *\n     * If you need any addition data to be fetched and stored in the galleryItems variable,\n     * you can do this just by passing the prop names via extraProps\n     * @example\n     * HTML:\n     * ```html\n     * <div id=\"lightGallery\">\n     *     <a href=\"a.jpg\" data-custom-prop=\"abc\"><img src=\"thumb.jpg\" /></a>\n     *     <a href=\"a.jpg\" data-custom-prop=\"xyz\"><img src=\"thumb.jpg\" /></a>\n     * </div>\n     * ```\n     * ```js\n     * lightGallery(document.getElementById('lightGallery'), {\n     *     extraProps: ['customProp']\n     * })\n     * ```\n     * Note - If you are using dynamic mode, you can pass any custom prop in the galleryItem\n     *  * ```js\n     * lightGallery(document.getElementById('lightGallery'), {\n     *     dynamic: true,\n     *     dynamicEl: [{\n     *         src: 'img/img1.jpg',\n     *         customProp:'abc',\n     *     }]\n     * })\n     * ```\n     *\n     */\n    extraProps: string[];\n\n    /**\n     * Unique id for each gallery.\n     * @description It is mandatory when you use hash plugin for multiple galleries on the same page.\n     */\n    galleryId: number;\n\n    /**\n     * Custom slide name to use in the url when hash plugin is enabled\n     */\n    customSlideName: boolean;\n\n    /**\n     * If you want to use external image for thumbnail, \n     * add the path of that image inside \"data-\" attribute and set value of this option to the name of your custom attribute.\n    @example \n    ```html\n    <li data-exthumbimage=\"externalThumb.jpg\" data-src=\"img/img1.jpg\"></li>\n    ```\n    ```js\n    {\n        exThumbImage: 'data-exthumbimage'\n    }\n    ```\n     */\n    exThumbImage: string;\n\n    /**\n     * Function to detect mobile devices\n     */\n    isMobile?: () => boolean;\n\n    /**\n     * Separate settings for mobile devices\n     * @description Note - this is applied only at the time of loading\n     * by default controls and close buttons are disabled on mobile devices.\n     * use this options if you want to enable them or change any other settings for mobile devices\n     */\n    mobileSettings: MobileSettings;\n}\n\nexport const lightGallerySettings: LightGallerySettings = {\n    mode: 'lg-slide',\n    easing: 'ease',\n    speed: 400,\n    height: '100%',\n    width: '100%',\n    addClass: '',\n    startClass: 'lg-start-zoom',\n    backdropDuration: 300,\n    container: document.body,\n    startAnimationDuration: 400,\n    zoomFromOrigin: true,\n    hideBarsDelay: 0,\n    showBarsAfter: 10000,\n    slideDelay: 0,\n    supportLegacyBrowser: true,\n    hideSubHtml: false,\n    allowMediaOverlap: false,\n    videoMaxSize: '1280-720',\n    defaultCaptionHeight: 0,\n    ariaLabelledby: '',\n    ariaDescribedby: '',\n    closable: true,\n    swipeToClose: true,\n    closeOnTap: true,\n    showCloseIcon: true,\n    showMaximizeIcon: false,\n    loop: true,\n    escKey: true,\n    keyPress: true,\n    controls: true,\n    slideEndAnimation: true,\n    hideControlOnEnd: false,\n    mousewheel: false,\n    getCaptionFromTitleOrAlt: true,\n    appendSubHtmlTo: '.lg-sub-html',\n    subHtmlSelectorRelative: false,\n    preload: 2,\n    numberOfSlideItemsInDom: 10,\n    showAfterLoad: true,\n    selector: '',\n    selectWithin: '',\n    nextHtml: '',\n    prevHtml: '',\n    index: 0,\n    iframeWidth: '100%',\n    iframeHeight: '100%',\n    download: true,\n    counter: true,\n    appendCounterTo: '.lg-toolbar',\n    swipeThreshold: 50,\n    enableSwipe: true,\n    enableDrag: true,\n    dynamic: false,\n    dynamicEl: [],\n    extraProps: [],\n    galleryId: 1,\n    customSlideName: false,\n    exThumbImage: '',\n    isMobile: undefined,\n    mobileSettings: {\n        controls: false,\n        showCloseIcon: false,\n    } as MobileSettings,\n};\n","import { LightGallery } from './lightgallery';\nimport { VideoSource } from './plugins/video/lg-video';\n\n/**\n * List of lightGallery events\n * All events should be documented here\n * Below interfaces are used to build the website documentations\n * */\nexport const lGEvents = {\n    afterAppendSlide: 'afterAppendSlide.lg',\n    init: 'init.lg',\n    hasVideo: 'hasVideo.lg',\n    containerResize: 'containerResize.lg',\n    updateSlides: 'updateSlides.lg',\n    afterAppendSubHtml: 'afterAppendSubHtml.lg',\n    beforeOpen: 'beforeOpen.lg',\n    afterOpen: 'afterOpen.lg',\n    slideItemLoad: 'slideItemLoad.lg',\n    beforeSlide: 'beforeSlide.lg',\n    afterSlide: 'afterSlide.lg',\n    posterClick: 'posterClick.lg',\n    dragStart: 'dragStart.lg',\n    dragMove: 'dragMove.lg',\n    dragEnd: 'dragEnd.lg',\n    beforeNextSlide: 'beforeNextSlide.lg',\n    beforePrevSlide: 'beforePrevSlide.lg',\n    beforeClose: 'beforeClose.lg',\n    afterClose: 'afterClose.lg',\n};\n\n/**\n * Fired only once when lightGallery is initialized\n * @name init.lg\n */\nexport interface InitDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired when the slide content has been inserted into it's slide container.\n * @name afterAppendSlide.lg\n */\nexport interface AfterAppendSlideEventDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired immediately before opening the gallery\n * @name beforeOpen.lg\n */\nexport interface BeforeOpenDetail {}\n\n/**\n * Fired immediately after opening the gallery\n * @name afterOpen\n */\nexport interface AfterOpenDetail {}\n\n/**\n * Fired once the media inside the slide has been completely loaded .\n * @name slideItemLoad\n */\nexport interface SlideItemLoadDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * First time when an item is loaded lightGallery adds some delay for showing the completed item\n     * to show transition effect on item load\n     * Respect the delay when you use this event\n     */\n    delay: number;\n}\n\n/**\n * fired immediately before each slide transition.\n * @name beforeSlide\n */\nexport interface BeforeSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * fired immediately after each slide transition.\n * @name afterSlide\n */\nexport interface AfterSlideDetail {\n    /**\n     * Index of the previous slide\n     */\n    prevIndex: number;\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n    /**\n     * true if slide function called via thumbnail click\n     */\n    fromThumb: boolean;\n}\n\n/**\n * Fired when the video poster is clicked.\n * @name posterClick\n */\nexport interface PosterClickDetail {}\n\n/**\n * Fired when the drag event to move to different slide starts.\n * @name dragStart\n */\nexport interface DragStartDetail {}\n\n/**\n * Fired periodically during the drag operation.\n * @name dragMove\n */\nexport interface DragMoveDetail {}\n\n/**\n * Fired when the user has finished the drag operation\n * @name dragEnd\n */\nexport interface DragEndDetail {}\n\n/**\n * Fired immediately before the start of the close process.\n * @name beforeClose\n */\nexport interface BeforeCloseDetail {}\n\n/**\n * Fired immediately once lightGallery is closed.\n * @name afterClose\n */\nexport interface AfterCloseDetail {\n    /**\n     * lightGallery plugin instance\n     */\n    instance: LightGallery;\n}\n\n/**\n * Fired immediately before each \"next\" slide transition\n * @name beforeNextSlide\n */\nexport interface BeforeNextSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired immediately before each \"prev\" slide transition\n * @name beforePrevSlide\n */\nexport interface BeforePrevSlideDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n    /**\n     * true if slide function called via touch event or mouse drag\n     */\n    fromTouch: boolean;\n}\n\n/**\n * Fired when the sub-html content (ex : title/ description) has been appended into the slide.\n * @name afterAppendSubHtml\n */\nexport interface AfterAppendSubHtmlDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Fired when the sub-html content (ex : title/ description) has been appended into the slide.\n * @name containerResize.lg\n */\nexport interface ContainerResizeDetail {\n    /**\n     * Index of the slide\n     */\n    index: number;\n}\n\n/**\n * Event fired when lightGallery detects video slide\n * @name hasVideo.lg\n */\nexport interface HasVideoDetail {\n    /**\n     * Index of the slide,\n     */\n    index: number;\n    /**\n     * Video source\n     */\n    src: string;\n    /**\n     * HTML5 video source if available\n     * <p>\n       HTML5 video source = source: {\n            src: string;\n            type: string;\n        }[];\n        attributes: HTMLVideoElement;\n     * </p>\n     */\n    html5Video: VideoSource;\n    /**\n     * True if video has poster\n     */\n    hasPoster: boolean;\n\n    /**\n     * True for first slide\n     */\n    isFirstSlide: boolean;\n}\n","import utils, { GalleryItem, ImageSize } from './lg-utils';\nimport { $LG, lgQuery } from './lgQuery';\nimport { LightGallerySettings, lightGallerySettings } from './lg-settings';\nimport { Coords, SlideDirection, VideoInfo } from './types';\nimport {\n    AfterAppendSlideEventDetail,\n    AfterAppendSubHtmlDetail,\n    BeforeSlideDetail,\n    lGEvents,\n    SlideItemLoadDetail,\n} from './lg-events';\n\nwindow.$LG = $LG;\ndeclare let picturefill: any;\n\n// @ref - https://stackoverflow.com/questions/3971841/how-to-resize-images-proportionally-keeping-the-aspect-ratio\n// @ref - https://2ality.com/2017/04/setting-up-multi-platform-packages.html\n\n// Unique id for each gallery\nlet lgId = 0;\nwindow.lgModules = window.lgModules || {};\n\nexport class LightGallery {\n    public settings: LightGallerySettings;\n    public galleryItems: GalleryItem[];\n\n    // Current gallery item\n    public lgId: number;\n\n    public el: HTMLElement;\n    public LGel: lgQuery;\n    public lgOpened = false;\n\n    public index = 0;\n\n    // lightGallery modules\n    public modules: any = {};\n\n    // false when lightGallery load first slide content;\n    public lGalleryOn = false;\n\n    // True when a slide animation is in progress\n    public lgBusy = false;\n\n    // Type of touch action - {swipe, zoomSwipe, pinch}\n    public touchAction?: 'swipe' | 'zoomSwipe' | 'pinch';\n\n    // Direction of swipe/drag - {horizontal, vertical}\n    public swipeDirection?: 'horizontal' | 'vertical';\n\n    // Timeout function for hiding controls;\n    public hideBarTimeout: any;\n\n    public currentItemsInDom: string[] = [];\n\n    public outer!: lgQuery;\n\n    public items: any;\n\n    public $backdrop!: lgQuery;\n    public $lgContent!: lgQuery;\n\n    public $container!: lgQuery;\n\n    public $inner!: lgQuery;\n    public $toolbar!: lgQuery;\n\n    // Scroll top value before lightGallery is opened\n    private prevScrollTop = 0;\n\n    private zoomFromOrigin!: boolean;\n\n    private currentImageSize?: ImageSize;\n\n    private isDummyImageRemoved = false;\n\n    private mediaContainerPosition = {\n        top: 0,\n        bottom: 0,\n    };\n\n    constructor(\n        element: HTMLElement,\n        options: Partial<LightGallerySettings> = {},\n    ) {\n        lgId++;\n        this.lgId = lgId;\n\n        this.el = element;\n        this.LGel = $LG(element);\n\n        // lightGallery settings\n        this.settings = Object.assign({}, lightGallerySettings, options);\n        if (\n            this.settings.isMobile && typeof this.settings.isMobile\n                ? this.settings.isMobile()\n                : utils.isMobile()\n        ) {\n            const mobileSettings = Object.assign(\n                {},\n                this.settings.mobileSettings,\n                options.mobileSettings,\n            );\n            this.settings = Object.assign(this.settings, mobileSettings);\n        }\n\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (\n            this.settings.dynamic &&\n            this.settings.dynamicEl !== undefined &&\n            !Array.isArray(this.settings.dynamicEl)\n        ) {\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\n        }\n\n        if (this.settings.slideEndAnimation) {\n            this.settings.hideControlOnEnd = false;\n        }\n        if (!this.settings.closable) {\n            this.settings.swipeToClose = false;\n        }\n\n        // Need to disable zoomFromOrigin if gallery is opened from url (Hash plugin)\n        // And reset it on close to get the correct value next time\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\n\n        // Gallery items\n        this.galleryItems = this.getItems();\n\n        // At the moment, Zoom from image doesn't support dynamic options\n        // @todo add zoomFromOrigin support for dynamic images\n        if (this.settings.dynamic) {\n            this.zoomFromOrigin = false;\n        }\n\n        // settings.preload should not be grater than $item.length\n        this.settings.preload = Math.min(\n            this.settings.preload,\n            this.galleryItems.length,\n        );\n\n        this.init();\n\n        return this;\n    }\n\n    init(): void {\n        this.addSlideVideoInfo(this.galleryItems);\n        const fromHash = this.buildFromHash();\n\n        let openGalleryAfter = 0;\n\n        if (!fromHash) {\n            openGalleryAfter = this.buildStructure();\n        }\n\n        this.LGel.trigger(lGEvents.init, {\n            instance: this,\n        });\n\n        if (this.settings.keyPress) {\n            this.keyPress();\n        }\n\n        setTimeout(() => {\n            this.enableDrag();\n            this.enableSwipe();\n        }, 50);\n\n        if (this.galleryItems.length > 1) {\n            this.arrow();\n\n            if (this.settings.mousewheel) {\n                this.mousewheel();\n            }\n        }\n\n        if (!this.settings.dynamic) {\n            // Using for loop instead of using bubbling as the items can be any html element.\n            for (let index = 0; index < this.items.length; index++) {\n                const element = this.items[index];\n                const $element = $LG(element);\n                // Using different namespace for click because click event should not unbind if selector is same object('this')\n                // @todo manage all event listners - should have namespace that represent element\n                const uuid = lgQuery.generateUUID();\n                $element\n                    .attr('data-lg-id', uuid)\n                    .on(`click.lgcustom-item-${uuid}`, (e) => {\n                        e.preventDefault();\n                        const currentItemIndex = this.settings.index || index;\n                        this.openGallery(currentItemIndex, element);\n                    });\n            }\n        }\n    }\n\n    /**\n     * Module constructor\n     * Modules are build incrementally.\n     * Gallery should be opened only once all the modules are initialized.\n     * use moduleBuildTimeout to make sure this\n     */\n    buildModules(): number {\n        let numberOfModules = 0;\n        for (const key in window.lgModules) {\n            numberOfModules++;\n            ((num) => {\n                setTimeout(() => {\n                    this.modules[key] = new window.lgModules[key](this);\n                }, 10 * num);\n            })(numberOfModules);\n        }\n\n        return numberOfModules * 10;\n    }\n\n    getSlideItem(index: number): lgQuery {\n        return $LG(this.getSlideItemId(index));\n    }\n\n    getSlideItemId(index: number): string {\n        return `#lg-item-${this.lgId}-${index}`;\n    }\n\n    getIdName(id: string): string {\n        return `${id}-${this.lgId}`;\n    }\n    getElementById(id: string): lgQuery {\n        return $LG(`#${this.getIdName(id)}`);\n    }\n\n    buildStructure(): number {\n        const container = this.$container && this.$container.get();\n        if (container) {\n            return 0;\n        }\n        let controls = '';\n        let subHtmlCont = '';\n\n        // Create controls\n        if (this.settings.controls && this.galleryItems.length > 1) {\n            controls = `<button type=\"button\" id=\"${this.getIdName(\n                'lg-prev',\n            )}\" aria-label=\"Previous slide\" class=\"lg-prev lg-icon\"> ${\n                this.settings.prevHtml\n            } </button>\n                <button type=\"button\" id=\"${this.getIdName(\n                    'lg-next',\n                )}\" aria-label=\"Next slide\" class=\"lg-next lg-icon\"> ${\n                this.settings.nextHtml\n            } </button>`;\n        }\n\n        if (this.settings.appendSubHtmlTo === '.lg-sub-html') {\n            subHtmlCont =\n                '<div class=\"lg-sub-html\" role=\"status\" aria-live=\"polite\"></div>';\n        }\n\n        let addClasses = '';\n\n        if (this.settings.hideSubHtml) {\n            // Do not remove space before last single quote\n            addClasses += 'lg-hide-sub-html ';\n        }\n\n        const ariaLabelledby = this.settings.ariaLabelledby\n            ? 'aria-labelledby=\"' + this.settings.ariaLabelledby + '\"'\n            : '';\n        const ariaDescribedby = this.settings.ariaDescribedby\n            ? 'aria-describedby=\"' + this.settings.ariaDescribedby + '\"'\n            : '';\n\n        const containerClassName = `lg-container ${this.settings.addClass} ${\n            document.body !== this.settings.container ? 'lg-inline' : ''\n        }`;\n        const closeIcon =\n            this.settings.closable && this.settings.showCloseIcon\n                ? `<button type=\"button\" aria-label=\"Close gallery\" id=\"${this.getIdName(\n                      'lg-close',\n                  )}\" class=\"lg-close lg-icon\"></button>`\n                : '';\n        const maximizeIcon = this.settings.showMaximizeIcon\n            ? `<button type=\"button\" aria-label=\"Toggle maximize\" id=\"${this.getIdName(\n                  'lg-maximize',\n              )}\" class=\"lg-maximize lg-icon\"></button>`\n            : '';\n        const template = `\n        <div class=\"${containerClassName}\" id=\"${this.getIdName(\n            'lg-container',\n        )}\" tabindex=\"-1\" aria-modal=\"true\" ${ariaLabelledby} ${ariaDescribedby} role=\"dialog\"\n        >\n            <div id=\"${this.getIdName(\n                'lg-backdrop',\n            )}\" class=\"lg-backdrop\"></div>\n\n            <div id=\"${this.getIdName(\n                'lg-outer',\n            )}\" class=\"lg-outer lg-hide-items ${addClasses}\">\n                    <div id=\"${this.getIdName(\n                        'lg-content',\n                    )}\" class=\"lg\" style=\"width: ${\n            this.settings.width\n        }; height:${this.settings.height}\">\n                        <div id=\"${this.getIdName(\n                            'lg-inner',\n                        )}\" class=\"lg-inner\"></div>\n                        <div id=\"${this.getIdName(\n                            'lg-toolbar',\n                        )}\" class=\"lg-toolbar lg-group\">\n                        ${maximizeIcon}\n                        ${closeIcon}\n                    </div>\n                    ${controls}\n                    ${subHtmlCont}\n                </div> \n            </div>\n        </div>\n        `;\n\n        $LG(this.settings.container)\n            .css('position', 'relative')\n            .append(template);\n        this.outer = this.getElementById('lg-outer');\n        this.$lgContent = this.getElementById('lg-content');\n        this.$backdrop = this.getElementById('lg-backdrop');\n        this.$container = this.getElementById('lg-container');\n        this.$inner = this.getElementById('lg-inner');\n        this.$toolbar = this.getElementById('lg-toolbar');\n\n        this.$backdrop.css(\n            'transition-duration',\n            this.settings.backdropDuration + 'ms',\n        );\n\n        this.outer.addClass('lg-use-css3');\n\n        // add Class for css support and transition mode\n        this.outer.addClass('lg-css3');\n\n        this.outer.addClass(this.settings.mode);\n\n        if (this.settings.enableDrag && this.galleryItems.length > 1) {\n            this.outer.addClass('lg-grab');\n        }\n\n        if (this.settings.showAfterLoad) {\n            this.outer.addClass('lg-show-after-load');\n        }\n\n        this.$inner.css('transition-timing-function', this.settings.easing);\n        this.$inner.css('transition-duration', this.settings.speed + 'ms');\n\n        if (this.settings.download) {\n            this.$toolbar.append(\n                `<a id=\"${this.getIdName(\n                    'lg-download',\n                )}\" target=\"_blank\" aria-label=\"Download\" download class=\"lg-download lg-icon\"></a>`,\n            );\n        }\n\n        this.counter();\n\n        $LG(window).on(\n            `resize.lg.global${this.lgId} orientationchange.lg.global${this.lgId}`,\n            () => {\n                this.refreshOnResize();\n            },\n        );\n\n        this.hideBars();\n\n        this.manageCloseGallery();\n        this.toggleMaximize();\n\n        return this.buildModules();\n    }\n\n    refreshOnResize(): void {\n        if (this.lgOpened) {\n            const currentGalleryItem = this.galleryItems[this.index];\n            const videoInfo = currentGalleryItem.__slideVideoInfo;\n\n            const { top, bottom } = this.getMediaContainerPosition();\n            this.currentImageSize = utils.getSize(\n                this.items[this.index],\n                this.$lgContent,\n                top + bottom,\n                videoInfo && this.settings.videoMaxSize,\n            );\n            if (videoInfo) {\n                this.resizeVideoSlide(this.index, this.currentImageSize);\n            }\n            if (this.zoomFromOrigin && !this.isDummyImageRemoved) {\n                const imgStyle = this.getDummyImgStyles(this.currentImageSize);\n                this.outer\n                    .find('.lg-current .lg-dummy-img')\n                    .first()\n                    .attr('style', imgStyle);\n            }\n            this.LGel.trigger(lGEvents.containerResize);\n        }\n    }\n\n    resizeVideoSlide(index: number, imageSize?: ImageSize): void {\n        const lgVideoStyle = this.getVideoContStyle(imageSize);\n        const currentSlide = this.getSlideItem(index);\n        currentSlide.find('.lg-video-cont').attr('style', lgVideoStyle);\n    }\n\n    /**\n     * Update slides dynamically.\n     * Add, edit or delete slides dynamically when lightGallery is opened.\n     * Modify the current gallery items and pass it via updateSlides method\n     * @note\n     * - Do not mutate existing lightGallery items directly.\n     * - Always pass new list of gallery items\n     * - You need to take care of thumbnails outside the gallery if any\n     * @param items Gallery items\n     * @param index After the update operation, which slide gallery should navigate to\n     * @category lGPublicMethods\n     * @example\n     * const plugin = lightGallery();\n     *\n     * // Adding slides dynamically\n     * let galleryItems = [\n     * // Access existing lightGallery items\n     * // galleryItems are automatically generated internally from the gallery HTML markup\n     * // or directly from galleryItems when dynamic gallery is used\n     *   ...plugin.galleryItems,\n     *     ...[\n     *       {\n     *         src: 'img/img-1.png',\n     *           thumb: 'img/thumb1.png',\n     *         },\n     *     ],\n     *   ];\n     *   plugin.updateSlides(\n     *     galleryItems,\n     *     plugin.index,\n     *   );\n     *\n     *\n     * // Remove slides dynamically\n     * galleryItems = JSON.parse(\n     *   JSON.stringify(updateSlideInstance.galleryItems),\n     * );\n     * galleryItems.shift();\n     * updateSlideInstance.updateSlides(galleryItems, 1);\n     *\n     */\n    updateSlides(items: GalleryItem[], index: number): void {\n        if (this.index > items.length - 1) {\n            this.index = items.length - 1;\n        }\n        if (items.length === 1) {\n            this.index = 0;\n        }\n        if (!items.length) {\n            this.closeGallery();\n            return;\n        }\n        const currentSrc = this.galleryItems[index].src;\n        this.addSlideVideoInfo(items);\n        this.galleryItems = items;\n        this.$inner.empty();\n        this.currentItemsInDom = [];\n\n        let _index = 0;\n        // Find the current index based on source value of the slide\n        this.galleryItems.some((galleryItem, itemIndex) => {\n            if (galleryItem.src === currentSrc) {\n                _index = itemIndex;\n                return true;\n            }\n            return false;\n        });\n\n        this.currentItemsInDom = this.organizeSlideItems(_index, -1);\n        this.loadContent(_index, true);\n        this.getSlideItem(_index).addClass('lg-current');\n\n        this.index = _index;\n        this.updateCurrentCounter(_index);\n        this.updateCounterTotal();\n        this.LGel.trigger(lGEvents.updateSlides);\n    }\n\n    // Get gallery items based on multiple conditions\n    getItems(): GalleryItem[] {\n        // Gallery items\n        this.items = [];\n        if (!this.settings.dynamic) {\n            if (this.settings.selector === 'this') {\n                this.items.push(this.el);\n            } else if (this.settings.selector) {\n                if (this.settings.selectWithin) {\n                    const selectWithin = $LG(this.settings.selectWithin);\n                    this.items = selectWithin\n                        .find(this.settings.selector)\n                        .get();\n                } else {\n                    this.items = this.el.querySelectorAll(\n                        this.settings.selector,\n                    );\n                }\n            } else {\n                this.items = this.el.children;\n            }\n            return utils.getDynamicOptions(\n                this.items,\n                this.settings.extraProps,\n                this.settings.getCaptionFromTitleOrAlt,\n                this.settings.exThumbImage,\n            );\n        } else {\n            return this.settings.dynamicEl || [];\n        }\n    }\n\n    /**\n     * @description Open gallery with specific slide.\n     * @category lGPublicMethods\n     * @param {Number} index  - index of the slide\n     * @param {HTMLElement} element - Which image lightGallery should zoom from\n     */\n    openGallery(index = this.settings.index, element?: HTMLElement): void {\n        // prevent accidental double execution\n        if (this.lgOpened) return;\n\n        this.lgOpened = true;\n        this.outer.get().focus();\n        this.outer.removeClass('lg-hide-items');\n\n        // Add display block, but still has opacity 0\n        this.$container.addClass('lg-show');\n\n        const itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(\n            index,\n            index,\n        );\n        this.currentItemsInDom = itemsToBeInsertedToDom;\n\n        let items = '';\n        itemsToBeInsertedToDom.forEach((item) => {\n            items = items + `<div id=\"${item}\" class=\"lg-item\"></div>`;\n        });\n\n        this.$inner.append(items);\n        this.addHtml(index);\n        let transform: string | undefined = '';\n        this.mediaContainerPosition = this.getMediaContainerPosition();\n        const { top, bottom } = this.mediaContainerPosition;\n        if (!this.settings.allowMediaOverlap) {\n            this.setMediaContainerPosition(top, bottom);\n        }\n        if (this.zoomFromOrigin && element) {\n            this.currentImageSize = utils.getSize(\n                element,\n                this.$lgContent,\n                top + bottom,\n                this.galleryItems[this.index].__slideVideoInfo &&\n                    this.settings.videoMaxSize,\n            );\n            transform = utils.getTransform(\n                element,\n                this.$lgContent,\n                top,\n                bottom,\n                this.currentImageSize,\n            );\n        }\n        if (!this.zoomFromOrigin || !transform) {\n            this.outer.addClass(this.settings.startClass);\n            this.getSlideItem(index).removeClass('lg-complete');\n        }\n        this.LGel.trigger(lGEvents.beforeOpen);\n\n        // add class lg-current to remove initial transition\n        this.getSlideItem(index).addClass('lg-current');\n\n        this.lGalleryOn = false;\n        this.index = index;\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = $LG(window).scrollTop();\n\n        setTimeout(() => {\n            // Need to check both zoomFromOrigin and transform values as we need to set set the\n            // default opening animation if user missed to add the lg-size attribute\n\n            if (this.zoomFromOrigin && transform) {\n                const currentSlide = this.getSlideItem(index);\n                currentSlide.css('transform', transform);\n                setTimeout(() => {\n                    currentSlide\n                        .addClass('lg-start-progress lg-start-end-progress')\n                        .css(\n                            'transition-duration',\n                            this.settings.startAnimationDuration + 'ms',\n                        );\n                    this.outer.addClass('lg-zoom-from-image');\n                });\n                setTimeout(() => {\n                    currentSlide.css(\n                        'transform',\n                        'translate3d(0, 0, 0) translate3d(0, 0, 0)',\n                    );\n                }, 100);\n            }\n\n            setTimeout(() => {\n                this.$backdrop.addClass('in');\n                this.$container.addClass('lg-show-in');\n            }, 10);\n\n            // lg-visible class resets gallery opacity to 1\n            if (!this.zoomFromOrigin || !transform) {\n                setTimeout(() => {\n                    this.outer.addClass('lg-visible');\n                }, this.settings.backdropDuration);\n            }\n\n            // initiate slide function\n            this.slide(index, false, false, false);\n\n            this.LGel.trigger(lGEvents.afterOpen);\n        });\n\n        $LG(document.body).addClass('lg-on');\n    }\n\n    /**\n     * Note - Changing the position of the media on every slide transition creates a flickering effect.\n     * Therefore, The height of the caption is calculated dynamically, only once based on the first slide caption.\n     * if you have dynamic captions for each media,\n     * you can provide an appropriate height for the captions via allowMediaOverlap option\n     */\n    private getMediaContainerPosition() {\n        if (this.settings.allowMediaOverlap) {\n            return {\n                top: 0,\n                bottom: 0,\n            };\n        }\n        const top = this.$toolbar.get().clientHeight || 0;\n        const captionHeight =\n            this.settings.defaultCaptionHeight ||\n            this.outer.find('.lg-sub-html').get().clientHeight;\n        const thumbContainer = this.outer.find('.lg-thumb-outer').get();\n        const thumbHeight = thumbContainer ? thumbContainer.clientHeight : 0;\n        const bottom = thumbHeight + captionHeight;\n        return {\n            top,\n            bottom,\n        };\n    }\n\n    private setMediaContainerPosition(top = 0, bottom = 0) {\n        this.$inner.css('top', top + 'px').css('bottom', bottom + 'px');\n    }\n\n    // Build Gallery if gallery id exist in the URL\n    buildFromHash(): boolean | undefined {\n        // if dynamic option is enabled execute immediately\n        const _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.settings.galleryId) > 0) {\n            // This class is used to remove the initial animation if galleryId present in the URL\n            $LG(document.body).addClass('lg-from-hash');\n            this.zoomFromOrigin = false;\n\n            const index = this.getIndexFromUrl(_hash);\n\n            const openGalleryAfter = this.buildStructure();\n\n            setTimeout(() => {\n                this.openGallery(index);\n            }, openGalleryAfter);\n            return true;\n        }\n    }\n\n    hideBars(): void {\n        // Hide controllers if mouse doesn't move for some period\n        setTimeout(() => {\n            this.outer.removeClass('lg-hide-items');\n            if (this.settings.hideBarsDelay > 0) {\n                this.outer.on('mousemove.lg click.lg touchstart.lg', () => {\n                    this.outer.removeClass('lg-hide-items');\n\n                    clearTimeout(this.hideBarTimeout);\n\n                    // Timeout will be cleared on each slide movement also\n                    this.hideBarTimeout = setTimeout(() => {\n                        this.outer.addClass('lg-hide-items');\n                    }, this.settings.hideBarsDelay);\n                });\n                this.outer.trigger('mousemove.lg');\n            }\n        }, this.settings.showBarsAfter);\n    }\n\n    initPictureFill($img: lgQuery): void {\n        if (this.settings.supportLegacyBrowser) {\n            try {\n                picturefill({\n                    elements: [$img.get()],\n                });\n            } catch (e) {\n                console.warn(\n                    'lightGallery :- If you want srcset or picture tag to be supported for older browser please include picturefil javascript library in your document.',\n                );\n            }\n        }\n    }\n\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    counter(): void {\n        if (this.settings.counter) {\n            const counterHtml = `<div class=\"lg-counter\" role=\"status\" aria-live=\"polite\">\n                <span id=\"${this.getIdName(\n                    'lg-counter-current',\n                )}\" class=\"lg-counter-current\">${this.index + 1} </span> / \n                <span id=\"${this.getIdName(\n                    'lg-counter-all',\n                )}\" class=\"lg-counter-all\">${\n                this.galleryItems.length\n            } </span></div>`;\n            this.outer.find(this.settings.appendCounterTo).append(counterHtml);\n        }\n    }\n\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    addHtml(index: number): void {\n        let subHtml;\n        let subHtmlUrl;\n        if (this.galleryItems[index].subHtmlUrl) {\n            subHtmlUrl = this.galleryItems[index].subHtmlUrl;\n        } else {\n            subHtml = this.galleryItems[index].subHtml;\n        }\n\n        if (!subHtmlUrl) {\n            if (subHtml) {\n                // get first letter of subhtml\n                // if first letter starts with . or # get the html form the jQuery object\n                const fL = subHtml.substring(0, 1);\n                if (fL === '.' || fL === '#') {\n                    if (\n                        this.settings.subHtmlSelectorRelative &&\n                        !this.settings.dynamic\n                    ) {\n                        subHtml = $LG(this.items)\n                            .eq(index)\n                            .find(subHtml)\n                            .first()\n                            .html();\n                    } else {\n                        subHtml = $LG(subHtml).first().html();\n                    }\n                }\n            } else {\n                subHtml = '';\n            }\n        }\n\n        if (this.settings.appendSubHtmlTo === '.lg-sub-html') {\n            if (subHtmlUrl) {\n                this.outer.find('.lg-sub-html').load(subHtmlUrl);\n            } else {\n                this.outer.find('.lg-sub-html').html(subHtml as string);\n            }\n        } else {\n            const currentSlide = $LG(this.getSlideItemId(index));\n            if (subHtmlUrl) {\n                currentSlide.load(subHtmlUrl);\n            } else {\n                currentSlide.append(\n                    `<div class=\"lg-sub-html\">${subHtml}</div>`,\n                );\n            }\n        }\n\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                this.outer\n                    .find(this.settings.appendSubHtmlTo)\n                    .addClass('lg-empty-html');\n            } else {\n                this.outer\n                    .find(this.settings.appendSubHtmlTo)\n                    .removeClass('lg-empty-html');\n            }\n        }\n\n        this.LGel.trigger<AfterAppendSubHtmlDetail>(\n            lGEvents.afterAppendSubHtml,\n            {\n                index,\n            },\n        );\n    }\n\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     * @todo preload not working for the first slide, Also, should work for the first and last slide as well\n     */\n    preload(index: number): void {\n        for (let i = 1; i <= this.settings.preload; i++) {\n            if (i >= this.galleryItems.length - index) {\n                break;\n            }\n\n            this.loadContent(index + i, false);\n        }\n\n        for (let j = 1; j <= this.settings.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n\n            this.loadContent(index - j, false);\n        }\n    }\n\n    getDummyImgStyles(imageSize?: ImageSize): string {\n        if (!imageSize) return '';\n        return `width:${imageSize.width}px; \n                margin-left: -${imageSize.width / 2}px;\n                margin-top: -${imageSize.height / 2}px; \n                height:${imageSize.height}px`;\n    }\n    getVideoContStyle(imageSize?: ImageSize): string {\n        if (!imageSize) return '';\n        return `width:${imageSize.width}px; \n                height:${imageSize.height}px`;\n    }\n\n    getDummyImageContent(\n        $currentSlide: lgQuery,\n        index: number,\n        alt: string,\n    ): string {\n        let $currentItem;\n        if (!this.settings.dynamic) {\n            $currentItem = $LG(this.items).eq(index);\n        }\n        if ($currentItem) {\n            let _dummyImgSrc;\n            if (!this.settings.exThumbImage) {\n                _dummyImgSrc = $currentItem.find('img').first().attr('src');\n            } else {\n                _dummyImgSrc = $currentItem.attr(this.settings.exThumbImage);\n            }\n            const imgStyle = this.getDummyImgStyles(this.currentImageSize);\n            const dummyImgContent = `<img ${alt} style=\"${imgStyle}\" class=\"lg-dummy-img\" src=\"${_dummyImgSrc}\" />`;\n\n            $currentSlide.addClass('lg-first-slide');\n\n            return dummyImgContent;\n        }\n        return '';\n    }\n\n    setImgMarkup(src: string, $currentSlide: lgQuery, index: number): void {\n        const currentGalleryItem = this.galleryItems[index];\n        const { alt, srcset, sizes, sources } = currentGalleryItem;\n\n        // Use the thumbnail as dummy image which will be resized to actual image size and\n        // displayed on top of actual image\n        let imgContent = '';\n        const altAttr = alt ? 'alt=\"' + alt + '\"' : '';\n\n        if (!this.lGalleryOn && this.zoomFromOrigin && this.currentImageSize) {\n            imgContent = this.getDummyImageContent(\n                $currentSlide,\n                index,\n                altAttr,\n            );\n        } else {\n            imgContent = utils.getImgMarkup(\n                index,\n                src,\n                altAttr,\n                srcset,\n                sizes,\n                sources,\n            );\n        }\n        const imgMarkup = `<picture class=\"lg-img-wrap\"> ${imgContent}</picture>`;\n        $currentSlide.prepend(imgMarkup);\n    }\n\n    onLgObjectLoad(\n        $el: lgQuery,\n        index: number,\n        delay: number,\n        speed: number,\n        dummyImageLoaded: boolean,\n    ): void {\n        if (dummyImageLoaded) {\n            this.LGel.trigger<SlideItemLoadDetail>(lGEvents.slideItemLoad, {\n                index,\n                delay: delay || 0,\n            });\n        }\n        $el.find('.lg-object')\n            .first()\n            .on('load.lg', () => {\n                this.handleLgObjectLoad(\n                    $el,\n                    index,\n                    delay,\n                    speed,\n                    dummyImageLoaded,\n                );\n            });\n        setTimeout(() => {\n            $el.find('.lg-object')\n                .first()\n                .on('error.lg', () => {\n                    $el.addClass('lg-complete lg-complete_');\n                    $el.html(\n                        '<span class=\"lg-error-msg\">Oops... Failed to load content...</span>',\n                    );\n                });\n        }, speed);\n    }\n    handleLgObjectLoad(\n        $el: lgQuery,\n        index: number,\n        delay: number,\n        speed: number,\n        dummyImageLoaded: boolean,\n    ): void {\n        setTimeout(() => {\n            $el.addClass('lg-complete lg-complete_');\n            if (!dummyImageLoaded) {\n                this.LGel.trigger<SlideItemLoadDetail>(lGEvents.slideItemLoad, {\n                    index,\n                    delay: delay || 0,\n                });\n            }\n        }, speed);\n    }\n\n    /**\n     * @desc Check the given src is video\n     * @param {String} src\n     * @return {Object} video type\n     * Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     *\n     * @todo - this information can be moved to dynamicEl to avoid frequent calls\n     */\n    isVideo(src: string, index: number): VideoInfo | undefined {\n        if (!src) {\n            if (this.galleryItems[index].video) {\n                return {\n                    html5: true,\n                };\n            } else {\n                console.error(\n                    'lightGallery :- data-src is not provided on slide item ' +\n                        (index + 1) +\n                        '. Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html',\n                );\n                return;\n            }\n        }\n\n        const youtube = src.match(\n            /\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i,\n        );\n        const vimeo = src.match(\n            /\\/\\/(?:www\\.)?(?:player\\.)?vimeo.com\\/(?:video\\/)?([0-9a-z\\-_]+)/i,\n        );\n        const wistia = src.match(\n            /https?:\\/\\/(.+)?(wistia\\.com|wi\\.st)\\/(medias|embed)\\/([0-9a-z\\-_]+)(.*)/,\n        );\n\n        if (youtube) {\n            return {\n                youtube,\n            };\n        } else if (vimeo) {\n            return {\n                vimeo,\n            };\n        } else if (wistia) {\n            return {\n                wistia,\n            };\n        }\n    }\n\n    // Add video slideInfo\n    addSlideVideoInfo(items: GalleryItem[]): void {\n        items.forEach((element, index) => {\n            element.__slideVideoInfo = this.isVideo(element.src, index);\n        });\n    }\n\n    /**\n     *  Load slide content into slide.\n     *  This is used to load content into slides that is not visible too\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     */\n    loadContent(index: number, rec: boolean): void {\n        const currentGalleryItem = this.galleryItems[index];\n        const $currentSlide = $LG(this.getSlideItemId(index));\n\n        const { poster, srcset, sizes, sources } = currentGalleryItem;\n        let { src } = currentGalleryItem;\n\n        const video = currentGalleryItem.video;\n\n        const _html5Video =\n            video && typeof video === 'string' ? JSON.parse(video) : video;\n\n        if (currentGalleryItem.responsive) {\n            const srcDyItms = currentGalleryItem.responsive.split(',');\n            src = utils.getResponsiveSrc(srcDyItms) || src;\n        }\n\n        const videoInfo = currentGalleryItem.__slideVideoInfo;\n        let lgVideoStyle = '';\n\n        const iframe = !!currentGalleryItem.iframe;\n\n        if (!$currentSlide.hasClass('lg-loaded')) {\n            if (videoInfo) {\n                const { top, bottom } = this.mediaContainerPosition;\n                const videoSize = utils.getSize(\n                    this.items[index],\n                    this.$lgContent,\n                    top + bottom,\n                    videoInfo && this.settings.videoMaxSize,\n                );\n                lgVideoStyle = this.getVideoContStyle(videoSize);\n            }\n            if (iframe) {\n                const markup = utils.getIframeMarkup(\n                    src,\n                    this.settings.iframeWidth,\n                    this.settings.iframeHeight,\n                    currentGalleryItem.iframeTitle,\n                );\n                $currentSlide.prepend(markup);\n            } else if (poster) {\n                let dummyImg = '';\n                const isFirstSlide = !this.lGalleryOn;\n                const hasStartAnimation =\n                    !this.lGalleryOn &&\n                    this.zoomFromOrigin &&\n                    this.currentImageSize;\n                if (hasStartAnimation) {\n                    dummyImg = this.getDummyImageContent(\n                        $currentSlide,\n                        index,\n                        '',\n                    );\n                }\n\n                const markup = utils.getVideoPosterMarkup(\n                    poster,\n                    dummyImg || '',\n                    lgVideoStyle,\n                    videoInfo,\n                );\n                $currentSlide.prepend(markup);\n                const delay =\n                    (hasStartAnimation\n                        ? this.settings.startAnimationDuration\n                        : this.settings.backdropDuration) + 100;\n                setTimeout(() => {\n                    this.LGel.trigger(lGEvents.hasVideo, {\n                        index,\n                        src: src,\n                        html5Video: _html5Video,\n                        hasPoster: true,\n                        isFirstSlide,\n                    });\n                }, delay);\n            } else if (videoInfo) {\n                const markup = `<div class=\"lg-video-cont \" style=\"${lgVideoStyle}\"></div>`;\n                $currentSlide.prepend(markup);\n                this.LGel.trigger(lGEvents.hasVideo, {\n                    index,\n                    src: src,\n                    html5Video: _html5Video,\n                    hasPoster: false,\n                });\n            } else {\n                this.setImgMarkup(src, $currentSlide, index);\n                if (srcset || sources) {\n                    const $img = $currentSlide.find('.lg-object');\n                    this.initPictureFill($img);\n                }\n            }\n\n            this.LGel.trigger<AfterAppendSlideEventDetail>(\n                lGEvents.afterAppendSlide,\n                { index },\n            );\n\n            if (this.settings.appendSubHtmlTo !== '.lg-sub-html') {\n                this.addHtml(index);\n            }\n        }\n\n        // For first time add some delay for displaying the start animation.\n        let _speed = 0;\n\n        // delay for adding complete class. it is 0 except first time.\n        let delay = 0;\n        if (!this.lGalleryOn) {\n            if (this.zoomFromOrigin && this.currentImageSize) {\n                delay = this.settings.startAnimationDuration + 10;\n            } else {\n                delay = this.settings.backdropDuration + 10;\n            }\n        }\n\n        // Do not change the delay value because it is required for zoom plugin.\n        // If gallery opened from direct url (hash) speed value should be 0\n        if (delay && !$LG(document.body).hasClass('lg-from-hash')) {\n            _speed = delay;\n        }\n\n        // Only for first slide\n        if (!this.lGalleryOn && this.zoomFromOrigin && this.currentImageSize) {\n            setTimeout(() => {\n                $currentSlide\n                    .removeClass('lg-start-end-progress lg-start-progress')\n                    .removeAttr('style');\n            }, this.settings.startAnimationDuration + 100);\n            if (!$currentSlide.hasClass('lg-loaded')) {\n                setTimeout(() => {\n                    $currentSlide\n                        .find('.lg-img-wrap')\n                        .append(\n                            utils.getImgMarkup(\n                                index,\n                                src,\n                                '',\n                                srcset,\n                                sizes,\n                                currentGalleryItem.sources,\n                            ),\n                        );\n                    if (srcset || sources) {\n                        const $img = $currentSlide.find('.lg-object');\n                        this.initPictureFill($img);\n                    }\n                    this.onLgObjectLoad(\n                        $currentSlide,\n                        index,\n                        delay,\n                        _speed,\n                        true,\n                    );\n                    const mediaObject = $currentSlide\n                        .find('.lg-object')\n                        .first();\n                    if (\n                        utils.isImageLoaded(\n                            mediaObject.get() as HTMLImageElement,\n                        )\n                    ) {\n                        this.loadContentOnLoad(index, $currentSlide, _speed);\n                    } else {\n                        mediaObject.on('load.lg error.lg', () => {\n                            this.loadContentOnLoad(\n                                index,\n                                $currentSlide,\n                                _speed,\n                            );\n                        });\n                    }\n                }, this.settings.startAnimationDuration + 100);\n            }\n        }\n\n        // SLide content has been added to dom\n        $currentSlide.addClass('lg-loaded');\n        this.onLgObjectLoad($currentSlide, index, delay, _speed, false);\n\n        // @todo check load state for html5 videos\n        if (videoInfo && videoInfo.html5 && !poster) {\n            $currentSlide.addClass('lg-complete lg-complete_');\n        }\n\n        // When gallery is opened once content is loaded (second time) need to add lg-complete class for css styling\n        if (\n            (!this.zoomFromOrigin || !this.currentImageSize) &&\n            $currentSlide.hasClass('lg-complete_') &&\n            !this.lGalleryOn\n        ) {\n            setTimeout(() => {\n                $currentSlide.addClass('lg-complete');\n            }, this.settings.backdropDuration);\n        }\n\n        // Content loaded\n        // Need to set lGalleryOn before calling preload function\n        this.lGalleryOn = true;\n\n        if (rec === true) {\n            if (!$currentSlide.hasClass('lg-complete_')) {\n                $currentSlide\n                    .find('.lg-object')\n                    .first()\n                    .on('load.lg error.lg', () => {\n                        this.preload(index);\n                    });\n            } else {\n                this.preload(index);\n            }\n        }\n    }\n\n    loadContentOnLoad(\n        index: number,\n        $currentSlide: lgQuery,\n        speed: number,\n    ): void {\n        setTimeout(() => {\n            $currentSlide.find('.lg-dummy-img').remove();\n            $currentSlide.removeClass('lg-first-slide');\n            this.isDummyImageRemoved = true;\n            this.preload(index);\n        }, speed + 300);\n    }\n\n    getItemsToBeInsertedToDom(\n        index: number,\n        prevIndex: number,\n        numberOfItems = 0,\n    ): string[] {\n        const itemsToBeInsertedToDom: string[] = [];\n        // Minimum 2 items should be there\n        let possibleNumberOfItems = Math.max(numberOfItems, 3);\n        possibleNumberOfItems = Math.min(\n            possibleNumberOfItems,\n            this.galleryItems.length,\n        );\n        const prevIndexItem = `lg-item-${this.lgId}-${prevIndex}`;\n        if (this.galleryItems.length <= 3) {\n            this.galleryItems.forEach((element, index) => {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${index}`);\n            });\n            return itemsToBeInsertedToDom;\n        }\n\n        if (index < (this.galleryItems.length - 1) / 2) {\n            for (\n                let idx = index;\n                idx > index - possibleNumberOfItems / 2 && idx >= 0;\n                idx--\n            ) {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${idx}`);\n            }\n            const numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for (\n                let idx = 0;\n                idx < possibleNumberOfItems - numberOfExistingItems;\n                idx++\n            ) {\n                itemsToBeInsertedToDom.push(\n                    `lg-item-${this.lgId}-${index + idx + 1}`,\n                );\n            }\n        } else {\n            for (\n                let idx = index;\n                idx <= this.galleryItems.length - 1 &&\n                idx < index + possibleNumberOfItems / 2;\n                idx++\n            ) {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${idx}`);\n            }\n            const numberOfExistingItems = itemsToBeInsertedToDom.length;\n            for (\n                let idx = 0;\n                idx < possibleNumberOfItems - numberOfExistingItems;\n                idx++\n            ) {\n                itemsToBeInsertedToDom.push(\n                    `lg-item-${this.lgId}-${index - idx - 1}`,\n                );\n            }\n        }\n        if (this.settings.loop) {\n            if (index === this.galleryItems.length - 1) {\n                itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${0}`);\n            } else if (index === 0) {\n                itemsToBeInsertedToDom.push(\n                    `lg-item-${this.lgId}-${this.galleryItems.length - 1}`,\n                );\n            }\n        }\n        if (itemsToBeInsertedToDom.indexOf(prevIndexItem) === -1) {\n            itemsToBeInsertedToDom.push(`lg-item-${this.lgId}-${prevIndex}`);\n        }\n\n        return itemsToBeInsertedToDom;\n    }\n\n    organizeSlideItems(index: number, prevIndex: number): string[] {\n        const itemsToBeInsertedToDom = this.getItemsToBeInsertedToDom(\n            index,\n            prevIndex,\n            this.settings.numberOfSlideItemsInDom,\n        );\n\n        itemsToBeInsertedToDom.forEach((item) => {\n            if (this.currentItemsInDom.indexOf(item) === -1) {\n                this.$inner.append(`<div id=\"${item}\" class=\"lg-item\"></div>`);\n            }\n        });\n\n        this.currentItemsInDom.forEach((item) => {\n            if (itemsToBeInsertedToDom.indexOf(item) === -1) {\n                $LG(`#${item}`).remove();\n            }\n        });\n        return itemsToBeInsertedToDom;\n    }\n\n    /**\n     * Get previous index of the slide\n     */\n    getPreviousSlideIndex(): number {\n        let prevIndex = 0;\n        try {\n            const currentItemId = this.outer\n                .find('.lg-current')\n                .first()\n                .attr('id');\n            prevIndex = parseInt(currentItemId.split('-')[3]) || 0;\n        } catch (error) {\n            prevIndex = 0;\n        }\n        return prevIndex;\n    }\n\n    setDownloadValue(index: number): void {\n        if (this.settings.download) {\n            const currentGalleryItem = this.galleryItems[index];\n            const src =\n                currentGalleryItem.downloadUrl !== false &&\n                (currentGalleryItem.downloadUrl || currentGalleryItem.src);\n\n            if (src) {\n                this.getElementById('lg-download').attr('href', src);\n                this.outer.removeClass('lg-hide-download');\n            } else {\n                this.outer.addClass('lg-hide-download');\n            }\n        }\n    }\n\n    makeSlideAnimation(\n        direction: 'next' | 'prev',\n        currentSlideItem: lgQuery,\n        previousSlideItem: lgQuery,\n    ): void {\n        if (this.lGalleryOn) {\n            previousSlideItem.addClass('lg-slide-progress');\n        }\n        setTimeout(() => {\n            // remove all transitions\n            this.outer.addClass('lg-no-trans');\n\n            this.outer\n                .find('.lg-item')\n                .removeClass('lg-prev-slide lg-next-slide');\n\n            if (direction === 'prev') {\n                //prevslide\n                currentSlideItem.addClass('lg-prev-slide');\n                previousSlideItem.addClass('lg-next-slide');\n            } else {\n                // next slide\n                currentSlideItem.addClass('lg-next-slide');\n                previousSlideItem.addClass('lg-prev-slide');\n            }\n\n            // give 50 ms for browser to add/remove class\n            setTimeout(() => {\n                this.outer.find('.lg-item').removeClass('lg-current');\n\n                currentSlideItem.addClass('lg-current');\n\n                // reset all transitions\n                this.outer.removeClass('lg-no-trans');\n            }, 50);\n        }, this.settings.slideDelay);\n    }\n\n    /**\n     * Goto a specific slide.\n     * @param {Number} index - index of the slide\n     * @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n     * @param {Boolean} fromThumb - true if slide function called via thumbnail click\n     * @param {String} direction - Direction of the slide(next/prev)\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  // to go to 3rd slide\n     *  plugin.slide(2);\n     *\n     */\n    slide(\n        index: number,\n        fromTouch?: boolean,\n        fromThumb?: boolean,\n        direction?: SlideDirection | false,\n    ): void {\n        const prevIndex = this.getPreviousSlideIndex();\n        this.currentItemsInDom = this.organizeSlideItems(index, prevIndex);\n\n        // Prevent multiple call, Required for hsh plugin\n        if (this.lGalleryOn && prevIndex === index) {\n            return;\n        }\n\n        const numberOfGalleryItems = this.galleryItems.length;\n\n        if (!this.lgBusy) {\n            this.setDownloadValue(index);\n\n            const currentSlideItem = this.getSlideItem(index);\n            const previousSlideItem = this.getSlideItem(prevIndex);\n\n            const currentGalleryItem = this.galleryItems[index];\n            const videoInfo = currentGalleryItem.__slideVideoInfo;\n\n            if (videoInfo) {\n                const { top, bottom } = this.mediaContainerPosition;\n                const videoSize = utils.getSize(\n                    this.items[index],\n                    this.$lgContent,\n                    top + bottom,\n                    videoInfo && this.settings.videoMaxSize,\n                );\n                this.resizeVideoSlide(index, videoSize);\n            }\n\n            this.LGel.trigger<BeforeSlideDetail>(lGEvents.beforeSlide, {\n                prevIndex,\n                index,\n                fromTouch: !!fromTouch,\n                fromThumb: !!fromThumb,\n            });\n\n            this.lgBusy = true;\n\n            clearTimeout(this.hideBarTimeout);\n\n            this.arrowDisable(index);\n\n            if (!direction) {\n                if (index < prevIndex) {\n                    direction = 'prev';\n                } else if (index > prevIndex) {\n                    direction = 'next';\n                }\n            }\n\n            if (!fromTouch) {\n                this.makeSlideAnimation(\n                    direction as SlideDirection,\n                    currentSlideItem,\n                    previousSlideItem,\n                );\n            } else {\n                this.outer\n                    .find('.lg-item')\n                    .removeClass('lg-prev-slide lg-current lg-next-slide');\n                let touchPrev;\n                let touchNext;\n                if (numberOfGalleryItems > 2) {\n                    touchPrev = index - 1;\n                    touchNext = index + 1;\n\n                    if (index === 0 && prevIndex === numberOfGalleryItems - 1) {\n                        // next slide\n                        touchNext = 0;\n                        touchPrev = numberOfGalleryItems - 1;\n                    } else if (\n                        index === numberOfGalleryItems - 1 &&\n                        prevIndex === 0\n                    ) {\n                        // prev slide\n                        touchNext = 0;\n                        touchPrev = numberOfGalleryItems - 1;\n                    }\n                } else {\n                    touchPrev = 0;\n                    touchNext = 1;\n                }\n\n                if (direction === 'prev') {\n                    this.getSlideItem(touchNext).addClass('lg-next-slide');\n                } else {\n                    this.getSlideItem(touchPrev).addClass('lg-prev-slide');\n                }\n\n                currentSlideItem.addClass('lg-current');\n            }\n\n            // Do not put load content in set timeout as it needs to load immediately when the gallery is opened\n            if (!this.lGalleryOn) {\n                this.loadContent(index, true);\n            }\n\n            setTimeout(() => {\n                if (this.lGalleryOn) {\n                    this.loadContent(index, true);\n                }\n                if (this.settings.counter) {\n                    this.updateCurrentCounter(index);\n                }\n                // Add title if this.settings.appendSubHtmlTo === lg-sub-html\n                if (this.settings.appendSubHtmlTo === '.lg-sub-html') {\n                    this.addHtml(index);\n                }\n            }, (this.lGalleryOn ? this.settings.speed + 50 : 50) + (fromTouch ? 0 : this.settings.slideDelay));\n\n            setTimeout(() => {\n                this.lgBusy = false;\n                previousSlideItem.removeClass('lg-slide-progress');\n                this.LGel.trigger(lGEvents.afterSlide, {\n                    prevIndex: prevIndex,\n                    index,\n                    fromTouch,\n                    fromThumb,\n                });\n            }, (this.lGalleryOn ? this.settings.speed + 100 : 100) + (fromTouch ? 0 : this.settings.slideDelay));\n        }\n\n        this.index = index;\n    }\n\n    updateCurrentCounter(index: number): void {\n        this.getElementById('lg-counter-current').html(index + 1 + '');\n    }\n\n    updateCounterTotal(): void {\n        this.getElementById('lg-counter-all').html(\n            this.galleryItems.length + '',\n        );\n    }\n\n    touchMove(startCoords: Coords, endCoords: Coords): void {\n        const distanceX = endCoords.pageX - startCoords.pageX;\n        const distanceY = endCoords.pageY - startCoords.pageY;\n        let allowSwipe = false;\n\n        if (this.swipeDirection) {\n            allowSwipe = true;\n        } else {\n            if (Math.abs(distanceX) > 15) {\n                this.swipeDirection = 'horizontal';\n                allowSwipe = true;\n            } else if (Math.abs(distanceY) > 15) {\n                this.swipeDirection = 'vertical';\n                allowSwipe = true;\n            }\n        }\n\n        if (!allowSwipe) {\n            return;\n        }\n\n        const $currentSlide = this.getSlideItem(this.index);\n\n        if (this.swipeDirection === 'horizontal') {\n            // reset opacity and transition duration\n            this.outer.addClass('lg-dragging');\n\n            // move current slide\n            this.setTranslate($currentSlide, distanceX, 0);\n\n            // move next and prev slide with current slide\n            const width = $currentSlide.get().offsetWidth;\n            const slideWidthAmount = (width * 15) / 100;\n            const gutter = slideWidthAmount - Math.abs((distanceX * 10) / 100);\n            this.setTranslate(\n                this.outer.find('.lg-prev-slide').first(),\n                -width + distanceX - gutter,\n                0,\n            );\n\n            this.setTranslate(\n                this.outer.find('.lg-next-slide').first(),\n                width + distanceX + gutter,\n                0,\n            );\n        } else if (this.swipeDirection === 'vertical') {\n            if (this.settings.swipeToClose) {\n                this.$container.addClass('lg-dragging-vertical');\n\n                const opacity = 1 - Math.abs(distanceY) / window.innerHeight;\n                this.$backdrop.css('opacity', opacity);\n\n                const scale = 1 - Math.abs(distanceY) / (window.innerWidth * 2);\n                this.setTranslate($currentSlide, 0, distanceY, scale, scale);\n                this.outer.addClass('lg-hide-items lg-swipe-closing');\n            }\n        }\n    }\n\n    touchEnd(endCoords: Coords, startCoords: Coords, event: any): void {\n        let distance;\n\n        // keep slide animation for any mode while dragg/swipe\n        if (this.settings.mode !== 'lg-slide') {\n            this.outer.addClass('lg-slide');\n        }\n\n        // set transition duration\n        setTimeout(() => {\n            this.$container.removeClass('lg-dragging-vertical');\n            this.outer.removeClass(\n                'lg-dragging lg-hide-items lg-swipe-closing',\n            );\n\n            let triggerClick = true;\n\n            if (this.swipeDirection === 'horizontal') {\n                distance = endCoords.pageX - startCoords.pageX;\n                const distanceAbs = Math.abs(\n                    endCoords.pageX - startCoords.pageX,\n                );\n                if (\n                    distance < 0 &&\n                    distanceAbs > this.settings.swipeThreshold\n                ) {\n                    this.goToNextSlide(true);\n                    triggerClick = false;\n                } else if (\n                    distance > 0 &&\n                    distanceAbs > this.settings.swipeThreshold\n                ) {\n                    this.goToPrevSlide(true);\n                    triggerClick = false;\n                }\n            } else if (this.swipeDirection === 'vertical') {\n                distance = Math.abs(endCoords.pageY - startCoords.pageY);\n                if (\n                    this.settings.closable &&\n                    this.settings.swipeToClose &&\n                    distance > 100\n                ) {\n                    this.closeGallery();\n                    return;\n                } else {\n                    this.$backdrop.css('opacity', 1);\n                }\n            }\n            this.outer.find('.lg-item').removeAttr('style');\n\n            if (\n                triggerClick &&\n                Math.abs(endCoords.pageX - startCoords.pageX) < 5\n            ) {\n                // Trigger click if distance is less than 5 pix\n                const target = $LG(event.target);\n                if (this.isPosterElement(target)) {\n                    this.LGel.trigger(lGEvents.posterClick);\n                }\n            }\n\n            this.swipeDirection = undefined;\n        });\n\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(() => {\n            if (\n                !this.outer.hasClass('lg-dragging') &&\n                this.settings.mode !== 'lg-slide'\n            ) {\n                this.outer.removeClass('lg-slide');\n            }\n        }, this.settings.speed + 100);\n    }\n\n    enableSwipe(): void {\n        let startCoords: Coords = {} as Coords;\n        let endCoords: Coords = {} as Coords;\n        let isMoved = false;\n        let isSwiping = false;\n\n        if (this.settings.enableSwipe) {\n            this.$inner.on('touchstart.lg', (e) => {\n                e.preventDefault();\n                const $item = this.getSlideItem(this.index);\n                if (\n                    ($LG(e.target).hasClass('lg-item') ||\n                        $item.get().contains(e.target)) &&\n                    !this.outer.hasClass('lg-zoomed') &&\n                    !this.lgBusy &&\n                    e.targetTouches.length === 1\n                ) {\n                    isSwiping = true;\n                    this.touchAction = 'swipe';\n                    this.manageSwipeClass();\n                    startCoords = {\n                        pageX: e.targetTouches[0].pageX,\n                        pageY: e.targetTouches[0].pageY,\n                    };\n                }\n            });\n\n            this.$inner.on('touchmove.lg', (e) => {\n                e.preventDefault();\n                if (\n                    isSwiping &&\n                    this.touchAction === 'swipe' &&\n                    e.targetTouches.length === 1\n                ) {\n                    endCoords = {\n                        pageX: e.targetTouches[0].pageX,\n                        pageY: e.targetTouches[0].pageY,\n                    };\n                    this.touchMove(startCoords, endCoords);\n                    isMoved = true;\n                }\n            });\n\n            this.$inner.on('touchend.lg', (event: TouchEvent) => {\n                if (this.touchAction === 'swipe') {\n                    if (isMoved) {\n                        isMoved = false;\n                        this.touchEnd(endCoords, startCoords, event);\n                    } else if (isSwiping) {\n                        const target = $LG(event.target);\n                        if (this.isPosterElement(target)) {\n                            this.LGel.trigger(lGEvents.posterClick);\n                        }\n                    }\n                    this.touchAction = undefined;\n                    isSwiping = false;\n                }\n            });\n        }\n    }\n\n    enableDrag(): void {\n        let startCoords: Coords = {} as Coords;\n        let endCoords: Coords = {} as Coords;\n        let isDraging = false;\n        let isMoved = false;\n        if (this.settings.enableDrag) {\n            this.outer.on('mousedown.lg', (e) => {\n                const $item = this.getSlideItem(this.index);\n                if (\n                    $LG(e.target).hasClass('lg-item') ||\n                    $item.get().contains(e.target)\n                ) {\n                    if (!this.outer.hasClass('lg-zoomed') && !this.lgBusy) {\n                        e.preventDefault();\n                        if (!this.lgBusy) {\n                            this.manageSwipeClass();\n                            startCoords = {\n                                pageX: e.pageX,\n                                pageY: e.pageY,\n                            };\n                            isDraging = true;\n\n                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                            this.outer.get().scrollLeft += 1;\n                            this.outer.get().scrollLeft -= 1;\n\n                            // *\n\n                            this.outer\n                                .removeClass('lg-grab')\n                                .addClass('lg-grabbing');\n\n                            this.LGel.trigger(lGEvents.dragStart);\n                        }\n                    }\n                }\n            });\n\n            $LG(window).on(`mousemove.lg.global${this.lgId}`, (e) => {\n                if (isDraging && this.lgOpened) {\n                    isMoved = true;\n                    endCoords = {\n                        pageX: e.pageX,\n                        pageY: e.pageY,\n                    };\n                    this.touchMove(startCoords, endCoords);\n                    this.LGel.trigger(lGEvents.dragMove);\n                }\n            });\n\n            $LG(window).on(`mouseup.lg.global${this.lgId}`, (event) => {\n                if (!this.lgOpened) {\n                    return;\n                }\n                const target = $LG(event.target);\n                if (isMoved) {\n                    isMoved = false;\n                    this.touchEnd(endCoords, startCoords, event);\n                    this.LGel.trigger(lGEvents.dragEnd);\n                } else if (this.isPosterElement(target)) {\n                    this.LGel.trigger(lGEvents.posterClick);\n                }\n\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    this.outer.removeClass('lg-grabbing').addClass('lg-grab');\n                }\n            });\n        }\n    }\n\n    manageSwipeClass(): void {\n        let _touchNext = this.index + 1;\n        let _touchPrev = this.index - 1;\n        if (this.settings.loop && this.galleryItems.length > 2) {\n            if (this.index === 0) {\n                _touchPrev = this.galleryItems.length - 1;\n            } else if (this.index === this.galleryItems.length - 1) {\n                _touchNext = 0;\n            }\n        }\n\n        this.outer.find('.lg-item').removeClass('lg-next-slide lg-prev-slide');\n        if (_touchPrev > -1) {\n            this.getSlideItem(_touchPrev).addClass('lg-prev-slide');\n        }\n\n        this.getSlideItem(_touchNext).addClass('lg-next-slide');\n    }\n\n    /**\n     * Go to next slide\n     * @param {Boolean} fromTouch - true if slide function called via touch event\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  plugin.goToNextSlide();\n     *\n     */\n    goToNextSlide(fromTouch?: boolean): void {\n        let _loop = this.settings.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n\n        if (!this.lgBusy) {\n            if (this.index + 1 < this.galleryItems.length) {\n                this.index++;\n                this.LGel.trigger(lGEvents.beforeNextSlide, {\n                    index: this.index,\n                });\n                this.slide(this.index, !!fromTouch, false, 'next');\n            } else {\n                if (_loop) {\n                    this.index = 0;\n                    this.LGel.trigger(lGEvents.beforeNextSlide, {\n                        index: this.index,\n                    });\n                    this.slide(this.index, !!fromTouch, false, 'next');\n                } else if (this.settings.slideEndAnimation && !fromTouch) {\n                    this.outer.addClass('lg-right-end');\n                    setTimeout(() => {\n                        this.outer.removeClass('lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    }\n\n    /**\n     * Go to previous slides\n     * @param {Boolean} fromTouch - true if slide function called via touch event\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery({});\n     *  plugin.goToPrevSlide();\n     *\n     */\n    goToPrevSlide(fromTouch?: boolean): void {\n        let _loop = this.settings.loop;\n        if (fromTouch && this.galleryItems.length < 3) {\n            _loop = false;\n        }\n\n        if (!this.lgBusy) {\n            if (this.index > 0) {\n                this.index--;\n                this.LGel.trigger(lGEvents.beforePrevSlide, {\n                    index: this.index,\n                    fromTouch,\n                });\n                this.slide(this.index, !!fromTouch, false, 'prev');\n            } else {\n                if (_loop) {\n                    this.index = this.galleryItems.length - 1;\n                    this.LGel.trigger(lGEvents.beforePrevSlide, {\n                        index: this.index,\n                        fromTouch,\n                    });\n                    this.slide(this.index, !!fromTouch, false, 'prev');\n                } else if (this.settings.slideEndAnimation && !fromTouch) {\n                    this.outer.addClass('lg-left-end');\n                    setTimeout(() => {\n                        this.outer.removeClass('lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    }\n\n    keyPress(): void {\n        $LG(window).on(`keydown.lg.global${this.lgId}`, (e) => {\n            if (\n                this.lgOpened &&\n                this.settings.escKey === true &&\n                e.keyCode === 27\n            ) {\n                e.preventDefault();\n                if (\n                    this.settings.allowMediaOverlap &&\n                    this.outer.hasClass('lg-can-toggle') &&\n                    this.outer.hasClass('lg-thumb-open')\n                ) {\n                    this.outer.removeClass('lg-thumb-open');\n                } else {\n                    this.closeGallery();\n                }\n            }\n            if (this.lgOpened && this.galleryItems.length > 1) {\n                if (e.keyCode === 37) {\n                    e.preventDefault();\n                    this.goToPrevSlide();\n                }\n\n                if (e.keyCode === 39) {\n                    e.preventDefault();\n                    this.goToNextSlide();\n                }\n            }\n        });\n    }\n\n    arrow(): void {\n        this.getElementById('lg-prev').on('click.lg', () => {\n            this.goToPrevSlide();\n        });\n        this.getElementById('lg-next').on('click.lg', () => {\n            this.goToNextSlide();\n        });\n    }\n\n    arrowDisable(index: number): void {\n        // Disable arrows if settings.hideControlOnEnd is true\n        if (!this.settings.loop && this.settings.hideControlOnEnd) {\n            const $prev = this.getElementById('lg-prev');\n            const $next = this.getElementById('lg-next');\n            if (index + 1 < this.galleryItems.length) {\n                $prev.removeAttr('disabled').removeClass('disabled');\n            } else {\n                $prev.attr('disabled', 'disabled').addClass('disabled');\n            }\n\n            if (index > 0) {\n                $next.removeAttr('disabled').removeClass('disabled');\n            } else {\n                $next.attr('disabled', 'disabled').addClass('disabled');\n            }\n        }\n    }\n\n    /**\n     * Get index of the slide from custom slideName. Has to be a public method. Used in hash plugin\n     * @param {String} hash\n     * @returns {Number} Index of the slide.\n     */\n    getIndexFromUrl(hash = window.location.hash): number {\n        const slideName = hash.split('&slide=')[1];\n        let _idx = 0;\n\n        if (this.settings.customSlideName) {\n            for (let index = 0; index < this.galleryItems.length; index++) {\n                const dynamicEl = this.galleryItems[index];\n                if (dynamicEl.slideName === slideName) {\n                    _idx = index;\n                    break;\n                }\n            }\n        } else {\n            _idx = parseInt(slideName, 10);\n        }\n\n        return isNaN(_idx) ? 0 : _idx;\n    }\n\n    setTranslate(\n        $el: lgQuery,\n        xValue: number,\n        yValue: number,\n        scaleX = 1,\n        scaleY = 1,\n    ): void {\n        $el.css(\n            'transform',\n            'translate3d(' +\n                xValue +\n                'px, ' +\n                yValue +\n                'px, 0px) scale3d(' +\n                scaleX +\n                ', ' +\n                scaleY +\n                ', 1)',\n        );\n    }\n\n    mousewheel(): void {\n        this.outer.on('mousewheel.lg', (e) => {\n            if (!e.deltaY) {\n                return;\n            }\n\n            if (e.deltaY > 0) {\n                this.goToPrevSlide();\n            } else {\n                this.goToNextSlide();\n            }\n\n            e.preventDefault();\n        });\n    }\n\n    isSlideElement(target: lgQuery): boolean {\n        return (\n            target.hasClass('lg-outer') ||\n            target.hasClass('lg-item') ||\n            target.hasClass('lg-img-wrap')\n        );\n    }\n\n    isPosterElement(target: lgQuery): boolean {\n        const playButton = this.getSlideItem(this.index)\n            .find('.lg-video-play-button')\n            .get();\n        return (\n            target.hasClass('lg-video-poster') ||\n            target.hasClass('lg-video-play-button') ||\n            (playButton && playButton.contains(target.get()))\n        );\n    }\n\n    toggleMaximize(): void {\n        this.getElementById('lg-maximize').on('click.lg', () => {\n            this.$container.toggleClass('lg-inline');\n            this.refreshOnResize();\n        });\n    }\n\n    manageCloseGallery(): void {\n        if (!this.settings.closable) return;\n        let mousedown = false;\n        this.getElementById('lg-close').on('click.lg', () => {\n            this.closeGallery();\n        });\n\n        if (this.settings.closeOnTap) {\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            this.outer.on('mousedown.lg', (e) => {\n                const target = $LG(e.target);\n                if (this.isSlideElement(target)) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n            });\n\n            this.outer.on('mousemove.lg', () => {\n                mousedown = false;\n            });\n\n            this.outer.on('mouseup.lg', (e) => {\n                const target = $LG(e.target);\n                if (this.isSlideElement(target) && mousedown) {\n                    if (!this.outer.hasClass('lg-dragging')) {\n                        this.closeGallery();\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Close lightGallery.\n     *\n     * Close lightGallery if it is opened\n     *\n     * @description If closable is false in the settings, you need to pass true via closeGallery method to force close gallery\n     * @return returns the estimated time to close gallery completely including the close animation duration\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  plugin.closeGallery();\n     *\n     */\n    closeGallery(force?: boolean): number {\n        if (!this.lgOpened || (!this.settings.closable && !force)) {\n            return 0;\n        }\n        this.LGel.trigger(lGEvents.beforeClose);\n        $LG(window).scrollTop(this.prevScrollTop);\n\n        const currentItem = this.items[this.index];\n        let transform: string | undefined;\n        if (this.zoomFromOrigin && currentItem) {\n            const { top, bottom } = this.mediaContainerPosition;\n            const imageSize = utils.getSize(\n                currentItem,\n                this.$lgContent,\n                top + bottom,\n                this.galleryItems[this.index].__slideVideoInfo &&\n                    this.settings.videoMaxSize,\n            );\n            transform = utils.getTransform(\n                currentItem,\n                this.$lgContent,\n                top,\n                bottom,\n                imageSize,\n            );\n        }\n        if (this.zoomFromOrigin && transform) {\n            this.outer.addClass('lg-closing lg-zoom-from-image');\n            this.getSlideItem(this.index)\n                .addClass('lg-start-end-progress')\n                .css(\n                    'transition-duration',\n                    this.settings.startAnimationDuration + 'ms',\n                )\n                .css('transform', transform);\n        } else {\n            this.outer.addClass('lg-hide-items');\n            // lg-zoom-from-image is used for setting the opacity to 1 if zoomFromOrigin is true\n            // If the closing item doesn't have the lg-size attribute, remove this class to avoid the closing css conflicts\n            this.outer.removeClass('lg-zoom-from-image');\n        }\n\n        // Unbind all events added by lightGallery\n        // @todo\n        //this.$el.off('.lg.tm');\n\n        this.destroyModules();\n\n        this.lGalleryOn = false;\n        this.isDummyImageRemoved = false;\n        this.zoomFromOrigin = this.settings.zoomFromOrigin;\n\n        clearTimeout(this.hideBarTimeout);\n        this.hideBarTimeout = false;\n        $LG(document.body).removeClass('lg-on lg-from-hash');\n\n        this.outer.removeClass('lg-visible');\n\n        // Resetting opacity to 0 isd required as  vertical swipe to close function adds inline opacity.\n        this.$backdrop.removeClass('in').css('opacity', 0);\n\n        const removeTimeout =\n            this.zoomFromOrigin && transform\n                ? Math.max(\n                      this.settings.startAnimationDuration,\n                      this.settings.backdropDuration,\n                  )\n                : this.settings.backdropDuration;\n        this.$container.removeClass('lg-show-in');\n\n        // Once the closign animation is completed and gallery is invisible\n        setTimeout(() => {\n            if (this.zoomFromOrigin && transform) {\n                this.outer.removeClass('lg-zoom-from-image');\n            }\n            this.$container.removeClass('lg-show');\n\n            // Need to remove inline opacity as it is used in the stylesheet as well\n            this.$backdrop\n                .removeAttr('style')\n                .css(\n                    'transition-duration',\n                    this.settings.backdropDuration + 'ms',\n                );\n\n            this.outer.removeClass(`lg-closing ${this.settings.startClass}`);\n\n            this.getSlideItem(this.index).removeClass('lg-start-end-progress');\n            this.$inner.empty();\n            if (this.lgOpened) {\n                this.LGel.trigger(lGEvents.afterClose, {\n                    instance: this,\n                });\n            }\n            this.LGel.get().focus();\n\n            this.lgOpened = false;\n        }, removeTimeout + 100);\n        return removeTimeout + 100;\n    }\n\n    destroyModules(destroy?: true): void {\n        for (const key in this.modules) {\n            if (this.modules[key]) {\n                try {\n                    if (destroy) {\n                        this.modules[key].destroy();\n                    } else {\n                        this.modules[key].closeGallery &&\n                            this.modules[key].closeGallery();\n                    }\n                } catch (err) {\n                    console.warn(\n                        `lightGallery:- make sure lightGallery ${key} module is properly destroyed`,\n                    );\n                }\n            }\n        }\n    }\n\n    /**\n     * Destroy lightGallery.\n     * Destroy lightGallery and its plugin instances completely\n     *\n     * @description This method also calls CloseGallery function internally\n     * @category lGPublicMethods\n     * @example\n     *  const plugin = lightGallery();\n     *  plugin.destroy();\n     *\n     */\n    destroy(): void {\n        const closeTimeout = this.closeGallery(true);\n        setTimeout(() => {\n            this.destroyModules(true);\n            if (!this.settings.dynamic) {\n                for (let index = 0; index < this.items.length; index++) {\n                    const element = this.items[index];\n                    const $element = $LG(element);\n                    $element.off(\n                        `click.lgcustom-item-${$element.attr('data-lg-id')}`,\n                    );\n                }\n            }\n            $LG(window).off(`.lg.global${this.lgId}`);\n            this.LGel.off('.lg');\n            this.$container.remove();\n        }, closeTimeout);\n    }\n}\n\nwindow.lightGallery = function (el, options) {\n    if (!el) {\n        return;\n    }\n    try {\n        return new LightGallery(el, options);\n    } catch (err) {\n        console.error('lightGallery has not initiated properly', err);\n    }\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKA,CAAC;QACG,IAAI,OAAO,MAAM,CAAC,WAAW,KAAK,UAAU;YAAE,OAAO,KAAK,CAAC;QAE3D,SAAS,WAAW,CAAC,KAAa,EAAE,MAAW;YAC3C,MAAM,GAAG,MAAM,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;YACvE,IAAM,GAAG,GAAG,QAAQ,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;YAChD,GAAG,CAAC,eAAe,CACf,KAAK,EACL,MAAM,CAAC,OAAO,EACd,MAAM,CAAC,UAAU,EACjB,MAAM,CAAC,MAAM,CAChB,CAAC;YACF,OAAO,GAAG,CAAC;SACd;QAED,MAAM,CAAC,WAAW,GAAG,WAAkB,CAAC;IAC5C,CAAC,GAAG,CAAC;IACL,CAAC;QACG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE;YAC5B,OAAO,CAAC,SAAS,CAAC,OAAO;gBACpB,OAAO,CAAC,SAAiB,CAAC,iBAAiB;oBAC5C,OAAO,CAAC,SAAS,CAAC,qBAAqB,CAAC;SAC/C;IACL,CAAC,GAAG,CAAC;IACL;QAqBI,iBAAY,QAA0B;YAN9B,sBAAiB,GAAa;gBAClC,oBAAoB;gBACpB,0BAA0B;gBAC1B,WAAW;gBACX,YAAY;aACf,CAAC;YAEE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;YAC5C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACvC,OAAO,IAAI,CAAC;SACf;QAvBM,oBAAY,GAAnB;YACI,OAAO,sCAAsC,CAAC,OAAO,CACjD,OAAO,EACP,UAAU,CAAC;gBACP,IAAM,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,CAAC,EAC9B,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,GAAG,CAAC;gBACvC,OAAO,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;aACzB,CACJ,CAAC;SACL;QAgBO,8BAAY,GAApB,UACI,QAA0B,EAC1B,OAAsC;YAAtC,wBAAA,EAAA,kBAAsC;YAEtC,IAAI,OAAO,QAAQ,KAAK,QAAQ,EAAE;gBAC9B,OAAO,QAAQ,CAAC;aACnB;YACD,OAAO,GAAG,OAAO,IAAI,QAAQ,CAAC;YAC9B,IAAM,EAAE,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACpC,IAAI,EAAE,KAAK,GAAG,EAAE;gBACZ,OAAO,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;aAC1C;iBAAM;gBACH,OAAO,OAAO,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;aAC7C;SACJ;QAEO,uBAAK,GAAb,UACI,IAGS;YAET,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAChB,OAAO,IAAI,CAAC;aACf;YACD,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,EAAE;gBACpC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;aACxC;iBAAM;gBACH,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;aAC1B;YACD,OAAO,IAAI,CAAC;SACf;QAEO,qCAAmB,GAA3B,UACI,EAAO,EACP,WAAmB,EACnB,KAAuB;YAEvB,IAAM,QAAQ,GAAG,WAAW,CAAC,OAAO,CAAC,YAAY,EAAE,UAC/C,CAAC,EACD,MAAM;gBAEN,OAAO,MAAM,CAAC,WAAW,EAAE,CAAC;aAC/B,CAAC,CAAC;YACH,IAAI,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;gBACjD,EAAE,CAAC,KAAK,CACJ,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CACvD,GAAG,KAAK,CAAC;gBACV,EAAE,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC;gBACtC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC;gBACnC,EAAE,CAAC,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC;gBAClC,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC;aACpC;iBAAM;gBACH,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;aAC9B;SACJ;QAEO,6BAAW,GAAnB;YACI,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,EAAE;gBACrD,OAAO,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;aAC3B;iBAAM;gBACH,OAAO,IAAI,CAAC,QAAQ,CAAC;aACxB;SACJ;QAEO,gCAAc,GAAtB,UAAuB,KAAa,EAAE,SAAiB;YACnD,IAAM,cAAc,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5C,OAAO,KAAK;iBACP,KAAK,CAAC,GAAG,CAAC;iBACV,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,GAAA,CAAC;iBAChB,KAAK,CAAC,UAAC,CAAC;gBACL,OAAO,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;aAC3C,CAAC,CAAC;SACV;QAID,sBAAI,GAAJ,UAAK,IAAY,EAAE,KAAiC;YAChD,IAAI,KAAK,KAAK,SAAS,EAAE;gBACrB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;oBACpB,OAAO,EAAE,CAAC;iBACb;gBACD,OAAO,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;aAC/C;YACD,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;aAChC,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAED,sBAAI,GAAJ,UAAK,QAAa;YACd,OAAO,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;SAC1D;QAED,uBAAK,GAAL;YACI,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,EAAE;gBACpC,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;aAChC;iBAAM;gBACH,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC7B;SACJ;QAED,oBAAE,GAAF,UAAG,KAAa;YACZ,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;SACpC;QAED,wBAAM,GAAN;YACI,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;SAC3C;QAED,qBAAG,GAAH;YACI,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;SAC7B;QAED,4BAAU,GAAV,UAAW,UAAkB;YACzB,IAAM,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,KAAK,CAAC,OAAO,CAAC,UAAC,IAAY,IAAK,OAAA,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,GAAA,CAAC,CAAC;aAC7D,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAED,sBAAI,GAAJ,UAAK,SAAiB;YAClB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO,IAAI,CAAC;aACf;YACD,IAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC9C,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;YAC9B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;YACtE,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC5D,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACvC,OAAO,IAAI,CAAC;SACf;QAED,0BAAQ,GAAR,UAAS,UAAe;YAAf,2BAAA,EAAA,eAAe;YACpB,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;;gBAEf,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAC,SAAS;oBACpC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;iBAC/B,CAAC,CAAC;aACN,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAED,6BAAW,GAAX,UAAY,UAAkB;YAC1B,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;;gBAEf,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAC,SAAS;oBACpC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;iBAClC,CAAC,CAAC;aACN,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAED,0BAAQ,GAAR,UAAS,SAAiB;YACtB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO,KAAK,CAAC;aAChB;YACD,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;SAC1D;QACD,8BAAY,GAAZ,UAAa,SAAiB;YAC1B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO,KAAK,CAAC;aAChB;YACD,OAAO,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;SACpD;QACD,6BAAW,GAAX,UAAY,SAAiB;YACzB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO,IAAI,CAAC;aACf;YACD,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE;gBAC1B,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;aAC/B;iBAAM;gBACH,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;aAC5B;YACD,OAAO,IAAI,CAAC;SACf;QAED,qBAAG,GAAH,UAAI,QAAgB,EAAE,KAAuB;YAA7C,iBAKC;YAJG,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,KAAI,CAAC,mBAAmB,CAAC,EAAE,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;aACjD,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;;QAED,oBAAE,GAAF,UAAG,MAAc,EAAE,QAA0B;YAA7C,iBAaC;YAZG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAChB,OAAO,IAAI,CAAC;aACf;YACD,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAC,KAAa;gBACpC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC/C,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;iBACtC;gBACD,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC7C,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;aACjE,CAAC,CAAC;YAEH,OAAO,IAAI,CAAC;SACf;;QAED,sBAAI,GAAJ,UAAK,KAAa,EAAE,QAA0B;YAA9C,iBAMC;YALG,IAAI,CAAC,EAAE,CAAC,KAAK,EAAE;gBACX,KAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAChB,QAAQ,CAAC,KAAK,CAAC,CAAC;aACnB,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,qBAAG,GAAH,UAAI,KAAa;YAAjB,iBAiBC;YAhBG,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAChB,OAAO,IAAI,CAAC;aACf;YACD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAC,SAAS;gBAClD,IAAI,KAAI,CAAC,cAAc,CAAC,KAAK,EAAE,SAAS,CAAC,EAAE;oBACvC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,QAAQ;wBAC/C,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAC7B,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACvB,QAAQ,CACX,CAAC;qBACL,CAAC,CAAC;oBACH,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;iBAC1C;aACJ,CAAC,CAAC;YAEH,OAAO,IAAI,CAAC;SACf;QACD,yBAAO,GAAP,UAAgB,KAAa,EAAE,MAAe;YAC1C,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO,IAAI,CAAC;aACf;YAED,IAAM,WAAW,GAAG,IAAI,WAAW,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gBACrD,MAAM,EAAE,MAAM,IAAI,IAAI;aACzB,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;YAC7C,OAAO,IAAI,CAAC;SACf;;QAGD,sBAAI,GAAJ,UAAK,GAAW;YAAhB,iBAKC;YAJG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;gBAChB,KAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,GAAG,CAAC;aACjC,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAID,sBAAI,GAAJ,UAAK,IAAa;YACd,IAAI,IAAI,KAAK,SAAS,EAAE;gBACpB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;oBACpB,OAAO,EAAE,CAAC;iBACb;gBACD,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;aACtC;YACD,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,wBAAM,GAAN,UAAO,IAA0B;YAC7B,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;oBAC1B,EAAE,CAAC,kBAAkB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;iBAC5C;qBAAM;oBACH,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBACxB;aACJ,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,yBAAO,GAAP,UAAQ,IAAY;YAChB,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,EAAE,CAAC,kBAAkB,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;aAC7C,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,wBAAM,GAAN;YACI,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;aACjC,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QACD,uBAAK,GAAL;YACI,IAAI,CAAC,KAAK,CAAC,UAAC,EAAO;gBACf,EAAE,CAAC,SAAS,GAAG,EAAE,CAAC;aACrB,CAAC,CAAC;YACH,OAAO,IAAI,CAAC;SACf;QAID,2BAAS,GAAT,UAAU,SAAkB;YACxB,IAAI,SAAS,KAAK,SAAS,EAAE;gBACzB,QAAQ,CAAC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;gBACpC,QAAQ,CAAC,eAAe,CAAC,SAAS,GAAG,SAAS,CAAC;gBAC/C,OAAO,IAAI,CAAC;aACf;iBAAM;gBACH,QACI,MAAM,CAAC,WAAW;oBAClB,QAAQ,CAAC,eAAe,CAAC,SAAS;oBAClC,QAAQ,CAAC,IAAI,CAAC,SAAS;oBACvB,CAAC,EACH;aACL;SACJ;QAID,4BAAU,GAAV,UAAW,UAAmB;YAC1B,IAAI,UAAU,KAAK,SAAS,EAAE;gBAC1B,QAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;gBACtC,QAAQ,CAAC,eAAe,CAAC,UAAU,GAAG,UAAU,CAAC;gBACjD,OAAO,IAAI,CAAC;aACf;iBAAM;gBACH,QACI,MAAM,CAAC,WAAW;oBAClB,QAAQ,CAAC,eAAe,CAAC,UAAU;oBACnC,QAAQ,CAAC,IAAI,CAAC,UAAU;oBACxB,CAAC,EACH;aACL;SACJ;QACD,wBAAM,GAAN;YACI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO;oBACH,IAAI,EAAE,CAAC;oBACP,GAAG,EAAE,CAAC;iBACT,CAAC;aACL;YACD,IAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,qBAAqB,EAAE,CAAC;YACvD,IAAM,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC,UAAU,CAAC;;YAGtD,OAAO;gBACH,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,UAAU,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC,UAAU,EAAE;gBAChE,GAAG,EAAE,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS,EAAE;aACnC,CAAC;SACL;QACD,uBAAK,GAAL;YACI,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;gBACpB,OAAO,EAAyB,CAAC;aACpC;YACD,QACI,IAAI,CAAC,YAAY,CAAC,YAAY;gBAC9B,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC,YAAY,CAAC,EAC5C;SACL;;QAED,uBAAK,GAAL;YACI,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YAC3B,QACI,IAAI,CAAC,YAAY,CAAC,WAAW;gBAC7B,UAAU,CAAC,KAAK,CAAC,WAAW,CAAC;gBAC7B,UAAU,CAAC,KAAK,CAAC,YAAY,CAAC,EAChC;SACL;;QAED,wBAAM,GAAN;YACI,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YAC3B,QACI,IAAI,CAAC,YAAY,CAAC,YAAY;gBAC9B,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC;gBAC5B,UAAU,CAAC,KAAK,CAAC,aAAa,CAAC,EACjC;SACL;QArYM,sBAAc,GAA6B,EAAE,CAAC;QAsYzD,cAAC;KAvYD,IAuYC;aAEe,GAAG,CAAC,QAAa;QAC7B,OAAO,IAAI,OAAO,CAAC,QAAQ,CAAC,CAAC;IACjC,CAAC;;;ICpQD,IAAM,qBAAqB,GAAG;QAC1B,KAAK;QACL,SAAS;QACT,SAAS;QACT,YAAY;QACZ,MAAM;QACN,OAAO;QACP,QAAQ;QACR,WAAW;QACX,YAAY;QACZ,QAAQ;QACR,OAAO;QACP,QAAQ;QACR,aAAa;QACb,OAAO;QACP,kBAAkB;QAClB,WAAW;QACX,aAAa;QACb,iBAAiB;QACjB,mBAAmB;QACnB,eAAe;QACf,QAAQ;QACR,kBAAkB;QAClB,WAAW;KACd,CAAC;IAEF;AACA,aAAgB,aAAa,CAAC,IAAY;;QAEtC,IAAI,IAAI,KAAK,MAAM,EAAE;YACjB,OAAO,KAAK,CAAC;SAChB;QACD,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;QACjC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACpD,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAA,CAAC,CAAC;QAE5D,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,IAAM,KAAK,GAAG;;;;QAIV,OAAO,EAAP,UACI,EAAe,EACf,SAAkB,EAClB,OAAW,EACX,aAAsB;YADtB,wBAAA,EAAA,WAAW;YAGX,IAAM,IAAI,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC;YACrB,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,aAAa,CAAC;YAExD,IAAI,CAAC,MAAM,EAAE;gBACT,OAAO;aACV;YAED,IAAM,iBAAiB,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;YAE5C,IAAI,iBAAiB,CAAC,CAAC,CAAC,EAAE;gBACtB,IAAM,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC;gBACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,iBAAiB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC/C,IAAM,MAAI,GAAG,iBAAiB,CAAC,CAAC,CAAC,CAAC;oBAClC,IAAM,eAAe,GAAG,QAAQ,CAAC,MAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;oBACzD,IAAI,eAAe,GAAG,MAAM,EAAE;wBAC1B,MAAM,GAAG,MAAI,CAAC;wBACd,MAAM;qBACT;;oBAGD,IAAI,CAAC,KAAK,iBAAiB,CAAC,MAAM,GAAG,CAAC,EAAE;wBACpC,MAAM,GAAG,MAAI,CAAC;qBACjB;iBACJ;aACJ;YAED,IAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAE/B,IAAM,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YACpC,IAAM,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAErC,IAAM,MAAM,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;YACjC,IAAM,OAAO,GAAG,SAAS,CAAC,MAAM,EAAE,GAAG,OAAO,CAAC;YAE7C,IAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;YACzC,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YAE5C,IAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,KAAK,EAAE,SAAS,GAAG,MAAM,CAAC,CAAC;YAE7D,OAAO,EAAE,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,MAAM,EAAE,MAAM,GAAG,KAAK,EAAE,CAAC;SAC3D;;;;;;QAOD,YAAY,EAAZ,UACI,EAAe,EACf,SAAkB,EAClB,GAAW,EACX,MAAc,EACd,SAAqB;YAErB,IAAI,CAAC,SAAS,EAAE;gBACZ,OAAO;aACV;YACD,IAAM,IAAI,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC;YAEzC,IAAM,aAAa,GAAG,SAAS,CAAC,GAAG,EAAE,CAAC,qBAAqB,EAAE,CAAC;YAE9D,IAAM,MAAM,GAAG,aAAa,CAAC,KAAK,CAAC;;YAGnC,IAAM,OAAO,GAAG,SAAS,CAAC,MAAM,EAAE,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC;YAEpD,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YAC7B,IAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;YAE/B,IAAM,OAAO,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YAC7B,IAAI,CAAC,GACD,CAAC,MAAM,GAAG,OAAO,IAAI,CAAC;gBACtB,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI;iBACjB,UAAU,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBACrC,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;gBACrC,GAAG,CAAC,MAAM,CAAC,CAAC,UAAU,EAAE;gBACxB,aAAa,CAAC,IAAI,CAAC;YACvB,IAAI,CAAC,GACD,CAAC,OAAO,GAAG,QAAQ,IAAI,CAAC;gBACxB,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG;iBAChB,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;iBACpC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;gBACpC,GAAG,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE;gBACvB,GAAG,CAAC;YAER,IAAM,GAAG,GAAG,OAAO,GAAG,SAAS,CAAC,KAAK,CAAC;YACtC,IAAM,GAAG,GAAG,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC;YAExC,IAAM,SAAS,GACX,cAAc;iBACb,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,MAAM;iBACL,CAAC,IAAI,CAAC,CAAC,CAAC;gBACT,iBAAiB;gBACjB,GAAG;gBACH,IAAI;gBACJ,GAAG;gBACH,MAAM,CAAC;YACX,OAAO,SAAS,CAAC;SACpB;QAED,eAAe,EAAf,UACI,GAAW,EACX,WAAmB,EACnB,YAAoB,EACpB,WAAoB;YAEpB,IAAM,KAAK,GAAG,WAAW,GAAG,SAAS,GAAG,WAAW,GAAG,GAAG,GAAG,EAAE,CAAC;YAC/D,OAAO,8DAAyD,WAAW,kBAAa,YAAY,+EAC5C,KAAK,eAAS,GAAG,mEAC1D,CAAC;SACnB;QAED,YAAY,EAAZ,UACI,KAAa,EACb,GAAW,EACX,OAAe,EACf,MAAc,EACd,KAAa,EACb,OAAwB;YAExB,IAAM,UAAU,GAAG,MAAM,GAAG,YAAU,MAAQ,GAAG,EAAE,CAAC;YACpD,IAAM,SAAS,GAAG,KAAK,GAAG,WAAS,KAAO,GAAG,EAAE,CAAC;YAChD,IAAM,SAAS,GAAG,UAAQ,OAAO,SAAI,UAAU,UAAK,SAAS,mDAA2C,KAAK,iBAAU,GAAG,UAAM,CAAC;YACjI,IAAI,SAAS,GAAG,EAAE,CAAC;YACnB,IAAI,OAAO,EAAE;gBACT,IAAM,SAAS,GACX,OAAO,OAAO,KAAK,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC;gBAEhE,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,UAAC,MAAW;oBAClC,IAAI,KAAK,GAAG,EAAE,CAAC;oBACf,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG;;wBAE5B,KAAK,IAAI,MAAI,GAAG,WAAK,MAAM,CAAC,GAAG,CAAC,OAAG,CAAC;qBACvC,CAAC,CAAC;oBACH,OAAO,aAAW,KAAK,eAAY,CAAC;iBACvC,CAAC,CAAC;aACN;YACD,OAAO,KAAG,SAAS,GAAG,SAAW,CAAC;SACrC;;QAGD,gBAAgB,EAAhB,UAAiB,OAAiB;YAC9B,IAAM,OAAO,GAAG,EAAE,CAAC;YACnB,IAAM,KAAK,GAAG,EAAE,CAAC;YACjB,IAAI,GAAG,GAAG,EAAE,CAAC;YACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACrC,IAAM,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;;gBAGnC,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE;oBAChB,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBACrB;gBAED,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACzB;YAED,IAAM,MAAM,GAAG,MAAM,CAAC,UAAU,CAAC;YACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACrC,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,MAAM,EAAE;oBACnC,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;oBACf,MAAM;iBACT;aACJ;YACD,OAAO,GAAG,CAAC;SACd;QAED,aAAa,EAAb,UAAc,GAAqB;YAC/B,IAAI,CAAC,GAAG;gBAAE,OAAO,KAAK,CAAC;;;;YAIvB,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;gBACf,OAAO,KAAK,CAAC;aAChB;;;;YAKD,IAAI,GAAG,CAAC,YAAY,KAAK,CAAC,EAAE;gBACxB,OAAO,KAAK,CAAC;aAChB;;YAGD,OAAO,IAAI,CAAC;SACf;QAED,oBAAoB,EAApB,UACI,OAAe,EACf,QAAgB,EAChB,cAAsB,EACtB,QAAoB;YAEpB,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,IAAI,QAAQ,IAAI,QAAQ,CAAC,OAAO,EAAE;gBAC9B,UAAU,GAAG,gBAAgB,CAAC;aACjC;iBAAM,IAAI,QAAQ,IAAI,QAAQ,CAAC,KAAK,EAAE;gBACnC,UAAU,GAAG,cAAc,CAAC;aAC/B;iBAAM;gBACH,UAAU,GAAG,cAAc,CAAC;aAC/B;YAED,OAAO,gCAA6B,UAAU,mBAAY,cAAc,47BAmBlE,QAAQ,IAAI,EAAE,sEAC8B,OAAO,0BAClD,CAAC;SACX;;;;;;;;QASD,iBAAiB,EAAjB,UACI,KAAU,EACV,UAAoB,EACpB,wBAAiC,EACjC,YAAoB;YAEpB,IAAM,eAAe,GAAkB,EAAE,CAAC;YAC1C,IAAM,uBAAuB,kBACtB,qBAAqB,EACrB,UAAU,CAChB,CAAC;YACF,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,UAAC,IAAiB;gBACrC,IAAM,SAAS,GAAgB,EAAiB,CAAC;gBACjD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC7C,IAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;oBAChC,IAAI,IAAI,CAAC,SAAS,EAAE;wBAChB,IAAM,WAAW,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;wBAC7C,IAAI,KAAK,GAAG,EAAE,CAAC;wBACf,IAAI,uBAAuB,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,EAAE;4BACnD,KAAK,GAAG,WAAW,CAAC;yBACvB;wBACD,IAAI,KAAK,EAAE;4BACN,SAAiB,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;yBAC1C;qBACJ;iBACJ;gBACD,IAAM,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;gBAC9B,IAAM,GAAG,GAAG,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACxD,IAAM,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAExC,IAAM,KAAK,GAAG,YAAY;sBACpB,WAAW,CAAC,IAAI,CAAC,YAAY,CAAC;sBAC9B,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAClD,SAAS,CAAC,KAAK,GAAG,KAAK,CAAC;gBAExB,IAAI,wBAAwB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;oBAChD,SAAS,CAAC,OAAO,GAAG,KAAK,IAAI,GAAG,IAAI,EAAE,CAAC;iBAC1C;gBACD,SAAS,CAAC,GAAG,GAAG,GAAG,IAAI,KAAK,IAAI,EAAE,CAAC;gBACnC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACnC,CAAC,CAAC;YACH,OAAO,eAAe,CAAC;SAC1B;QACD,QAAQ,EAAR;YACI,IAAI,QAAQ,GAAG,KAAK,CAAC;YACrB,CAAC,UAAU,CAAC;gBACR,IACI,qVAAqV,CAAC,IAAI,CACtV,CAAC,CACJ;oBACD,ykDAAykD,CAAC,IAAI,CAC1kD,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CACjB;oBAED,QAAQ,GAAG,IAAI,CAAC;aACvB,EAAE,SAAS,CAAC,SAAS,IAAI,SAAS,CAAC,MAAM,IAAK,MAAc,CAAC,KAAK,CAAC,CAAC;YACrE,OAAO,QAAQ,CAAC;SACnB;KACJ,CAAC;AAEF;;ICnEO,IAAM,oBAAoB,GAAyB;QACtD,IAAI,EAAE,UAAU;QAChB,MAAM,EAAE,MAAM;QACd,KAAK,EAAE,GAAG;QACV,MAAM,EAAE,MAAM;QACd,KAAK,EAAE,MAAM;QACb,QAAQ,EAAE,EAAE;QACZ,UAAU,EAAE,eAAe;QAC3B,gBAAgB,EAAE,GAAG;QACrB,SAAS,EAAE,QAAQ,CAAC,IAAI;QACxB,sBAAsB,EAAE,GAAG;QAC3B,cAAc,EAAE,IAAI;QACpB,aAAa,EAAE,CAAC;QAChB,aAAa,EAAE,KAAK;QACpB,UAAU,EAAE,CAAC;QACb,oBAAoB,EAAE,IAAI;QAC1B,WAAW,EAAE,KAAK;QAClB,iBAAiB,EAAE,KAAK;QACxB,YAAY,EAAE,UAAU;QACxB,oBAAoB,EAAE,CAAC;QACvB,cAAc,EAAE,EAAE;QAClB,eAAe,EAAE,EAAE;QACnB,QAAQ,EAAE,IAAI;QACd,YAAY,EAAE,IAAI;QAClB,UAAU,EAAE,IAAI;QAChB,aAAa,EAAE,IAAI;QACnB,gBAAgB,EAAE,KAAK;QACvB,IAAI,EAAE,IAAI;QACV,MAAM,EAAE,IAAI;QACZ,QAAQ,EAAE,IAAI;QACd,QAAQ,EAAE,IAAI;QACd,iBAAiB,EAAE,IAAI;QACvB,gBAAgB,EAAE,KAAK;QACvB,UAAU,EAAE,KAAK;QACjB,wBAAwB,EAAE,IAAI;QAC9B,eAAe,EAAE,cAAc;QAC/B,uBAAuB,EAAE,KAAK;QAC9B,OAAO,EAAE,CAAC;QACV,uBAAuB,EAAE,EAAE;QAC3B,aAAa,EAAE,IAAI;QACnB,QAAQ,EAAE,EAAE;QACZ,YAAY,EAAE,EAAE;QAChB,QAAQ,EAAE,EAAE;QACZ,QAAQ,EAAE,EAAE;QACZ,KAAK,EAAE,CAAC;QACR,WAAW,EAAE,MAAM;QACnB,YAAY,EAAE,MAAM;QACpB,QAAQ,EAAE,IAAI;QACd,OAAO,EAAE,IAAI;QACb,eAAe,EAAE,aAAa;QAC9B,cAAc,EAAE,EAAE;QAClB,WAAW,EAAE,IAAI;QACjB,UAAU,EAAE,IAAI;QAChB,OAAO,EAAE,KAAK;QACd,SAAS,EAAE,EAAE;QACb,UAAU,EAAE,EAAE;QACd,SAAS,EAAE,CAAC;QACZ,eAAe,EAAE,KAAK;QACtB,YAAY,EAAE,EAAE;QAChB,QAAQ,EAAE,SAAS;QACnB,cAAc,EAAE;YACZ,QAAQ,EAAE,KAAK;YACf,aAAa,EAAE,KAAK;SACL;KACtB,CAAC;;;ICrfF;;;;;AAKA,IAAO,IAAM,QAAQ,GAAG;QACpB,gBAAgB,EAAE,qBAAqB;QACvC,IAAI,EAAE,SAAS;QACf,QAAQ,EAAE,aAAa;QACvB,eAAe,EAAE,oBAAoB;QACrC,YAAY,EAAE,iBAAiB;QAC/B,kBAAkB,EAAE,uBAAuB;QAC3C,UAAU,EAAE,eAAe;QAC3B,SAAS,EAAE,cAAc;QACzB,aAAa,EAAE,kBAAkB;QACjC,WAAW,EAAE,gBAAgB;QAC7B,UAAU,EAAE,eAAe;QAC3B,WAAW,EAAE,gBAAgB;QAC7B,SAAS,EAAE,cAAc;QACzB,QAAQ,EAAE,aAAa;QACvB,OAAO,EAAE,YAAY;QACrB,eAAe,EAAE,oBAAoB;QACrC,eAAe,EAAE,oBAAoB;QACrC,WAAW,EAAE,gBAAgB;QAC7B,UAAU,EAAE,eAAe;KAC9B,CAAC;;;IChBF,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC;IAGjB;IACA;IAEA;IACA,IAAI,IAAI,GAAG,CAAC,CAAC;IACb,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,IAAI,EAAE,CAAC;AAE1C;QA2DI,sBACI,OAAoB,EACpB,OAA2C;YAA3C,wBAAA,EAAA,YAA2C;YApDxC,aAAQ,GAAG,KAAK,CAAC;YAEjB,UAAK,GAAG,CAAC,CAAC;;YAGV,YAAO,GAAQ,EAAE,CAAC;;YAGlB,eAAU,GAAG,KAAK,CAAC;;YAGnB,WAAM,GAAG,KAAK,CAAC;YAWf,sBAAiB,GAAa,EAAE,CAAC;;YAehC,kBAAa,GAAG,CAAC,CAAC;YAMlB,wBAAmB,GAAG,KAAK,CAAC;YAE5B,2BAAsB,GAAG;gBAC7B,GAAG,EAAE,CAAC;gBACN,MAAM,EAAE,CAAC;aACZ,CAAC;YAME,IAAI,EAAE,CAAC;YACP,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YAEjB,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC;YAClB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;;YAGzB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,oBAAoB,EAAE,OAAO,CAAC,CAAC;YACjE,IACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,OAAO,IAAI,CAAC,QAAQ,CAAC,QAAQ;kBACjD,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;kBACxB,KAAK,CAAC,QAAQ,EAAE,EACxB;gBACE,IAAM,cAAc,GAAG,MAAM,CAAC,MAAM,CAChC,EAAE,EACF,IAAI,CAAC,QAAQ,CAAC,cAAc,EAC5B,OAAO,CAAC,cAAc,CACzB,CAAC;gBACF,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;aAChE;;YAGD,IACI,IAAI,CAAC,QAAQ,CAAC,OAAO;gBACrB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,SAAS;gBACrC,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EACzC;gBACE,MAAM,sEAAsE,CAAC;aAChF;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE;gBACjC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC;aAC1C;YACD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBACzB,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,KAAK,CAAC;aACtC;;;YAID,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;;YAGnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;;;YAIpC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;gBACvB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;aAC/B;;YAGD,IAAI,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAC5B,IAAI,CAAC,QAAQ,CAAC,OAAO,EACrB,IAAI,CAAC,YAAY,CAAC,MAAM,CAC3B,CAAC;YAEF,IAAI,CAAC,IAAI,EAAE,CAAC;YAEZ,OAAO,IAAI,CAAC;SACf;QAED,2BAAI,GAAJ;YAAA,iBAgDC;YA/CG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YAC1C,IAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAEtC,IAAI,gBAAgB,GAAG,CAAC,CAAC;YAEzB,IAAI,CAAC,QAAQ,EAAE;gBACX,gBAAgB,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;aAC5C;YAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE;gBAC7B,QAAQ,EAAE,IAAI;aACjB,CAAC,CAAC;YAEH,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBACxB,IAAI,CAAC,QAAQ,EAAE,CAAC;aACnB;YAED,UAAU,CAAC;gBACP,KAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,KAAI,CAAC,WAAW,EAAE,CAAC;aACtB,EAAE,EAAE,CAAC,CAAC;YAEP,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC9B,IAAI,CAAC,KAAK,EAAE,CAAC;gBAEb,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;oBAC1B,IAAI,CAAC,UAAU,EAAE,CAAC;iBACrB;aACJ;YAED,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;wCAEf,KAAK;oBACV,IAAM,OAAO,GAAG,OAAK,KAAK,CAAC,KAAK,CAAC,CAAC;oBAClC,IAAM,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;;;oBAG9B,IAAM,IAAI,GAAG,OAAO,CAAC,YAAY,EAAE,CAAC;oBACpC,QAAQ;yBACH,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC;yBACxB,EAAE,CAAC,yBAAuB,IAAM,EAAE,UAAC,CAAC;wBACjC,CAAC,CAAC,cAAc,EAAE,CAAC;wBACnB,IAAM,gBAAgB,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,IAAI,KAAK,CAAC;wBACtD,KAAI,CAAC,WAAW,CAAC,gBAAgB,EAAE,OAAO,CAAC,CAAC;qBAC/C,CAAC,CAAC;;;;gBAZX,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE;4BAA7C,KAAK;iBAab;aACJ;SACJ;;;;;;;QAQD,mCAAY,GAAZ;YAAA,iBAYC;YAXG,IAAI,eAAe,GAAG,CAAC,CAAC;oCACb,GAAG;gBACV,eAAe,EAAE,CAAC;gBAClB,CAAC,UAAC,GAAG;oBACD,UAAU,CAAC;wBACP,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAI,CAAC,CAAC;qBACvD,EAAE,EAAE,GAAG,GAAG,CAAC,CAAC;iBAChB,EAAE,eAAe,CAAC,CAAC;;YANxB,KAAK,IAAM,GAAG,IAAI,MAAM,CAAC,SAAS;wBAAvB,GAAG;aAOb;YAED,OAAO,eAAe,GAAG,EAAE,CAAC;SAC/B;QAED,mCAAY,GAAZ,UAAa,KAAa;YACtB,OAAO,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;SAC1C;QAED,qCAAc,GAAd,UAAe,KAAa;YACxB,OAAO,cAAY,IAAI,CAAC,IAAI,SAAI,KAAO,CAAC;SAC3C;QAED,gCAAS,GAAT,UAAU,EAAU;YAChB,OAAU,EAAE,SAAI,IAAI,CAAC,IAAM,CAAC;SAC/B;QACD,qCAAc,GAAd,UAAe,EAAU;YACrB,OAAO,GAAG,CAAC,MAAI,IAAI,CAAC,SAAS,CAAC,EAAE,CAAG,CAAC,CAAC;SACxC;QAED,qCAAc,GAAd;YAAA,iBAgJC;YA/IG,IAAM,SAAS,GAAG,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;YAC3D,IAAI,SAAS,EAAE;gBACX,OAAO,CAAC,CAAC;aACZ;YACD,IAAI,QAAQ,GAAG,EAAE,CAAC;YAClB,IAAI,WAAW,GAAG,EAAE,CAAC;;YAGrB,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxD,QAAQ,GAAG,kCAA6B,IAAI,CAAC,SAAS,CAClD,SAAS,CACZ,oEACG,IAAI,CAAC,QAAQ,CAAC,QAAQ,iEAEM,IAAI,CAAC,SAAS,CACtC,SAAS,CACZ,gEACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,eACd,CAAC;aAChB;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,KAAK,cAAc,EAAE;gBAClD,WAAW;oBACP,kEAAkE,CAAC;aAC1E;YAED,IAAI,UAAU,GAAG,EAAE,CAAC;YAEpB,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;;gBAE3B,UAAU,IAAI,mBAAmB,CAAC;aACrC;YAED,IAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc;kBAC7C,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,GAAG;kBACxD,EAAE,CAAC;YACT,IAAM,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe;kBAC/C,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,GAAG;kBAC1D,EAAE,CAAC;YAET,IAAM,kBAAkB,GAAG,kBAAgB,IAAI,CAAC,QAAQ,CAAC,QAAQ,UAC7D,QAAQ,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,WAAW,GAAG,EAAE,CAC9D,CAAC;YACH,IAAM,SAAS,GACX,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa;kBAC/C,+DAAwD,IAAI,CAAC,SAAS,CAClE,UAAU,CACb,4CAAsC;kBACvC,EAAE,CAAC;YACb,IAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB;kBAC7C,iEAA0D,IAAI,CAAC,SAAS,CACpE,aAAa,CAChB,+CAAyC;kBAC1C,EAAE,CAAC;YACT,IAAM,QAAQ,GAAG,4BACH,kBAAkB,gBAAS,IAAI,CAAC,SAAS,CACnD,cAAc,CACjB,+CAAqC,cAAc,SAAI,eAAe,2DAExD,IAAI,CAAC,SAAS,CACrB,aAAa,CAChB,iEAEU,IAAI,CAAC,SAAS,CACrB,UAAU,CACb,0CAAmC,UAAU,2CAC3B,IAAI,CAAC,SAAS,CACrB,YAAY,CACf,uCACT,IAAI,CAAC,QAAQ,CAAC,KAAK,iBACX,IAAI,CAAC,QAAQ,CAAC,MAAM,+CACL,IAAI,CAAC,SAAS,CACrB,UAAU,CACb,wEACU,IAAI,CAAC,SAAS,CACrB,YAAY,CACf,mEACC,YAAY,kCACZ,SAAS,0DAEb,QAAQ,8BACR,WAAW,4EAIxB,CAAC;YAEF,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;iBACvB,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC;iBAC3B,MAAM,CAAC,QAAQ,CAAC,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YACpD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC;YACpD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;YACtD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAElD,IAAI,CAAC,SAAS,CAAC,GAAG,CACd,qBAAqB,EACrB,IAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,IAAI,CACxC,CAAC;YAEF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;;YAGnC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAE/B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAExC,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC1D,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;aAClC;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;gBAC7B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC;aAC7C;YAED,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,4BAA4B,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACpE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;YAEnE,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBACxB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAChB,aAAU,IAAI,CAAC,SAAS,CACpB,aAAa,CAChB,6FAAmF,CACvF,CAAC;aACL;YAED,IAAI,CAAC,OAAO,EAAE,CAAC;YAEf,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CACV,qBAAmB,IAAI,CAAC,IAAI,oCAA+B,IAAI,CAAC,IAAM,EACtE;gBACI,KAAI,CAAC,eAAe,EAAE,CAAC;aAC1B,CACJ,CAAC;YAEF,IAAI,CAAC,QAAQ,EAAE,CAAC;YAEhB,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,OAAO,IAAI,CAAC,YAAY,EAAE,CAAC;SAC9B;QAED,sCAAe,GAAf;YACI,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACf,IAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACzD,IAAM,SAAS,GAAG,kBAAkB,CAAC,gBAAgB,CAAC;gBAEhD,IAAA,KAAkB,IAAI,CAAC,yBAAyB,EAAE,EAAhD,KAAG,SAAA,EAAE,MAAM,YAAqC,CAAC;gBACzD,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,OAAO,CACjC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EACtB,IAAI,CAAC,UAAU,EACf,KAAG,GAAG,MAAM,EACZ,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAC1C,CAAC;gBACF,IAAI,SAAS,EAAE;oBACX,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;iBAC5D;gBACD,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;oBAClD,IAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;oBAC/D,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,2BAA2B,CAAC;yBACjC,KAAK,EAAE;yBACP,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;iBAChC;gBACD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;aAC/C;SACJ;QAED,uCAAgB,GAAhB,UAAiB,KAAa,EAAE,SAAqB;YACjD,IAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;YACvD,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YAC9C,YAAY,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;SACnE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA2CD,mCAAY,GAAZ,UAAa,KAAoB,EAAE,KAAa;YAC5C,IAAI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;aACjC;YACD,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;gBACpB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;aAClB;YACD,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;gBACf,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,OAAO;aACV;YACD,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC;YAChD,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;YACpB,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;YAE5B,IAAI,MAAM,GAAG,CAAC,CAAC;;YAEf,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAC,WAAW,EAAE,SAAS;gBAC1C,IAAI,WAAW,CAAC,GAAG,KAAK,UAAU,EAAE;oBAChC,MAAM,GAAG,SAAS,CAAC;oBACnB,OAAO,IAAI,CAAC;iBACf;gBACD,OAAO,KAAK,CAAC;aAChB,CAAC,CAAC;YAEH,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;YAC7D,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC/B,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;YAEjD,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YACpB,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;YAClC,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;SAC5C;;QAGD,+BAAQ,GAAR;;YAEI,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;YAChB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;gBACxB,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,KAAK,MAAM,EAAE;oBACnC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAC5B;qBAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;oBAC/B,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;wBAC5B,IAAM,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;wBACrD,IAAI,CAAC,KAAK,GAAG,YAAY;6BACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;6BAC5B,GAAG,EAAE,CAAC;qBACd;yBAAM;wBACH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,gBAAgB,CACjC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CACzB,CAAC;qBACL;iBACJ;qBAAM;oBACH,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC;iBACjC;gBACD,OAAO,KAAK,CAAC,iBAAiB,CAC1B,IAAI,CAAC,KAAK,EACV,IAAI,CAAC,QAAQ,CAAC,UAAU,EACxB,IAAI,CAAC,QAAQ,CAAC,wBAAwB,EACtC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAC7B,CAAC;aACL;iBAAM;gBACH,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,IAAI,EAAE,CAAC;aACxC;SACJ;;;;;;;QAQD,kCAAW,GAAX,UAAY,KAA2B,EAAE,OAAqB;YAA9D,iBAuGC;YAvGW,sBAAA,EAAA,QAAQ,IAAI,CAAC,QAAQ,CAAC,KAAK;;YAEnC,IAAI,IAAI,CAAC,QAAQ;gBAAE,OAAO;YAE1B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACrB,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;YACzB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;;YAGxC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAEpC,IAAM,sBAAsB,GAAG,IAAI,CAAC,yBAAyB,CACzD,KAAK,EACL,KAAK,CACR,CAAC;YACF,IAAI,CAAC,iBAAiB,GAAG,sBAAsB,CAAC;YAEhD,IAAI,KAAK,GAAG,EAAE,CAAC;YACf,sBAAsB,CAAC,OAAO,CAAC,UAAC,IAAI;gBAChC,KAAK,GAAG,KAAK,IAAG,eAAY,IAAI,gCAA0B,CAAA,CAAC;aAC9D,CAAC,CAAC;YAEH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAC1B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACpB,IAAI,SAAS,GAAuB,EAAE,CAAC;YACvC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;YACzD,IAAA,KAAkB,IAAI,CAAC,sBAAsB,EAA3C,GAAG,SAAA,EAAE,MAAM,YAAgC,CAAC;YACpD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE;gBAClC,IAAI,CAAC,yBAAyB,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;aAC/C;YACD,IAAI,IAAI,CAAC,cAAc,IAAI,OAAO,EAAE;gBAChC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,OAAO,CACjC,OAAO,EACP,IAAI,CAAC,UAAU,EACf,GAAG,GAAG,MAAM,EACZ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,gBAAgB;oBAC1C,IAAI,CAAC,QAAQ,CAAC,YAAY,CACjC,CAAC;gBACF,SAAS,GAAG,KAAK,CAAC,YAAY,CAC1B,OAAO,EACP,IAAI,CAAC,UAAU,EACf,GAAG,EACH,MAAM,EACN,IAAI,CAAC,gBAAgB,CACxB,CAAC;aACL;YACD,IAAI,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,SAAS,EAAE;gBACpC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;gBAC9C,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;aACvD;YACD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;;YAGvC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;YAEhD,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;;YAEnB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,CAAC;YAE7C,UAAU,CAAC;;;gBAIP,IAAI,KAAI,CAAC,cAAc,IAAI,SAAS,EAAE;oBAClC,IAAM,cAAY,GAAG,KAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;oBAC9C,cAAY,CAAC,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;oBACzC,UAAU,CAAC;wBACP,cAAY;6BACP,QAAQ,CAAC,yCAAyC,CAAC;6BACnD,GAAG,CACA,qBAAqB,EACrB,KAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,IAAI,CAC9C,CAAC;wBACN,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC;qBAC7C,CAAC,CAAC;oBACH,UAAU,CAAC;wBACP,cAAY,CAAC,GAAG,CACZ,WAAW,EACX,2CAA2C,CAC9C,CAAC;qBACL,EAAE,GAAG,CAAC,CAAC;iBACX;gBAED,UAAU,CAAC;oBACP,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;oBAC9B,KAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;iBAC1C,EAAE,EAAE,CAAC,CAAC;;gBAGP,IAAI,CAAC,KAAI,CAAC,cAAc,IAAI,CAAC,SAAS,EAAE;oBACpC,UAAU,CAAC;wBACP,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;qBACrC,EAAE,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;iBACtC;;gBAGD,KAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;gBAEvC,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;aACzC,CAAC,CAAC;YAEH,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;SACxC;;;;;;;QAQO,gDAAyB,GAAjC;YACI,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE;gBACjC,OAAO;oBACH,GAAG,EAAE,CAAC;oBACN,MAAM,EAAE,CAAC;iBACZ,CAAC;aACL;YACD,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,YAAY,IAAI,CAAC,CAAC;YAClD,IAAM,aAAa,GACf,IAAI,CAAC,QAAQ,CAAC,oBAAoB;gBAClC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC;YACvD,IAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,EAAE,CAAC;YAChE,IAAM,WAAW,GAAG,cAAc,GAAG,cAAc,CAAC,YAAY,GAAG,CAAC,CAAC;YACrE,IAAM,MAAM,GAAG,WAAW,GAAG,aAAa,CAAC;YAC3C,OAAO;gBACH,GAAG,KAAA;gBACH,MAAM,QAAA;aACT,CAAC;SACL;QAEO,gDAAyB,GAAjC,UAAkC,GAAO,EAAE,MAAU;YAAnB,oBAAA,EAAA,OAAO;YAAE,uBAAA,EAAA,UAAU;YACjD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,GAAG,IAAI,CAAC,CAAC;SACnE;;QAGD,oCAAa,GAAb;YAAA,iBAiBC;;YAfG,IAAM,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;YACnC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;;gBAEpD,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;gBAC5C,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;gBAE5B,IAAM,OAAK,GAAG,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBAE1C,IAAM,gBAAgB,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;gBAE/C,UAAU,CAAC;oBACP,KAAI,CAAC,WAAW,CAAC,OAAK,CAAC,CAAC;iBAC3B,EAAE,gBAAgB,CAAC,CAAC;gBACrB,OAAO,IAAI,CAAC;aACf;SACJ;QAED,+BAAQ,GAAR;YAAA,iBAkBC;;YAhBG,UAAU,CAAC;gBACP,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;gBACxC,IAAI,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,CAAC,EAAE;oBACjC,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,qCAAqC,EAAE;wBACjD,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;wBAExC,YAAY,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;;wBAGlC,KAAI,CAAC,cAAc,GAAG,UAAU,CAAC;4BAC7B,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;yBACxC,EAAE,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;qBACnC,CAAC,CAAC;oBACH,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;iBACtC;aACJ,EAAE,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;SACnC;QAED,sCAAe,GAAf,UAAgB,IAAa;YACzB,IAAI,IAAI,CAAC,QAAQ,CAAC,oBAAoB,EAAE;gBACpC,IAAI;oBACA,WAAW,CAAC;wBACR,QAAQ,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;qBACzB,CAAC,CAAC;iBACN;gBAAC,OAAO,CAAC,EAAE;oBACR,OAAO,CAAC,IAAI,CACR,oJAAoJ,CACvJ,CAAC;iBACL;aACJ;SACJ;;;;;QAMD,8BAAO,GAAP;YACI,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;gBACvB,IAAM,WAAW,GAAG,iGACJ,IAAI,CAAC,SAAS,CACtB,oBAAoB,CACvB,yCAAgC,IAAI,CAAC,KAAK,GAAG,CAAC,iDACnC,IAAI,CAAC,SAAS,CACtB,gBAAgB,CACnB,oCACD,IAAI,CAAC,YAAY,CAAC,MAAM,mBACZ,CAAC;gBACjB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;aACtE;SACJ;;;;;QAMD,8BAAO,GAAP,UAAQ,KAAa;YACjB,IAAI,OAAO,CAAC;YACZ,IAAI,UAAU,CAAC;YACf,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,UAAU,EAAE;gBACrC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC;aACpD;iBAAM;gBACH,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;aAC9C;YAED,IAAI,CAAC,UAAU,EAAE;gBACb,IAAI,OAAO,EAAE;;;oBAGT,IAAM,EAAE,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;oBACnC,IAAI,EAAE,KAAK,GAAG,IAAI,EAAE,KAAK,GAAG,EAAE;wBAC1B,IACI,IAAI,CAAC,QAAQ,CAAC,uBAAuB;4BACrC,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EACxB;4BACE,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;iCACpB,EAAE,CAAC,KAAK,CAAC;iCACT,IAAI,CAAC,OAAO,CAAC;iCACb,KAAK,EAAE;iCACP,IAAI,EAAE,CAAC;yBACf;6BAAM;4BACH,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,EAAE,CAAC;yBACzC;qBACJ;iBACJ;qBAAM;oBACH,OAAO,GAAG,EAAE,CAAC;iBAChB;aACJ;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,KAAK,cAAc,EAAE;gBAClD,IAAI,UAAU,EAAE;oBACZ,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACpD;qBAAM;oBACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,OAAiB,CAAC,CAAC;iBAC3D;aACJ;iBAAM;gBACH,IAAM,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;gBACrD,IAAI,UAAU,EAAE;oBACZ,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACjC;qBAAM;oBACH,YAAY,CAAC,MAAM,CACf,gCAA4B,OAAO,WAAQ,CAC9C,CAAC;iBACL;aACJ;;YAGD,IAAI,OAAO,OAAO,KAAK,WAAW,IAAI,OAAO,KAAK,IAAI,EAAE;gBACpD,IAAI,OAAO,KAAK,EAAE,EAAE;oBAChB,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;yBACnC,QAAQ,CAAC,eAAe,CAAC,CAAC;iBAClC;qBAAM;oBACH,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC;yBACnC,WAAW,CAAC,eAAe,CAAC,CAAC;iBACrC;aACJ;YAED,IAAI,CAAC,IAAI,CAAC,OAAO,CACb,QAAQ,CAAC,kBAAkB,EAC3B;gBACI,KAAK,OAAA;aACR,CACJ,CAAC;SACL;;;;;;QAOD,8BAAO,GAAP,UAAQ,KAAa;YACjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE;gBAC7C,IAAI,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,EAAE;oBACvC,MAAM;iBACT;gBAED,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;aACtC;YAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,EAAE,EAAE;gBAC7C,IAAI,KAAK,GAAG,CAAC,GAAG,CAAC,EAAE;oBACf,MAAM;iBACT;gBAED,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;aACtC;SACJ;QAED,wCAAiB,GAAjB,UAAkB,SAAqB;YACnC,IAAI,CAAC,SAAS;gBAAE,OAAO,EAAE,CAAC;YAC1B,OAAO,WAAS,SAAS,CAAC,KAAK,4CACP,SAAS,CAAC,KAAK,GAAG,CAAC,0CACpB,SAAS,CAAC,MAAM,GAAG,CAAC,qCAC1B,SAAS,CAAC,MAAM,OAAI,CAAC;SACzC;QACD,wCAAiB,GAAjB,UAAkB,SAAqB;YACnC,IAAI,CAAC,SAAS;gBAAE,OAAO,EAAE,CAAC;YAC1B,OAAO,WAAS,SAAS,CAAC,KAAK,qCACd,SAAS,CAAC,MAAM,OAAI,CAAC;SACzC;QAED,2CAAoB,GAApB,UACI,aAAsB,EACtB,KAAa,EACb,GAAW;YAEX,IAAI,YAAY,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;gBACxB,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;aAC5C;YACD,IAAI,YAAY,EAAE;gBACd,IAAI,YAAY,SAAA,CAAC;gBACjB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;oBAC7B,YAAY,GAAG,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBAC/D;qBAAM;oBACH,YAAY,GAAG,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;iBAChE;gBACD,IAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;gBAC/D,IAAM,eAAe,GAAG,UAAQ,GAAG,iBAAW,QAAQ,wCAA+B,YAAY,UAAM,CAAC;gBAExG,aAAa,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;gBAEzC,OAAO,eAAe,CAAC;aAC1B;YACD,OAAO,EAAE,CAAC;SACb;QAED,mCAAY,GAAZ,UAAa,GAAW,EAAE,aAAsB,EAAE,KAAa;YAC3D,IAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YAC5C,IAAA,GAAG,GAA6B,kBAAkB,IAA/C,EAAE,MAAM,GAAqB,kBAAkB,OAAvC,EAAE,KAAK,GAAc,kBAAkB,MAAhC,EAAE,OAAO,GAAK,kBAAkB,QAAvB,CAAwB;;;YAI3D,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,IAAM,OAAO,GAAG,GAAG,GAAG,OAAO,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC;YAE/C,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBAClE,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAClC,aAAa,EACb,KAAK,EACL,OAAO,CACV,CAAC;aACL;iBAAM;gBACH,UAAU,GAAG,KAAK,CAAC,YAAY,CAC3B,KAAK,EACL,GAAG,EACH,OAAO,EACP,MAAM,EACN,KAAK,EACL,OAAO,CACV,CAAC;aACL;YACD,IAAM,SAAS,GAAG,qCAAiC,UAAU,eAAY,CAAC;YAC1E,aAAa,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;SACpC;QAED,qCAAc,GAAd,UACI,GAAY,EACZ,KAAa,EACb,KAAa,EACb,KAAa,EACb,gBAAyB;YAL7B,iBAkCC;YA3BG,IAAI,gBAAgB,EAAE;gBAClB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAsB,QAAQ,CAAC,aAAa,EAAE;oBAC3D,KAAK,OAAA;oBACL,KAAK,EAAE,KAAK,IAAI,CAAC;iBACpB,CAAC,CAAC;aACN;YACD,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;iBACjB,KAAK,EAAE;iBACP,EAAE,CAAC,SAAS,EAAE;gBACX,KAAI,CAAC,kBAAkB,CACnB,GAAG,EACH,KAAK,EACL,KAAK,EACL,KAAK,EACL,gBAAgB,CACnB,CAAC;aACL,CAAC,CAAC;YACP,UAAU,CAAC;gBACP,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;qBACjB,KAAK,EAAE;qBACP,EAAE,CAAC,UAAU,EAAE;oBACZ,GAAG,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;oBACzC,GAAG,CAAC,IAAI,CACJ,qEAAqE,CACxE,CAAC;iBACL,CAAC,CAAC;aACV,EAAE,KAAK,CAAC,CAAC;SACb;QACD,yCAAkB,GAAlB,UACI,GAAY,EACZ,KAAa,EACb,KAAa,EACb,KAAa,EACb,gBAAyB;YAL7B,iBAgBC;YATG,UAAU,CAAC;gBACP,GAAG,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;gBACzC,IAAI,CAAC,gBAAgB,EAAE;oBACnB,KAAI,CAAC,IAAI,CAAC,OAAO,CAAsB,QAAQ,CAAC,aAAa,EAAE;wBAC3D,KAAK,OAAA;wBACL,KAAK,EAAE,KAAK,IAAI,CAAC;qBACpB,CAAC,CAAC;iBACN;aACJ,EAAE,KAAK,CAAC,CAAC;SACb;;;;;;;;;QAUD,8BAAO,GAAP,UAAQ,GAAW,EAAE,KAAa;YAC9B,IAAI,CAAC,GAAG,EAAE;gBACN,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE;oBAChC,OAAO;wBACH,KAAK,EAAE,IAAI;qBACd,CAAC;iBACL;qBAAM;oBACH,OAAO,CAAC,KAAK,CACT,yDAAyD;yBACpD,KAAK,GAAG,CAAC,CAAC;wBACX,iJAAiJ,CACxJ,CAAC;oBACF,OAAO;iBACV;aACJ;YAED,IAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CACrB,gGAAgG,CACnG,CAAC;YACF,IAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CACnB,mEAAmE,CACtE,CAAC;YACF,IAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CACpB,0EAA0E,CAC7E,CAAC;YAEF,IAAI,OAAO,EAAE;gBACT,OAAO;oBACH,OAAO,SAAA;iBACV,CAAC;aACL;iBAAM,IAAI,KAAK,EAAE;gBACd,OAAO;oBACH,KAAK,OAAA;iBACR,CAAC;aACL;iBAAM,IAAI,MAAM,EAAE;gBACf,OAAO;oBACH,MAAM,QAAA;iBACT,CAAC;aACL;SACJ;;QAGD,wCAAiB,GAAjB,UAAkB,KAAoB;YAAtC,iBAIC;YAHG,KAAK,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;gBACzB,OAAO,CAAC,gBAAgB,GAAG,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;aAC/D,CAAC,CAAC;SACN;;;;;;;QAQD,kCAAW,GAAX,UAAY,KAAa,EAAE,GAAY;YAAvC,iBAoNC;YAnNG,IAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YACpD,IAAM,aAAa,GAAG,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC;YAE9C,IAAA,MAAM,GAA6B,kBAAkB,OAA/C,EAAE,MAAM,GAAqB,kBAAkB,OAAvC,EAAE,KAAK,GAAc,kBAAkB,MAAhC,EAAE,OAAO,GAAK,kBAAkB,QAAvB,CAAwB;YACxD,IAAA,GAAG,GAAK,kBAAkB,IAAvB,CAAwB;YAEjC,IAAM,KAAK,GAAG,kBAAkB,CAAC,KAAK,CAAC;YAEvC,IAAM,WAAW,GACb,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;YAEnE,IAAI,kBAAkB,CAAC,UAAU,EAAE;gBAC/B,IAAM,SAAS,GAAG,kBAAkB,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAC3D,GAAG,GAAG,KAAK,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,GAAG,CAAC;aAClD;YAED,IAAM,SAAS,GAAG,kBAAkB,CAAC,gBAAgB,CAAC;YACtD,IAAI,YAAY,GAAG,EAAE,CAAC;YAEtB,IAAM,MAAM,GAAG,CAAC,CAAC,kBAAkB,CAAC,MAAM,CAAC;YAE3C,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;gBACtC,IAAI,SAAS,EAAE;oBACL,IAAA,KAAkB,IAAI,CAAC,sBAAsB,EAA3C,KAAG,SAAA,EAAE,MAAM,YAAgC,CAAC;oBACpD,IAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAC3B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EACjB,IAAI,CAAC,UAAU,EACf,KAAG,GAAG,MAAM,EACZ,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAC1C,CAAC;oBACF,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,SAAS,CAAC,CAAC;iBACpD;gBACD,IAAI,MAAM,EAAE;oBACR,IAAM,MAAM,GAAG,KAAK,CAAC,eAAe,CAChC,GAAG,EACH,IAAI,CAAC,QAAQ,CAAC,WAAW,EACzB,IAAI,CAAC,QAAQ,CAAC,YAAY,EAC1B,kBAAkB,CAAC,WAAW,CACjC,CAAC;oBACF,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;iBACjC;qBAAM,IAAI,MAAM,EAAE;oBACf,IAAI,QAAQ,GAAG,EAAE,CAAC;oBAClB,IAAM,cAAY,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;oBACtC,IAAM,iBAAiB,GACnB,CAAC,IAAI,CAAC,UAAU;wBAChB,IAAI,CAAC,cAAc;wBACnB,IAAI,CAAC,gBAAgB,CAAC;oBAC1B,IAAI,iBAAiB,EAAE;wBACnB,QAAQ,GAAG,IAAI,CAAC,oBAAoB,CAChC,aAAa,EACb,KAAK,EACL,EAAE,CACL,CAAC;qBACL;oBAED,IAAM,MAAM,GAAG,KAAK,CAAC,oBAAoB,CACrC,MAAM,EACN,QAAQ,IAAI,EAAE,EACd,YAAY,EACZ,SAAS,CACZ,CAAC;oBACF,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBAC9B,IAAM,OAAK,GACP,CAAC,iBAAiB;0BACZ,IAAI,CAAC,QAAQ,CAAC,sBAAsB;0BACpC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,IAAI,GAAG,CAAC;oBAChD,UAAU,CAAC;wBACP,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE;4BACjC,KAAK,OAAA;4BACL,GAAG,EAAE,GAAG;4BACR,UAAU,EAAE,WAAW;4BACvB,SAAS,EAAE,IAAI;4BACf,YAAY,gBAAA;yBACf,CAAC,CAAC;qBACN,EAAE,OAAK,CAAC,CAAC;iBACb;qBAAM,IAAI,SAAS,EAAE;oBAClB,IAAM,MAAM,GAAG,2CAAsC,YAAY,cAAU,CAAC;oBAC5E,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;oBAC9B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,EAAE;wBACjC,KAAK,OAAA;wBACL,GAAG,EAAE,GAAG;wBACR,UAAU,EAAE,WAAW;wBACvB,SAAS,EAAE,KAAK;qBACnB,CAAC,CAAC;iBACN;qBAAM;oBACH,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;oBAC7C,IAAI,MAAM,IAAI,OAAO,EAAE;wBACnB,IAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;wBAC9C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;qBAC9B;iBACJ;gBAED,IAAI,CAAC,IAAI,CAAC,OAAO,CACb,QAAQ,CAAC,gBAAgB,EACzB,EAAE,KAAK,OAAA,EAAE,CACZ,CAAC;gBAEF,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,KAAK,cAAc,EAAE;oBAClD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBACvB;aACJ;;YAGD,IAAI,MAAM,GAAG,CAAC,CAAC;;YAGf,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBAClB,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,gBAAgB,EAAE;oBAC9C,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,EAAE,CAAC;iBACrD;qBAAM;oBACH,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,EAAE,CAAC;iBAC/C;aACJ;;;YAID,IAAI,KAAK,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;gBACvD,MAAM,GAAG,KAAK,CAAC;aAClB;;YAGD,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBAClE,UAAU,CAAC;oBACP,aAAa;yBACR,WAAW,CAAC,yCAAyC,CAAC;yBACtD,UAAU,CAAC,OAAO,CAAC,CAAC;iBAC5B,EAAE,IAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,GAAG,CAAC,CAAC;gBAC/C,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,WAAW,CAAC,EAAE;oBACtC,UAAU,CAAC;wBACP,aAAa;6BACR,IAAI,CAAC,cAAc,CAAC;6BACpB,MAAM,CACH,KAAK,CAAC,YAAY,CACd,KAAK,EACL,GAAG,EACH,EAAE,EACF,MAAM,EACN,KAAK,EACL,kBAAkB,CAAC,OAAO,CAC7B,CACJ,CAAC;wBACN,IAAI,MAAM,IAAI,OAAO,EAAE;4BACnB,IAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;4BAC9C,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;yBAC9B;wBACD,KAAI,CAAC,cAAc,CACf,aAAa,EACb,KAAK,EACL,KAAK,EACL,MAAM,EACN,IAAI,CACP,CAAC;wBACF,IAAM,WAAW,GAAG,aAAa;6BAC5B,IAAI,CAAC,YAAY,CAAC;6BAClB,KAAK,EAAE,CAAC;wBACb,IACI,KAAK,CAAC,aAAa,CACf,WAAW,CAAC,GAAG,EAAsB,CACxC,EACH;4BACE,KAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,aAAa,EAAE,MAAM,CAAC,CAAC;yBACxD;6BAAM;4BACH,WAAW,CAAC,EAAE,CAAC,kBAAkB,EAAE;gCAC/B,KAAI,CAAC,iBAAiB,CAClB,KAAK,EACL,aAAa,EACb,MAAM,CACT,CAAC;6BACL,CAAC,CAAC;yBACN;qBACJ,EAAE,IAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,GAAG,CAAC,CAAC;iBAClD;aACJ;;YAGD,aAAa,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACpC,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;;YAGhE,IAAI,SAAS,IAAI,SAAS,CAAC,KAAK,IAAI,CAAC,MAAM,EAAE;gBACzC,aAAa,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;aACtD;;YAGD,IACI,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,gBAAgB;gBAC/C,aAAa,CAAC,QAAQ,CAAC,cAAc,CAAC;gBACtC,CAAC,IAAI,CAAC,UAAU,EAClB;gBACE,UAAU,CAAC;oBACP,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;iBACzC,EAAE,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;aACtC;;;YAID,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;YAEvB,IAAI,GAAG,KAAK,IAAI,EAAE;gBACd,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;oBACzC,aAAa;yBACR,IAAI,CAAC,YAAY,CAAC;yBAClB,KAAK,EAAE;yBACP,EAAE,CAAC,kBAAkB,EAAE;wBACpB,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;qBACvB,CAAC,CAAC;iBACV;qBAAM;oBACH,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;iBACvB;aACJ;SACJ;QAED,wCAAiB,GAAjB,UACI,KAAa,EACb,aAAsB,EACtB,KAAa;YAHjB,iBAWC;YANG,UAAU,CAAC;gBACP,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,MAAM,EAAE,CAAC;gBAC7C,aAAa,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;gBAC5C,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;aACvB,EAAE,KAAK,GAAG,GAAG,CAAC,CAAC;SACnB;QAED,gDAAyB,GAAzB,UACI,KAAa,EACb,SAAiB,EACjB,aAAiB;YAHrB,iBAwEC;YArEG,8BAAA,EAAA,iBAAiB;YAEjB,IAAM,sBAAsB,GAAa,EAAE,CAAC;;YAE5C,IAAI,qBAAqB,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YACvD,qBAAqB,GAAG,IAAI,CAAC,GAAG,CAC5B,qBAAqB,EACrB,IAAI,CAAC,YAAY,CAAC,MAAM,CAC3B,CAAC;YACF,IAAM,aAAa,GAAG,aAAW,IAAI,CAAC,IAAI,SAAI,SAAW,CAAC;YAC1D,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,CAAC,EAAE;gBAC/B,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK;oBACrC,sBAAsB,CAAC,IAAI,CAAC,aAAW,KAAI,CAAC,IAAI,SAAI,KAAO,CAAC,CAAC;iBAChE,CAAC,CAAC;gBACH,OAAO,sBAAsB,CAAC;aACjC;YAED,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,EAAE;gBAC5C,KACI,IAAI,GAAG,GAAG,KAAK,EACf,GAAG,GAAG,KAAK,GAAG,qBAAqB,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,EACnD,GAAG,EAAE,EACP;oBACE,sBAAsB,CAAC,IAAI,CAAC,aAAW,IAAI,CAAC,IAAI,SAAI,GAAK,CAAC,CAAC;iBAC9D;gBACD,IAAM,qBAAqB,GAAG,sBAAsB,CAAC,MAAM,CAAC;gBAC5D,KACI,IAAI,GAAG,GAAG,CAAC,EACX,GAAG,GAAG,qBAAqB,GAAG,qBAAqB,EACnD,GAAG,EAAE,EACP;oBACE,sBAAsB,CAAC,IAAI,CACvB,aAAW,IAAI,CAAC,IAAI,UAAI,KAAK,GAAG,GAAG,GAAG,CAAC,CAAE,CAC5C,CAAC;iBACL;aACJ;iBAAM;gBACH,KACI,IAAI,GAAG,GAAG,KAAK,EACf,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC;oBACnC,GAAG,GAAG,KAAK,GAAG,qBAAqB,GAAG,CAAC,EACvC,GAAG,EAAE,EACP;oBACE,sBAAsB,CAAC,IAAI,CAAC,aAAW,IAAI,CAAC,IAAI,SAAI,GAAK,CAAC,CAAC;iBAC9D;gBACD,IAAM,qBAAqB,GAAG,sBAAsB,CAAC,MAAM,CAAC;gBAC5D,KACI,IAAI,GAAG,GAAG,CAAC,EACX,GAAG,GAAG,qBAAqB,GAAG,qBAAqB,EACnD,GAAG,EAAE,EACP;oBACE,sBAAsB,CAAC,IAAI,CACvB,aAAW,IAAI,CAAC,IAAI,UAAI,KAAK,GAAG,GAAG,GAAG,CAAC,CAAE,CAC5C,CAAC;iBACL;aACJ;YACD,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;gBACpB,IAAI,KAAK,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;oBACxC,sBAAsB,CAAC,IAAI,CAAC,aAAW,IAAI,CAAC,IAAI,SAAI,CAAG,CAAC,CAAC;iBAC5D;qBAAM,IAAI,KAAK,KAAK,CAAC,EAAE;oBACpB,sBAAsB,CAAC,IAAI,CACvB,aAAW,IAAI,CAAC,IAAI,UAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAE,CACzD,CAAC;iBACL;aACJ;YACD,IAAI,sBAAsB,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,EAAE;gBACtD,sBAAsB,CAAC,IAAI,CAAC,aAAW,IAAI,CAAC,IAAI,SAAI,SAAW,CAAC,CAAC;aACpE;YAED,OAAO,sBAAsB,CAAC;SACjC;QAED,yCAAkB,GAAlB,UAAmB,KAAa,EAAE,SAAiB;YAAnD,iBAmBC;YAlBG,IAAM,sBAAsB,GAAG,IAAI,CAAC,yBAAyB,CACzD,KAAK,EACL,SAAS,EACT,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CACxC,CAAC;YAEF,sBAAsB,CAAC,OAAO,CAAC,UAAC,IAAI;gBAChC,IAAI,KAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC7C,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,eAAY,IAAI,gCAA0B,CAAC,CAAC;iBAClE;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,UAAC,IAAI;gBAChC,IAAI,sBAAsB,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;oBAC7C,GAAG,CAAC,MAAI,IAAM,CAAC,CAAC,MAAM,EAAE,CAAC;iBAC5B;aACJ,CAAC,CAAC;YACH,OAAO,sBAAsB,CAAC;SACjC;;;;QAKD,4CAAqB,GAArB;YACI,IAAI,SAAS,GAAG,CAAC,CAAC;YAClB,IAAI;gBACA,IAAM,aAAa,GAAG,IAAI,CAAC,KAAK;qBAC3B,IAAI,CAAC,aAAa,CAAC;qBACnB,KAAK,EAAE;qBACP,IAAI,CAAC,IAAI,CAAC,CAAC;gBAChB,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;aAC1D;YAAC,OAAO,KAAK,EAAE;gBACZ,SAAS,GAAG,CAAC,CAAC;aACjB;YACD,OAAO,SAAS,CAAC;SACpB;QAED,uCAAgB,GAAhB,UAAiB,KAAa;YAC1B,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;gBACxB,IAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBACpD,IAAM,GAAG,GACL,kBAAkB,CAAC,WAAW,KAAK,KAAK;qBACvC,kBAAkB,CAAC,WAAW,IAAI,kBAAkB,CAAC,GAAG,CAAC,CAAC;gBAE/D,IAAI,GAAG,EAAE;oBACL,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;oBACrD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;iBAC9C;qBAAM;oBACH,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;iBAC3C;aACJ;SACJ;QAED,yCAAkB,GAAlB,UACI,SAA0B,EAC1B,gBAAyB,EACzB,iBAA0B;YAH9B,iBAoCC;YA/BG,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,iBAAiB,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;aACnD;YACD,UAAU,CAAC;;gBAEP,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gBAEnC,KAAI,CAAC,KAAK;qBACL,IAAI,CAAC,UAAU,CAAC;qBAChB,WAAW,CAAC,6BAA6B,CAAC,CAAC;gBAEhD,IAAI,SAAS,KAAK,MAAM,EAAE;;oBAEtB,gBAAgB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;oBAC3C,iBAAiB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;iBAC/C;qBAAM;;oBAEH,gBAAgB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;oBAC3C,iBAAiB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;iBAC/C;;gBAGD,UAAU,CAAC;oBACP,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;oBAEtD,gBAAgB,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;;oBAGxC,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;iBACzC,EAAE,EAAE,CAAC,CAAC;aACV,EAAE,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;SAChC;;;;;;;;;;;;;;QAeD,4BAAK,GAAL,UACI,KAAa,EACb,SAAmB,EACnB,SAAmB,EACnB,SAAkC;YAJtC,iBAkIC;YA5HG,IAAM,SAAS,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC/C,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;;YAGnE,IAAI,IAAI,CAAC,UAAU,IAAI,SAAS,KAAK,KAAK,EAAE;gBACxC,OAAO;aACV;YAED,IAAM,oBAAoB,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC;YAEtD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACd,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;gBAE7B,IAAM,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAClD,IAAM,mBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;gBAEvD,IAAM,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBACpD,IAAM,SAAS,GAAG,kBAAkB,CAAC,gBAAgB,CAAC;gBAEtD,IAAI,SAAS,EAAE;oBACL,IAAA,KAAkB,IAAI,CAAC,sBAAsB,EAA3C,KAAG,SAAA,EAAE,MAAM,YAAgC,CAAC;oBACpD,IAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAC3B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EACjB,IAAI,CAAC,UAAU,EACf,KAAG,GAAG,MAAM,EACZ,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAC1C,CAAC;oBACF,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;iBAC3C;gBAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAoB,QAAQ,CAAC,WAAW,EAAE;oBACvD,SAAS,WAAA;oBACT,KAAK,OAAA;oBACL,SAAS,EAAE,CAAC,CAAC,SAAS;oBACtB,SAAS,EAAE,CAAC,CAAC,SAAS;iBACzB,CAAC,CAAC;gBAEH,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAEnB,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBAElC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;gBAEzB,IAAI,CAAC,SAAS,EAAE;oBACZ,IAAI,KAAK,GAAG,SAAS,EAAE;wBACnB,SAAS,GAAG,MAAM,CAAC;qBACtB;yBAAM,IAAI,KAAK,GAAG,SAAS,EAAE;wBAC1B,SAAS,GAAG,MAAM,CAAC;qBACtB;iBACJ;gBAED,IAAI,CAAC,SAAS,EAAE;oBACZ,IAAI,CAAC,kBAAkB,CACnB,SAA2B,EAC3B,gBAAgB,EAChB,mBAAiB,CACpB,CAAC;iBACL;qBAAM;oBACH,IAAI,CAAC,KAAK;yBACL,IAAI,CAAC,UAAU,CAAC;yBAChB,WAAW,CAAC,wCAAwC,CAAC,CAAC;oBAC3D,IAAI,SAAS,SAAA,CAAC;oBACd,IAAI,SAAS,SAAA,CAAC;oBACd,IAAI,oBAAoB,GAAG,CAAC,EAAE;wBAC1B,SAAS,GAAG,KAAK,GAAG,CAAC,CAAC;wBACtB,SAAS,GAAG,KAAK,GAAG,CAAC,CAAC;wBAEtB,IAAI,KAAK,KAAK,CAAC,IAAI,SAAS,KAAK,oBAAoB,GAAG,CAAC,EAAE;;4BAEvD,SAAS,GAAG,CAAC,CAAC;4BACd,SAAS,GAAG,oBAAoB,GAAG,CAAC,CAAC;yBACxC;6BAAM,IACH,KAAK,KAAK,oBAAoB,GAAG,CAAC;4BAClC,SAAS,KAAK,CAAC,EACjB;;4BAEE,SAAS,GAAG,CAAC,CAAC;4BACd,SAAS,GAAG,oBAAoB,GAAG,CAAC,CAAC;yBACxC;qBACJ;yBAAM;wBACH,SAAS,GAAG,CAAC,CAAC;wBACd,SAAS,GAAG,CAAC,CAAC;qBACjB;oBAED,IAAI,SAAS,KAAK,MAAM,EAAE;wBACtB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;qBAC1D;yBAAM;wBACH,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;qBAC1D;oBAED,gBAAgB,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;iBAC3C;;gBAGD,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;oBAClB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;iBACjC;gBAED,UAAU,CAAC;oBACP,IAAI,KAAI,CAAC,UAAU,EAAE;wBACjB,KAAI,CAAC,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;qBACjC;oBACD,IAAI,KAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;wBACvB,KAAI,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;qBACpC;;oBAED,IAAI,KAAI,CAAC,QAAQ,CAAC,eAAe,KAAK,cAAc,EAAE;wBAClD,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;qBACvB;iBACJ,EAAE,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,EAAE,GAAG,EAAE,KAAK,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;gBAEnG,UAAU,CAAC;oBACP,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;oBACpB,mBAAiB,CAAC,WAAW,CAAC,mBAAmB,CAAC,CAAC;oBACnD,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE;wBACnC,SAAS,EAAE,SAAS;wBACpB,KAAK,OAAA;wBACL,SAAS,WAAA;wBACT,SAAS,WAAA;qBACZ,CAAC,CAAC;iBACN,EAAE,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,GAAG,GAAG,GAAG,KAAK,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC;aACxG;YAED,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACtB;QAED,2CAAoB,GAApB,UAAqB,KAAa;YAC9B,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;SAClE;QAED,yCAAkB,GAAlB;YACI,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,CAAC,IAAI,CACtC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAChC,CAAC;SACL;QAED,gCAAS,GAAT,UAAU,WAAmB,EAAE,SAAiB;YAC5C,IAAM,SAAS,GAAG,SAAS,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;YACtD,IAAM,SAAS,GAAG,SAAS,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;YACtD,IAAI,UAAU,GAAG,KAAK,CAAC;YAEvB,IAAI,IAAI,CAAC,cAAc,EAAE;gBACrB,UAAU,GAAG,IAAI,CAAC;aACrB;iBAAM;gBACH,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE;oBAC1B,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC;oBACnC,UAAU,GAAG,IAAI,CAAC;iBACrB;qBAAM,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,EAAE,EAAE;oBACjC,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC;oBACjC,UAAU,GAAG,IAAI,CAAC;iBACrB;aACJ;YAED,IAAI,CAAC,UAAU,EAAE;gBACb,OAAO;aACV;YAED,IAAM,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAEpD,IAAI,IAAI,CAAC,cAAc,KAAK,YAAY,EAAE;;gBAEtC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;;gBAGnC,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,SAAS,EAAE,CAAC,CAAC,CAAC;;gBAG/C,IAAM,KAAK,GAAG,aAAa,CAAC,GAAG,EAAE,CAAC,WAAW,CAAC;gBAC9C,IAAM,gBAAgB,GAAG,CAAC,KAAK,GAAG,EAAE,IAAI,GAAG,CAAC;gBAC5C,IAAM,MAAM,GAAG,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,SAAS,GAAG,EAAE,IAAI,GAAG,CAAC,CAAC;gBACnE,IAAI,CAAC,YAAY,CACb,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,EACzC,CAAC,KAAK,GAAG,SAAS,GAAG,MAAM,EAC3B,CAAC,CACJ,CAAC;gBAEF,IAAI,CAAC,YAAY,CACb,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,KAAK,EAAE,EACzC,KAAK,GAAG,SAAS,GAAG,MAAM,EAC1B,CAAC,CACJ,CAAC;aACL;iBAAM,IAAI,IAAI,CAAC,cAAc,KAAK,UAAU,EAAE;gBAC3C,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE;oBAC5B,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;oBAEjD,IAAM,OAAO,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,MAAM,CAAC,WAAW,CAAC;oBAC7D,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;oBAEvC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;oBAChE,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;oBAC7D,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,gCAAgC,CAAC,CAAC;iBACzD;aACJ;SACJ;QAED,+BAAQ,GAAR,UAAS,SAAiB,EAAE,WAAmB,EAAE,KAAU;YAA3D,iBAyEC;YAxEG,IAAI,QAAQ,CAAC;;YAGb,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,UAAU,EAAE;gBACnC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;aACnC;;YAGD,UAAU,CAAC;gBACP,KAAI,CAAC,UAAU,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC;gBACpD,KAAI,CAAC,KAAK,CAAC,WAAW,CAClB,4CAA4C,CAC/C,CAAC;gBAEF,IAAI,YAAY,GAAG,IAAI,CAAC;gBAExB,IAAI,KAAI,CAAC,cAAc,KAAK,YAAY,EAAE;oBACtC,QAAQ,GAAG,SAAS,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC;oBAC/C,IAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CACxB,SAAS,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CACtC,CAAC;oBACF,IACI,QAAQ,GAAG,CAAC;wBACZ,WAAW,GAAG,KAAI,CAAC,QAAQ,CAAC,cAAc,EAC5C;wBACE,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;wBACzB,YAAY,GAAG,KAAK,CAAC;qBACxB;yBAAM,IACH,QAAQ,GAAG,CAAC;wBACZ,WAAW,GAAG,KAAI,CAAC,QAAQ,CAAC,cAAc,EAC5C;wBACE,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;wBACzB,YAAY,GAAG,KAAK,CAAC;qBACxB;iBACJ;qBAAM,IAAI,KAAI,CAAC,cAAc,KAAK,UAAU,EAAE;oBAC3C,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;oBACzD,IACI,KAAI,CAAC,QAAQ,CAAC,QAAQ;wBACtB,KAAI,CAAC,QAAQ,CAAC,YAAY;wBAC1B,QAAQ,GAAG,GAAG,EAChB;wBACE,KAAI,CAAC,YAAY,EAAE,CAAC;wBACpB,OAAO;qBACV;yBAAM;wBACH,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;qBACpC;iBACJ;gBACD,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;gBAEhD,IACI,YAAY;oBACZ,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,EACnD;;oBAEE,IAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;oBACjC,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE;wBAC9B,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;qBAC3C;iBACJ;gBAED,KAAI,CAAC,cAAc,GAAG,SAAS,CAAC;aACnC,CAAC,CAAC;;YAGH,UAAU,CAAC;gBACP,IACI,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC;oBACnC,KAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,UAAU,EACnC;oBACE,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;iBACtC;aACJ,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC;SACjC;QAED,kCAAW,GAAX;YAAA,iBA2DC;YA1DG,IAAI,WAAW,GAAW,EAAY,CAAC;YACvC,IAAI,SAAS,GAAW,EAAY,CAAC;YACrC,IAAI,OAAO,GAAG,KAAK,CAAC;YACpB,IAAI,SAAS,GAAG,KAAK,CAAC;YAEtB,IAAI,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;gBAC3B,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,eAAe,EAAE,UAAC,CAAC;oBAC9B,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,IAAM,KAAK,GAAG,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;oBAC5C,IACI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC;wBAC9B,KAAK,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC;wBAClC,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC;wBACjC,CAAC,KAAI,CAAC,MAAM;wBACZ,CAAC,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAC9B;wBACE,SAAS,GAAG,IAAI,CAAC;wBACjB,KAAI,CAAC,WAAW,GAAG,OAAO,CAAC;wBAC3B,KAAI,CAAC,gBAAgB,EAAE,CAAC;wBACxB,WAAW,GAAG;4BACV,KAAK,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK;4BAC/B,KAAK,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK;yBAClC,CAAC;qBACL;iBACJ,CAAC,CAAC;gBAEH,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,cAAc,EAAE,UAAC,CAAC;oBAC7B,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,IACI,SAAS;wBACT,KAAI,CAAC,WAAW,KAAK,OAAO;wBAC5B,CAAC,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAC9B;wBACE,SAAS,GAAG;4BACR,KAAK,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK;4BAC/B,KAAK,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK;yBAClC,CAAC;wBACF,KAAI,CAAC,SAAS,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;wBACvC,OAAO,GAAG,IAAI,CAAC;qBAClB;iBACJ,CAAC,CAAC;gBAEH,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,aAAa,EAAE,UAAC,KAAiB;oBAC5C,IAAI,KAAI,CAAC,WAAW,KAAK,OAAO,EAAE;wBAC9B,IAAI,OAAO,EAAE;4BACT,OAAO,GAAG,KAAK,CAAC;4BAChB,KAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;yBAChD;6BAAM,IAAI,SAAS,EAAE;4BAClB,IAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;4BACjC,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE;gCAC9B,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;6BAC3C;yBACJ;wBACD,KAAI,CAAC,WAAW,GAAG,SAAS,CAAC;wBAC7B,SAAS,GAAG,KAAK,CAAC;qBACrB;iBACJ,CAAC,CAAC;aACN;SACJ;QAED,iCAAU,GAAV;YAAA,iBAsEC;YArEG,IAAI,WAAW,GAAW,EAAY,CAAC;YACvC,IAAI,SAAS,GAAW,EAAY,CAAC;YACrC,IAAI,SAAS,GAAG,KAAK,CAAC;YACtB,IAAI,OAAO,GAAG,KAAK,CAAC;YACpB,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;gBAC1B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,cAAc,EAAE,UAAC,CAAC;oBAC5B,IAAM,KAAK,GAAG,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;oBAC5C,IACI,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC;wBACjC,KAAK,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAChC;wBACE,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,MAAM,EAAE;4BACnD,CAAC,CAAC,cAAc,EAAE,CAAC;4BACnB,IAAI,CAAC,KAAI,CAAC,MAAM,EAAE;gCACd,KAAI,CAAC,gBAAgB,EAAE,CAAC;gCACxB,WAAW,GAAG;oCACV,KAAK,EAAE,CAAC,CAAC,KAAK;oCACd,KAAK,EAAE,CAAC,CAAC,KAAK;iCACjB,CAAC;gCACF,SAAS,GAAG,IAAI,CAAC;;gCAGjB,KAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,UAAU,IAAI,CAAC,CAAC;gCACjC,KAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,UAAU,IAAI,CAAC,CAAC;;gCAIjC,KAAI,CAAC,KAAK;qCACL,WAAW,CAAC,SAAS,CAAC;qCACtB,QAAQ,CAAC,aAAa,CAAC,CAAC;gCAE7B,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;6BACzC;yBACJ;qBACJ;iBACJ,CAAC,CAAC;gBAEH,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,wBAAsB,IAAI,CAAC,IAAM,EAAE,UAAC,CAAC;oBAChD,IAAI,SAAS,IAAI,KAAI,CAAC,QAAQ,EAAE;wBAC5B,OAAO,GAAG,IAAI,CAAC;wBACf,SAAS,GAAG;4BACR,KAAK,EAAE,CAAC,CAAC,KAAK;4BACd,KAAK,EAAE,CAAC,CAAC,KAAK;yBACjB,CAAC;wBACF,KAAI,CAAC,SAAS,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;wBACvC,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;qBACxC;iBACJ,CAAC,CAAC;gBAEH,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,sBAAoB,IAAI,CAAC,IAAM,EAAE,UAAC,KAAK;oBAClD,IAAI,CAAC,KAAI,CAAC,QAAQ,EAAE;wBAChB,OAAO;qBACV;oBACD,IAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;oBACjC,IAAI,OAAO,EAAE;wBACT,OAAO,GAAG,KAAK,CAAC;wBAChB,KAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;wBAC7C,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;qBACvC;yBAAM,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE;wBACrC,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;qBAC3C;;oBAGD,IAAI,SAAS,EAAE;wBACX,SAAS,GAAG,KAAK,CAAC;wBAClB,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;qBAC7D;iBACJ,CAAC,CAAC;aACN;SACJ;QAED,uCAAgB,GAAhB;YACI,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YAChC,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YAChC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBACpD,IAAI,IAAI,CAAC,KAAK,KAAK,CAAC,EAAE;oBAClB,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;iBAC7C;qBAAM,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;oBACpD,UAAU,GAAG,CAAC,CAAC;iBAClB;aACJ;YAED,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,6BAA6B,CAAC,CAAC;YACvE,IAAI,UAAU,GAAG,CAAC,CAAC,EAAE;gBACjB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;aAC3D;YAED,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;SAC3D;;;;;;;;;;QAWD,oCAAa,GAAb,UAAc,SAAmB;YAAjC,iBA4BC;YA3BG,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YAC/B,IAAI,SAAS,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3C,KAAK,GAAG,KAAK,CAAC;aACjB;YAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACd,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;oBAC3C,IAAI,CAAC,KAAK,EAAE,CAAC;oBACb,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE;wBACxC,KAAK,EAAE,IAAI,CAAC,KAAK;qBACpB,CAAC,CAAC;oBACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;iBACtD;qBAAM;oBACH,IAAI,KAAK,EAAE;wBACP,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;wBACf,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE;4BACxC,KAAK,EAAE,IAAI,CAAC,KAAK;yBACpB,CAAC,CAAC;wBACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;qBACtD;yBAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,IAAI,CAAC,SAAS,EAAE;wBACtD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;wBACpC,UAAU,CAAC;4BACP,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;yBAC1C,EAAE,GAAG,CAAC,CAAC;qBACX;iBACJ;aACJ;SACJ;;;;;;;;;;QAWD,oCAAa,GAAb,UAAc,SAAmB;YAAjC,iBA8BC;YA7BG,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YAC/B,IAAI,SAAS,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3C,KAAK,GAAG,KAAK,CAAC;aACjB;YAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACd,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;oBAChB,IAAI,CAAC,KAAK,EAAE,CAAC;oBACb,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE;wBACxC,KAAK,EAAE,IAAI,CAAC,KAAK;wBACjB,SAAS,WAAA;qBACZ,CAAC,CAAC;oBACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;iBACtD;qBAAM;oBACH,IAAI,KAAK,EAAE;wBACP,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,CAAC;wBAC1C,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,EAAE;4BACxC,KAAK,EAAE,IAAI,CAAC,KAAK;4BACjB,SAAS,WAAA;yBACZ,CAAC,CAAC;wBACH,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;qBACtD;yBAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,iBAAiB,IAAI,CAAC,SAAS,EAAE;wBACtD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;wBACnC,UAAU,CAAC;4BACP,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;yBACzC,EAAE,GAAG,CAAC,CAAC;qBACX;iBACJ;aACJ;SACJ;QAED,+BAAQ,GAAR;YAAA,iBA8BC;YA7BG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,sBAAoB,IAAI,CAAC,IAAM,EAAE,UAAC,CAAC;gBAC9C,IACI,KAAI,CAAC,QAAQ;oBACb,KAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,IAAI;oBAC7B,CAAC,CAAC,OAAO,KAAK,EAAE,EAClB;oBACE,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,IACI,KAAI,CAAC,QAAQ,CAAC,iBAAiB;wBAC/B,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC;wBACpC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,EACtC;wBACE,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC;qBAC3C;yBAAM;wBACH,KAAI,CAAC,YAAY,EAAE,CAAC;qBACvB;iBACJ;gBACD,IAAI,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAE;oBAC/C,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE,EAAE;wBAClB,CAAC,CAAC,cAAc,EAAE,CAAC;wBACnB,KAAI,CAAC,aAAa,EAAE,CAAC;qBACxB;oBAED,IAAI,CAAC,CAAC,OAAO,KAAK,EAAE,EAAE;wBAClB,CAAC,CAAC,cAAc,EAAE,CAAC;wBACnB,KAAI,CAAC,aAAa,EAAE,CAAC;qBACxB;iBACJ;aACJ,CAAC,CAAC;SACN;QAED,4BAAK,GAAL;YAAA,iBAOC;YANG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE;gBAC1C,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB,CAAC,CAAC;YACH,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE;gBAC1C,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB,CAAC,CAAC;SACN;QAED,mCAAY,GAAZ,UAAa,KAAa;;YAEtB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,gBAAgB,EAAE;gBACvD,IAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;gBAC7C,IAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;gBAC7C,IAAI,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;oBACtC,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;iBACxD;qBAAM;oBACH,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;iBAC3D;gBAED,IAAI,KAAK,GAAG,CAAC,EAAE;oBACX,KAAK,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;iBACxD;qBAAM;oBACH,KAAK,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;iBAC3D;aACJ;SACJ;;;;;;QAOD,sCAAe,GAAf,UAAgB,IAA2B;YAA3B,qBAAA,EAAA,OAAO,MAAM,CAAC,QAAQ,CAAC,IAAI;YACvC,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAI,IAAI,GAAG,CAAC,CAAC;YAEb,IAAI,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE;gBAC/B,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;oBAC3D,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;oBAC3C,IAAI,SAAS,CAAC,SAAS,KAAK,SAAS,EAAE;wBACnC,IAAI,GAAG,KAAK,CAAC;wBACb,MAAM;qBACT;iBACJ;aACJ;iBAAM;gBACH,IAAI,GAAG,QAAQ,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;aAClC;YAED,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;SACjC;QAED,mCAAY,GAAZ,UACI,GAAY,EACZ,MAAc,EACd,MAAc,EACd,MAAU,EACV,MAAU;YADV,uBAAA,EAAA,UAAU;YACV,uBAAA,EAAA,UAAU;YAEV,GAAG,CAAC,GAAG,CACH,WAAW,EACX,cAAc;gBACV,MAAM;gBACN,MAAM;gBACN,MAAM;gBACN,mBAAmB;gBACnB,MAAM;gBACN,IAAI;gBACJ,MAAM;gBACN,MAAM,CACb,CAAC;SACL;QAED,iCAAU,GAAV;YAAA,iBAcC;YAbG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,eAAe,EAAE,UAAC,CAAC;gBAC7B,IAAI,CAAC,CAAC,CAAC,MAAM,EAAE;oBACX,OAAO;iBACV;gBAED,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;oBACd,KAAI,CAAC,aAAa,EAAE,CAAC;iBACxB;qBAAM;oBACH,KAAI,CAAC,aAAa,EAAE,CAAC;iBACxB;gBAED,CAAC,CAAC,cAAc,EAAE,CAAC;aACtB,CAAC,CAAC;SACN;QAED,qCAAc,GAAd,UAAe,MAAe;YAC1B,QACI,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC;gBAC3B,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC;gBAC1B,MAAM,CAAC,QAAQ,CAAC,aAAa,CAAC,EAChC;SACL;QAED,sCAAe,GAAf,UAAgB,MAAe;YAC3B,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC;iBAC3C,IAAI,CAAC,uBAAuB,CAAC;iBAC7B,GAAG,EAAE,CAAC;YACX,QACI,MAAM,CAAC,QAAQ,CAAC,iBAAiB,CAAC;gBAClC,MAAM,CAAC,QAAQ,CAAC,sBAAsB,CAAC;iBACtC,UAAU,IAAI,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,EACnD;SACL;QAED,qCAAc,GAAd;YAAA,iBAKC;YAJG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE;gBAC9C,KAAI,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBACzC,KAAI,CAAC,eAAe,EAAE,CAAC;aAC1B,CAAC,CAAC;SACN;QAED,yCAAkB,GAAlB;YAAA,iBAgCC;YA/BG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ;gBAAE,OAAO;YACpC,IAAI,SAAS,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,UAAU,EAAE;gBAC3C,KAAI,CAAC,YAAY,EAAE,CAAC;aACvB,CAAC,CAAC;YAEH,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;;;gBAG1B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,cAAc,EAAE,UAAC,CAAC;oBAC5B,IAAM,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBAC7B,IAAI,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;wBAC7B,SAAS,GAAG,IAAI,CAAC;qBACpB;yBAAM;wBACH,SAAS,GAAG,KAAK,CAAC;qBACrB;iBACJ,CAAC,CAAC;gBAEH,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,cAAc,EAAE;oBAC1B,SAAS,GAAG,KAAK,CAAC;iBACrB,CAAC,CAAC;gBAEH,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,EAAE,UAAC,CAAC;oBAC1B,IAAM,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;oBAC7B,IAAI,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,IAAI,SAAS,EAAE;wBAC1C,IAAI,CAAC,KAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,aAAa,CAAC,EAAE;4BACrC,KAAI,CAAC,YAAY,EAAE,CAAC;yBACvB;qBACJ;iBACJ,CAAC,CAAC;aACN;SACJ;;;;;;;;;;;;;;QAeD,mCAAY,GAAZ,UAAa,KAAe;YAA5B,iBAmGC;YAlGG,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,EAAE;gBACvD,OAAO,CAAC,CAAC;aACZ;YACD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YACxC,GAAG,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAE1C,IAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAI,SAA6B,CAAC;YAClC,IAAI,IAAI,CAAC,cAAc,IAAI,WAAW,EAAE;gBAC9B,IAAA,KAAkB,IAAI,CAAC,sBAAsB,EAA3C,KAAG,SAAA,EAAE,MAAM,YAAgC,CAAC;gBACpD,IAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAC3B,WAAW,EACX,IAAI,CAAC,UAAU,EACf,KAAG,GAAG,MAAM,EACZ,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,gBAAgB;oBAC1C,IAAI,CAAC,QAAQ,CAAC,YAAY,CACjC,CAAC;gBACF,SAAS,GAAG,KAAK,CAAC,YAAY,CAC1B,WAAW,EACX,IAAI,CAAC,UAAU,EACf,KAAG,EACH,MAAM,EACN,SAAS,CACZ,CAAC;aACL;YACD,IAAI,IAAI,CAAC,cAAc,IAAI,SAAS,EAAE;gBAClC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,+BAA+B,CAAC,CAAC;gBACrD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC;qBACxB,QAAQ,CAAC,uBAAuB,CAAC;qBACjC,GAAG,CACA,qBAAqB,EACrB,IAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,IAAI,CAC9C;qBACA,GAAG,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;aACpC;iBAAM;gBACH,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;;;gBAGrC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;aAChD;;;;YAMD,IAAI,CAAC,cAAc,EAAE,CAAC;YAEtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,IAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;YACjC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;YAEnD,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAClC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;YAErD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;;YAGrC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAEnD,IAAM,aAAa,GACf,IAAI,CAAC,cAAc,IAAI,SAAS;kBAC1B,IAAI,CAAC,GAAG,CACJ,IAAI,CAAC,QAAQ,CAAC,sBAAsB,EACpC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CACjC;kBACD,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;YACzC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;;YAG1C,UAAU,CAAC;gBACP,IAAI,KAAI,CAAC,cAAc,IAAI,SAAS,EAAE;oBAClC,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;iBAChD;gBACD,KAAI,CAAC,UAAU,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;;gBAGvC,KAAI,CAAC,SAAS;qBACT,UAAU,CAAC,OAAO,CAAC;qBACnB,GAAG,CACA,qBAAqB,EACrB,KAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,IAAI,CACxC,CAAC;gBAEN,KAAI,CAAC,KAAK,CAAC,WAAW,CAAC,gBAAc,KAAI,CAAC,QAAQ,CAAC,UAAY,CAAC,CAAC;gBAEjE,KAAI,CAAC,YAAY,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,uBAAuB,CAAC,CAAC;gBACnE,KAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;gBACpB,IAAI,KAAI,CAAC,QAAQ,EAAE;oBACf,KAAI,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,UAAU,EAAE;wBACnC,QAAQ,EAAE,KAAI;qBACjB,CAAC,CAAC;iBACN;gBACD,KAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;gBAExB,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;aACzB,EAAE,aAAa,GAAG,GAAG,CAAC,CAAC;YACxB,OAAO,aAAa,GAAG,GAAG,CAAC;SAC9B;QAED,qCAAc,GAAd,UAAe,OAAc;YACzB,KAAK,IAAM,GAAG,IAAI,IAAI,CAAC,OAAO,EAAE;gBAC5B,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;oBACnB,IAAI;wBACA,IAAI,OAAO,EAAE;4BACT,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,CAAC;yBAC/B;6BAAM;4BACH,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY;gCAC1B,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,YAAY,EAAE,CAAC;yBACxC;qBACJ;oBAAC,OAAO,GAAG,EAAE;wBACV,OAAO,CAAC,IAAI,CACR,2CAAyC,GAAG,kCAA+B,CAC9E,CAAC;qBACL;iBACJ;aACJ;SACJ;;;;;;;;;;;;QAaD,8BAAO,GAAP;YAAA,iBAiBC;YAhBG,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YAC7C,UAAU,CAAC;gBACP,KAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;gBAC1B,IAAI,CAAC,KAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;oBACxB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAI,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;wBACpD,IAAM,OAAO,GAAG,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;wBAClC,IAAM,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;wBAC9B,QAAQ,CAAC,GAAG,CACR,yBAAuB,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAG,CACvD,CAAC;qBACL;iBACJ;gBACD,GAAG,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,eAAa,KAAI,CAAC,IAAM,CAAC,CAAC;gBAC1C,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBACrB,KAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;aAC5B,EAAE,YAAY,CAAC,CAAC;SACpB;QACL,mBAAC;IAAD,CAAC,IAAA;IAED,MAAM,CAAC,YAAY,GAAG,UAAU,EAAE,EAAE,OAAO;QACvC,IAAI,CAAC,EAAE,EAAE;YACL,OAAO;SACV;QACD,IAAI;YACA,OAAO,IAAI,YAAY,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;SACxC;QAAC,OAAO,GAAG,EAAE;YACV,OAAO,CAAC,KAAK,CAAC,yCAAyC,EAAE,GAAG,CAAC,CAAC;SACjE;IACL,CAAC,CAAC;;;;;;;;;;;;"}