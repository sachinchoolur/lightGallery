/* v1.1.5 3/29/2015 http://sachinchoolur.github.io/lightGallery*/
!function(e){"use strict";e.fn.lightGallery=function(t){var i,a,l,n,s,o,d,r,c,u,h,m={mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:600,addClass:"",closable:!0,loop:!1,auto:!1,pause:4e3,escKey:!0,controls:!0,hideControlOnEnd:!1,preload:1,showAfterLoad:!0,selector:null,index:!1,lang:{allPhotos:"All photos"},counter:!1,exThumbImage:!1,thumbnail:!0,showThumbByDefault:!1,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbMargin:5,mobileSrc:!1,mobileSrcMaxWidth:640,swipeThreshold:50,enableTouch:!0,enableDrag:!0,vimeoColor:"CCCCCC",youtubePlayerParams:!1,videoAutoplay:!0,videoMaxWidth:"855px",dynamic:!1,dynamicEl:[],onOpen:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){},onBeforeClose:function(){},onCloseAfter:function(){}},f=e(this),v=this,p=null,b=0,g=!1,C=!1,y=void 0!==document.createTouch||"ontouchstart"in window||"onmsgesturechange"in window||navigator.msMaxTouchPoints,w=!1,T=!1,x=!1,q=e.extend(!0,{},m,t),S={init:function(){f.each(function(){var t=e(this);q.dynamic?(p=q.dynamicEl,b=0,d=b,k.init(b)):(p=null!==q.selector?e(q.selector):t.children(),p.on("click",function(i){p=null!==q.selector?e(q.selector):t.children(),i.preventDefault(),i.stopPropagation(),b=p.index(this),d=b,k.init(b)}))})}},k={init:function(){g=!0,this.structure(),this.getWidth(),this.closeSlide(),this.autoStart(),this.counter(),this.slideTo(),this.buildThumbnail(),this.keyPress(),q.index?(this.slide(q.index),this.animateThumb(q.index)):(this.slide(b),this.animateThumb(b)),q.enableDrag&&this.touch(),q.enableTouch&&this.enableTouch(),setTimeout(function(){i.addClass("opacity")},50)},structure:function(){e("body").append('<div id="lg-outer" class="'+q.addClass+'"><div id="lg-gallery"><div id="lg-slider"></div><a id="lg-close" class="close"></a></div></div>').addClass("light-gallery"),a=e("#lg-outer"),i=e("#lg-gallery"),q.showAfterLoad===!0&&i.addClass("show-after-load"),l=i.find("#lg-slider");var t="";if(q.dynamic)for(var s=0;s<q.dynamicEl.length;s++)t+='<div class="lg-slide"></div>';else p.each(function(){t+='<div class="lg-slide"></div>'});l.append(t),n=i.find(".lg-slide")},closeSlide:function(){q.closable&&e("#lg-outer").on("click",function(t){e(t.target).is(".lg-slide")&&v.destroy(!1)}),e("#lg-close").bind("click touchend",function(){v.destroy(!1)})},getWidth:function(){var t=function(){u=e(window).width()};e(window).bind("resize.lightGallery",t())},doCss:function(){var e=function(){for(var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,i=0;i<e.length;i++)if(e[i]in t.style)return!0};return q.useCSS&&e()?!0:!1},enableTouch:function(){var t=this;if(y){var i={},a={};e("body").on("touchstart.lightGallery",function(e){a=e.originalEvent.targetTouches[0],i.pageX=e.originalEvent.targetTouches[0].pageX,i.pageY=e.originalEvent.targetTouches[0].pageY}),e("body").on("touchmove.lightGallery",function(e){var t=e.originalEvent;a=t.targetTouches[0],e.preventDefault()}),e("body").on("touchend.lightGallery",function(){var e=a.pageX-i.pageX,l=q.swipeThreshold;e>=l?(t.prevSlide(),clearInterval(h)):-l>=e&&(t.nextSlide(),clearInterval(h))})}},touch:function(){var t,i,a=this;e(".light-gallery").bind("mousedown",function(e){e.stopPropagation(),e.preventDefault(),t=e.pageX}),e(".light-gallery").bind("mouseup",function(e){e.stopPropagation(),e.preventDefault(),i=e.pageX,i-t>20?a.prevSlide():t-i>20&&a.nextSlide()})},isVideo:function(e,t){var i=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),a=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),l=e.match(/\/\/(?:www\.)?dai\.ly\/([0-9a-z\-_]+)/i),n=!1;return q.dynamic?"true"==q.dynamicEl[t].iframe&&(n=!0):"true"==p.eq(t).attr("data-iframe")&&(n=!0),i||a||l||n?!0:void 0},loadVideo:function(t,i){var a=t.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9_\-]+)/i),l=t.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),n=t.match(/\/\/(?:www\.)?dai\.ly\/([0-9a-z\-_]+)/i),s="",o="";if(a){if(o=q.videoAutoplay===!0&&C===!1?"?autoplay=1&rel=0&wmode=opaque":"?wmode=opaque",q.youtubePlayerParams){var d=e.param(q.youtubePlayerParams);o=o+"&"+d}s='<iframe class="object" width="560" height="315" src="//www.youtube.com/embed/'+a[1]+o+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else l?(o=q.videoAutoplay===!0&&C===!1?"autoplay=1&":"",s='<iframe class="object" id="video'+i+'" width="560" height="315"  src="http://player.vimeo.com/video/'+l[1]+"?"+o+"byline=0&portrait=0&color="+q.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):n?(o=q.videoAutoplay===!0&&C===!1?"autoplay=1&":"",s='<iframe class="object" id="video'+i+'" width="560" height="315"  src="http://www.dailymotion.com/embed/video/'+n[1]+"?"+o+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):s='<iframe class="object" frameborder="0" src="'+t+'"  allowfullscreen="true"></iframe>';return'<div class="video-cont" style="max-width:'+q.videoMaxWidth+' !important;"><div class="video">'+s+"</div></div>"},addHtml:function(t){var i=null;if(i=q.dynamic?q.dynamicEl[t]["sub-html"]:p.eq(t).attr("data-sub-html"),"undefined"!=typeof i&&null!==i){var a=i.substring(0,1);i="."==a||"#"==a?e(i).html():i,n.eq(t).append(i)}},preload:function(e){for(var t=e,i=0;i<=q.preload&&!(i>=p.length-e);i++)this.loadContent(t+i,!0);for(var a=0;a<=q.preload&&!(0>t-a);a++)this.loadContent(t-a,!0)},loadObj:function(e,t){var i=this;n.eq(t).find(".object").on("load error",function(){n.eq(t).addClass("complete")}),e===!1&&(n.eq(t).hasClass("complete")?i.preload(t):n.eq(t).find(".object").on("load error",function(){i.preload(t)}))},loadContent:function(t,i){{var a,l=this;p.length-t}q.preload>p.length&&(q.preload=p.length),q.mobileSrc===!0&&u<=q.mobileSrcMaxWidth&&(a=q.dynamic?q.dynamicEl[t].mobileSrc:p.eq(t).attr("data-responsive-src")),a||(a=q.dynamic?q.dynamicEl[t].src:p.eq(t).attr("data-src"));var s=0;i===!0&&(s=q.speed+400),"undefined"!=typeof a&&""!==a?l.isVideo(a,t)?setTimeout(function(){n.eq(t).hasClass("loaded")||(n.eq(t).prepend(l.loadVideo(a,t)),l.addHtml(t),n.eq(t).addClass("loaded"),q.auto&&q.videoAutoplay===!0&&clearInterval(h)),l.loadObj(i,t)},s):setTimeout(function(){n.eq(t).hasClass("loaded")||(n.eq(t).prepend('<img class="object" src="'+a+'" />'),l.addHtml(t),n.eq(t).addClass("loaded")),l.loadObj(i,t)},s):setTimeout(function(){if(!n.eq(t).hasClass("loaded")){var a=null;if(a=q.dynamic?q.dynamicEl[t].html:p.eq(t).attr("data-html"),"undefined"!=typeof a&&null!==a){var s=a.substring(0,1);a="."==s||"#"==s?e(a).html():a}"undefined"!=typeof a&&null!==a&&n.eq(t).append('<div class="video-cont" style="max-width:'+q.videoMaxWidth+' !important;"><div class="video">'+a+"</div></div>"),l.addHtml(t),n.eq(t).addClass("loaded complete"),q.auto&&q.videoAutoplay===!0&&clearInterval(h)}l.loadObj(i,t)},s)},counter:function(){if(q.counter===!0){var t=e("#lg-slider > div").length;i.append("<div id='lg-counter'><span id='lg-counter-current'></span> / <span id='lg-counter-all'>"+t+"</span></div>")}},buildThumbnail:function(){if(q.thumbnail===!0&&p.length>1){var t=this,a="";q.showThumbByDefault||(a='<span class="close ib"><i class="bUi-iCn-rMv-16" aria-hidden="true"></i></span>'),i.append('<div class="thumb-cont"><div class="thumb-info">'+a+'</div><div class="thumb-inner"></div></div>'),r=i.find(".thumb-cont"),s.after('<a class="cl-thumb"></a>'),s.parent().addClass("has-thumb"),i.find(".cl-thumb").bind("click touchend",function(){i.addClass("open"),t.doCss()&&"slide"===q.mode&&(n.eq(b).prevAll().removeClass("next-slide").addClass("prev-slide"),n.eq(b).nextAll().removeClass("prev-slide").addClass("next-slide"))}),i.find(".thumb-cont .close").bind("click touchend",function(){i.removeClass("open")});var l,o=i.find(".thumb-info"),d=i.find(".thumb-inner"),u="";if(q.dynamic)for(var m=0;m<q.dynamicEl.length;m++)l=q.dynamicEl[m].thumb,u+='<div class="thumb"><img src="'+l+'" /></div>';else p.each(function(){l=q.exThumbImage===!1||"undefined"==typeof e(this).attr(q.exThumbImage)||null===e(this).attr(q.exThumbImage)?e(this).find("img").attr("src"):e(this).attr(q.exThumbImage),u+='<div class="thumb"><img src="'+l+'" /></div>'});if(d.append(u),c=d.find(".thumb"),c.css({"margin-right":q.thumbMargin+"px",width:q.thumbWidth+"px"}),q.animateThumb===!0){var f=p.length*(q.thumbWidth+q.thumbMargin);i.find(".thumb-inner").css({width:f+"px",position:"relative","transition-duration":q.speed+"ms"})}c.bind("click touchend",function(){w=!0;var i=e(this).index();c.removeClass("active"),e(this).addClass("active"),t.slide(i),t.animateThumb(i),clearInterval(h)}),o.prepend('<span class="ib count">'+q.lang.allPhotos+" ("+c.length+")</span>"),q.showThumbByDefault&&i.addClass("open")}},animateThumb:function(e){if(q.animateThumb===!0){var t,a=i.find(".thumb-cont").width();switch(q.currentPagerPosition){case"left":t=0;break;case"middle":t=a/2-q.thumbWidth/2;break;case"right":t=a-q.thumbWidth}var l=(q.thumbWidth+q.thumbMargin)*e-1-t,n=p.length*(q.thumbWidth+q.thumbMargin);l>n-a&&(l=n-a),0>l&&(l=0),this.doCss()?i.find(".thumb-inner").css("transform","translate3d(-"+l+"px, 0px, 0px)"):i.find(".thumb-inner").animate({left:-l+"px"},q.speed)}},slideTo:function(){var e=this;q.controls===!0&&p.length>1&&(i.append('<div id="lg-action"><a id="lg-prev"></a><a id="lg-next"></a></div>'),s=i.find("#lg-prev"),o=i.find("#lg-next"),s.bind("click",function(){e.prevSlide(),clearInterval(h)}),o.bind("click",function(){e.nextSlide(),clearInterval(h)}))},autoStart:function(){var e=this;q.auto===!0&&(h=setInterval(function(){b=b+1<p.length?b:-1,b++,e.slide(b)},q.pause))},keyPress:function(){var t=this;e(window).bind("keyup.lightGallery",function(e){e.preventDefault(),e.stopPropagation(),37===e.keyCode&&(t.prevSlide(),clearInterval(h)),38===e.keyCode&&q.thumbnail===!0&&p.length>1?i.hasClass("open")||(t.doCss()&&"slide"===q.mode&&(n.eq(b).prevAll().removeClass("next-slide").addClass("prev-slide"),n.eq(b).nextAll().removeClass("prev-slide").addClass("next-slide")),i.addClass("open")):39===e.keyCode&&(t.nextSlide(),clearInterval(h)),40===e.keyCode&&q.thumbnail===!0&&p.length>1&&!q.showThumbByDefault?i.hasClass("open")&&i.removeClass("open"):q.escKey===!0&&27===e.keyCode&&(!q.showThumbByDefault&&i.hasClass("open")?i.removeClass("open"):v.destroy(!1))})},nextSlide:function(){var e=this;b=n.index(n.eq(d)),b+1<p.length?(b++,e.slide(b)):q.loop?(b=0,e.slide(b)):q.thumbnail===!0&&p.length>1&&!q.showThumbByDefault?i.addClass("open"):(n.eq(b).find(".object").addClass("right-end"),setTimeout(function(){n.find(".object").removeClass("right-end")},400)),e.animateThumb(b),q.onSlideNext.call(this,v)},prevSlide:function(){var e=this;b=n.index(n.eq(d)),b>0?(b--,e.slide(b)):q.loop?(b=p.length-1,e.slide(b)):q.thumbnail===!0&&p.length>1&&!q.showThumbByDefault?i.addClass("open"):(n.eq(b).find(".object").addClass("left-end"),setTimeout(function(){n.find(".object").removeClass("left-end")},400)),e.animateThumb(b),q.onSlidePrev.call(this,v)},slide:function(t){var i=this;if(C?(setTimeout(function(){i.loadContent(t,!1)},q.speed+400),l.hasClass("on")||l.addClass("on"),this.doCss()&&""!==q.speed&&(l.hasClass("speed")||l.addClass("speed"),x===!1&&(l.css("transition-duration",q.speed+"ms"),x=!0)),this.doCss()&&""!==q.cssEasing&&(l.hasClass("timing")||l.addClass("timing"),T===!1&&(l.css("transition-timing-function",q.cssEasing),T=!0)),q.onSlideBefore.call(this,v)):i.loadContent(t,!1),"slide"===q.mode){var a=null!==navigator.userAgent.match(/iPad/i);!this.doCss()||l.hasClass("slide")||a?this.doCss()&&!l.hasClass("use-left")&&a&&l.addClass("use-left"):l.addClass("slide"),this.doCss()||C?!this.doCss()&&C&&l.animate({left:100*-t+"%"},q.speed,q.easing):l.css({left:100*-t+"%"})}else"fade"===q.mode&&(this.doCss()&&!l.hasClass("fade-m")?l.addClass("fade-m"):this.doCss()||l.hasClass("animate")||l.addClass("animate"),this.doCss()||C?!this.doCss()&&C&&(n.eq(d).fadeOut(q.speed,q.easing),n.eq(t).fadeIn(q.speed,q.easing)):(n.fadeOut(100),n.eq(t).fadeIn(100)));if(t+1>=p.length&&q.auto&&q.loop===!1&&clearInterval(h),n.eq(d).removeClass("current"),n.eq(t).addClass("current"),this.doCss()&&"slide"===q.mode&&(w===!1?(e(".prev-slide").removeClass("prev-slide"),e(".next-slide").removeClass("next-slide"),n.eq(t-1).addClass("prev-slide"),n.eq(t+1).addClass("next-slide")):(n.eq(t).prevAll().removeClass("next-slide").addClass("prev-slide"),n.eq(t).nextAll().removeClass("prev-slide").addClass("next-slide"))),q.thumbnail===!0&&p.length>1&&(c.removeClass("active"),c.eq(t).addClass("active")),q.controls&&q.hideControlOnEnd&&q.loop===!1&&p.length>1){var r=p.length;r=parseInt(r)-1,0===t?(s.addClass("disabled"),o.removeClass("disabled")):t===r?(s.removeClass("disabled"),o.addClass("disabled")):s.add(o).removeClass("disabled")}d=t,C===!1?q.onOpen.call(this,v):q.onSlideAfter.call(this,v),setTimeout(function(){C=!0}),w=!1,q.counter&&e("#lg-counter-current").text(t+1),e(window).bind("resize.lightGallery",function(){setTimeout(function(){i.animateThumb(t)},200)})}};return v.isActive=function(){return g===!0?!0:!1},v.destroy=function(t){g=!1,t="undefined"!=typeof t?!1:!0,q.onBeforeClose.call(this,v);var l=C;C=!1,T=!1,x=!1,w=!1,clearInterval(h),t===!0&&p.off("click touch touchstart"),e(".light-gallery").off("mousedown mouseup"),e("body").off("touchstart.lightGallery touchmove.lightGallery touchend.lightGallery"),e(window).off("resize.lightGallery keyup.lightGallery"),l===!0&&(i.addClass("fade-m"),setTimeout(function(){a.remove(),e("body").removeClass("light-gallery")},500)),q.onCloseAfter.call(this,v)},S.init(),this}}(jQuery);
